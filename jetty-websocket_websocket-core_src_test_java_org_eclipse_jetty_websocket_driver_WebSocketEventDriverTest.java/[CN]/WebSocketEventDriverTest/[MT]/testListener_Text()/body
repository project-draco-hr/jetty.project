{
  ListenerBasicSocket socket=new ListenerBasicSocket();
  WebSocketEventDriver driver=newDriver(socket);
  LocalWebSocketSession conn=new LocalWebSocketSession(testname);
  driver.setConnection(conn);
  driver.onConnect();
  driver.incoming(WebSocketFrame.text("Hello World"));
  driver.incoming(new CloseInfo(StatusCode.NORMAL).asFrame());
  socket.capture.assertEventCount(3);
  socket.capture.assertEventStartsWith(0,"onWebSocketConnect");
  socket.capture.assertEventStartsWith(1,"onWebSocketText(\"Hello World\")");
  socket.capture.assertEventStartsWith(2,"onWebSocketClose(1000,");
}
