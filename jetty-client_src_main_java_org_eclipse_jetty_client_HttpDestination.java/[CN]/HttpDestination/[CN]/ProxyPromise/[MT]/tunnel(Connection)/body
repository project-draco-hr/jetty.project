{
  String target=address.getHost() + ":" + address.getPort();
  Request connect=client.newRequest(proxyAddress.getHost(),proxyAddress.getPort()).scheme(HttpScheme.HTTP.asString()).method(HttpMethod.CONNECT).path(target).header(HttpHeader.HOST,target).timeout(client.getConnectTimeout(),TimeUnit.MILLISECONDS);
  connection.send(connect,new Response.CompleteListener(){
    @Override public void onComplete(    Result result){
      if (result.isFailed()) {
        tunnelFailed(connection,delegate,result.getFailure());
      }
 else {
        Response response=result.getResponse();
        if (response.getStatus() == 200) {
          tunnelSucceeded(connection,delegate);
        }
 else {
          tunnelFailed(connection,delegate,new HttpResponseException("Received " + response + " for "+ result.getRequest(),response));
        }
      }
    }
  }
);
}
