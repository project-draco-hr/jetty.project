{
  String target=address.getHostString() + ":" + address.getPort();
  Request connect=client.newRequest(proxyAddress.getHostString(),proxyAddress.getPort()).scheme(HttpScheme.HTTP.asString()).method(HttpMethod.CONNECT).path(target).header(HttpHeader.HOST.asString(),target);
  connection.send(connect,new TimedResponseListener(client.getConnectTimeout(),TimeUnit.MILLISECONDS,connect,new Response.CompleteListener(){
    @Override public void onComplete(    Result result){
      if (result.isFailed()) {
        failed(connection,result.getFailure());
      }
 else {
        Response response=result.getResponse();
        if (response.getStatus() == 200)         delegate.completed(connection);
 else         failed(connection,new HttpResponseException("Received " + response + " for "+ result.getRequest(),response));
      }
    }
  }
));
}
