{
  this.client=client;
  this.scheme=scheme;
  this.address=new InetSocketAddress(host,port);
  this.requests=new ArrayBlockingQueue<>(client.getMaxRequestsQueuedPerDestination());
  this.idleConnections=new ArrayBlockingQueue<>(client.getMaxConnectionsPerDestination());
  this.activeConnections=new ArrayBlockingQueue<>(client.getMaxConnectionsPerDestination());
  this.requestNotifier=new RequestNotifier(client);
  this.responseNotifier=new ResponseNotifier(client);
  ProxyConfiguration proxyConfig=client.getProxyConfiguration();
  proxyAddress=proxyConfig != null && proxyConfig.matches(host,port) ? new InetSocketAddress(proxyConfig.getHost(),proxyConfig.getPort()) : null;
}
