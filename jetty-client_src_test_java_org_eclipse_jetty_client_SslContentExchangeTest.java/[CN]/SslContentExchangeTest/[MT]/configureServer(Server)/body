{
  setProtocol("https");
  SslSelectChannelConnector connector=new SslSelectChannelConnector();
  File keystore=MavenTestingUtils.getTestResourceFile("keystore");
  SslContextFactory cf=connector.getSslContextFactory();
  cf.setKeyStore(keystore.getAbsolutePath());
  cf.setKeyStorePassword("storepwd");
  cf.setKeyManagerPassword("keypwd");
  cf.setEnableSessionCaching(true);
  server.addConnector(connector);
  Handler handler=new TestHandler(getBasePath());
  ServletContextHandler root=new ServletContextHandler();
  root.setContextPath("/");
  root.setResourceBase(getBasePath());
  ServletHolder servletHolder=new ServletHolder(new DefaultServlet());
  servletHolder.setInitParameter("gzip","true");
  root.addServlet(servletHolder,"/*");
  HandlerCollection handlers=new HandlerCollection();
  handlers.setHandlers(new Handler[]{handler,root});
  server.setHandler(handlers);
}
