{
  if (serverProtocols == null)   return "spdy/2";
  for (  String serverProtocol : serverProtocols) {
    for (    String protocol : factories.keySet()) {
      if (serverProtocol.equals(protocol))       return protocol;
    }
    String protocol=factory.selectProtocol(serverProtocols);
    if (protocol != null)     return protocol;
  }
  return null;
}
