{
  if (policy.getBehavior() == WebSocketBehavior.SERVER) {
    throw new MuxPhysicalConnectionException(MuxDropChannel.Reason.UNKNOWN_MUX_CONTROL_BLOCK,"AddChannelResponse not allowed per spec");
  }
  if (response.getRsv() != 0) {
    throw new MuxPhysicalConnectionException(MuxDropChannel.Reason.UNKNOWN_RESPONSE_ENCODING,"RSV Not allowed to be set");
  }
  if (response.getChannelId() == CONTROL_CHANNEL_ID) {
    throw new MuxPhysicalConnectionException(MuxDropChannel.Reason.UNKNOWN_MUX_CONTROL_BLOCK,"Invalid Channel ID");
  }
  long channelId=response.getChannelId();
  MuxChannel channel=this.channels.get(channelId);
  if (channel == null) {
    throw new MuxPhysicalConnectionException(MuxDropChannel.Reason.UNKNOWN_MUX_CONTROL_BLOCK,"Unknown Channel ID");
  }
  try {
    channel.onOpen();
  }
 catch (  Throwable t) {
    throw new MuxPhysicalConnectionException(MuxDropChannel.Reason.BAD_RESPONSE,"Unable to parse response",t);
  }
}
