{
  assertThat("Via Header is set",baseRequest.getHeader("X-Forwarded-For"),is(notNullValue()));
  assertThat("X-Forwarded-For Header is set",baseRequest.getHeader("X-Forwarded-For"),is(notNullValue()));
  assertThat("X-Forwarded-Host Header is set",baseRequest.getHeader("X-Forwarded-Host"),is(notNullValue()));
  assertThat("X-Forwarded-Proto Header is set",baseRequest.getHeader("X-Forwarded-Proto"),is(notNullValue()));
  assertThat("X-Forwarded-Server Header is set",baseRequest.getHeader("X-Forwarded-Server"),is(notNullValue()));
  baseRequest.setHandled(true);
  BufferedReader bufferedReader=request.getReader();
  int read;
  while ((read=bufferedReader.read()) != -1)   response.getOutputStream().write(read);
  response.addHeader("Trailer","bla");
  if (responseHeader != null)   response.addHeader(responseHeader,"bar");
  if (responseData != null)   response.getOutputStream().write(responseData);
}
