{
  if (LOG.isDebugEnabled())   LOG.debug("Commit failed",x);
  if (x instanceof EofException || x instanceof ClosedChannelException) {
    _callback.failed(x);
    _response.getHttpOutput().closed();
  }
 else {
    _transport.send(HttpGenerator.RESPONSE_500_INFO,false,null,true,new Callback(){
      @Override public void succeeded(){
        _callback.failed(x);
        _response.getHttpOutput().closed();
      }
      @Override public void failed(      Throwable th){
        _callback.failed(x);
        _response.getHttpOutput().closed();
      }
    }
);
  }
}
