{
  _requests.incrementAndGet();
  HttpFields fields=_response.getHttpFields();
switch (_version) {
case HTTP_0_9:
    break;
case HTTP_1_0:
  if (_configuration.getSendDateHeader() && !fields.contains(HttpHeader.DATE))   _response.getHttpFields().add(_connector.getServer().getDateField());
break;
case HTTP_1_1:
if (_configuration.getSendDateHeader() && !fields.contains(HttpHeader.DATE)) _response.getHttpFields().add(_connector.getServer().getDateField());
if (_expect) {
badMessage(HttpStatus.EXPECTATION_FAILED_417,null);
return true;
}
break;
default :
throw new IllegalStateException();
}
return true;
}
