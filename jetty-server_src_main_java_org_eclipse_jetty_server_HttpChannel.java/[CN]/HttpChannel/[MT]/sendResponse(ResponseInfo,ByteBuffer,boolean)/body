{
  boolean committing=_committed.compareAndSet(false,true);
  if (committing) {
    if (info == null)     info=_response.newResponseInfo();
    try {
      _transport.send(info,content,complete);
      if (info.getStatus() < 200)       _committed.set(false);
    }
 catch (    EofException e) {
      LOG.debug(e);
      _transport.send(HttpGenerator.RESPONSE_500_INFO,null,true);
      complete=true;
      throw e;
    }
catch (    Exception e) {
      LOG.warn(e);
      _transport.send(HttpGenerator.RESPONSE_500_INFO,null,true);
      complete=true;
      throw e;
    }
 finally {
      if (complete)       _response.getHttpOutput().closed();
    }
  }
 else   if (info == null) {
    _transport.send(null,content,complete);
  }
  return committing;
}
