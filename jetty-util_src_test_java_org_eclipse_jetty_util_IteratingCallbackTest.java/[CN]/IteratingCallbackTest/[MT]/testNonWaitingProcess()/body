{
  TestCB cb=new TestCB(){
    int i=10;
    @Override protected State process() throws Exception {
      processed++;
      if (i-- > 1) {
        succeeded();
        return State.SCHEDULED;
      }
      return State.SUCCEEDED;
    }
  }
;
  cb.iterate();
  Assert.assertTrue(cb.waitForComplete());
  Assert.assertEquals(10,cb.processed);
}
