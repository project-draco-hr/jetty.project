{
  TestCB cb=new TestCB(){
    int i=4;
    @Override protected State process() throws Exception {
      processed++;
      if (i-- > 1) {
        scheduler.schedule(successTask,50,TimeUnit.MILLISECONDS);
        return State.SCHEDULED;
      }
      return State.SUCCEEDED;
    }
  }
;
  cb.iterate();
  Assert.assertTrue(cb.waitForComplete());
  Assert.assertEquals(4,cb.processed);
}
