{
  _context=filterConfig.getServletContext();
  int max_priority=__DEFAULT_MAX_PRIORITY;
  if (filterConfig.getInitParameter(MAX_PRIORITY_INIT_PARAM) != null)   max_priority=Integer.parseInt(filterConfig.getInitParameter(MAX_PRIORITY_INIT_PARAM));
  _queue=new Queue[max_priority + 1];
  _listener=new ContinuationListener[max_priority + 1];
  for (int p=0; p < _queue.length; p++) {
    _queue[p]=new ConcurrentLinkedQueue<Continuation>();
    final int priority=p;
    _listener[p]=new ContinuationListener(){
      public void onComplete(      Continuation continuation){
      }
      public void onTimeout(      Continuation continuation){
        _queue[priority].remove(continuation);
      }
    }
;
  }
  int _maxRequests=__DEFAULT_PASSES;
  if (filterConfig.getInitParameter(MAX_REQUESTS_INIT_PARAM) != null)   _maxRequests=Integer.parseInt(filterConfig.getInitParameter(MAX_REQUESTS_INIT_PARAM));
  _passes=new Semaphore(_maxRequests,true);
  long wait=__DEFAULT_WAIT_MS;
  if (filterConfig.getInitParameter(MAX_WAIT_INIT_PARAM) != null)   wait=Integer.parseInt(filterConfig.getInitParameter(MAX_WAIT_INIT_PARAM));
  _waitMs=wait;
  long suspend=__DEFAULT_TIMEOUT_MS;
  if (filterConfig.getInitParameter(SUSPEND_INIT_PARAM) != null)   suspend=Integer.parseInt(filterConfig.getInitParameter(SUSPEND_INIT_PARAM));
  _suspendMs=suspend;
}
