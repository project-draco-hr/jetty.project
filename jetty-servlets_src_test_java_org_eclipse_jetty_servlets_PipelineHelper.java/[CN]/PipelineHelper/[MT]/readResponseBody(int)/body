{
  byte partial[]=new byte[size];
  int readBytes=0;
  int bytesLeft=size;
  while (readBytes < size) {
    int len=inputStream.read(partial,readBytes,bytesLeft);
    Assert.assertThat("Read should not have hit EOL yet",len,not(-1));
    if (len > 0) {
      readBytes+=len;
      bytesLeft-=len;
    }
  }
  return partial;
}
