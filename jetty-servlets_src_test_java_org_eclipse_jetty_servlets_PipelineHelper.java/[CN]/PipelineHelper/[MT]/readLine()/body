{
  StringBuilder line=new StringBuilder();
  boolean foundCR=false;
  boolean foundLF=false;
  int b;
  while (!(foundCR && foundLF)) {
    b=inputStream.read();
    Assert.assertThat("Should not have hit EOL (yet) during chunk size read",(int)b,not(-1));
    if (b == 0x0D) {
      foundCR=true;
    }
 else     if (b == 0x0A) {
      foundLF=true;
    }
 else {
      foundCR=false;
      foundLF=false;
      line.append((char)b);
    }
  }
  return line.toString();
}
