{
  loop:   while (true) {
switch (_state.get()) {
case ITERATE_AGAIN:
      if (_state.compareAndSet(State.ITERATE_AGAIN,State.FAILED))       break loop;
    continue;
case ITERATING:
  if (_state.compareAndSet(State.ITERATING,State.FAILED))   break loop;
continue;
case SCHEDULED:
if (_state.compareAndSet(State.SCHEDULED,State.FAILED)) break loop;
continue;
case IDLE:
if (_state.compareAndSet(State.IDLE,State.FAILED)) break loop;
continue;
default :
throw new IllegalStateException("state=" + _state.get(),x);
}
}
}
