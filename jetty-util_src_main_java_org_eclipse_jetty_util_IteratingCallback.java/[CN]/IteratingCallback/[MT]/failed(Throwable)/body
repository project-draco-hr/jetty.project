{
  loop:   while (true) {
switch (_state.get()) {
case ITERATING:
      if (_state.compareAndSet(State.ITERATING,State.FAILED))       break loop;
    continue;
case WAITING:
  if (_state.compareAndSet(State.WAITING,State.FAILED))   break loop;
continue;
default :
throw new IllegalStateException("Already " + _state.get());
}
}
_callback.failed(x);
}
