{
  try {
    while (true) {
switch (_state.get()) {
case INACTIVE:
{
          if (perform())           return;
          break;
        }
case ITERATING:
{
        if (_state.compareAndSet(State.ITERATING,State.ITERATE_AGAIN))         return;
        break;
      }
default :
{
      return;
    }
}
}
}
 catch (Throwable x) {
failed(x);
}
}
