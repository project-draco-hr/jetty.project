{
  boolean process=false;
  try (SpinLock.Lock lock=_lock.lock()){
switch (_state) {
case PROCESSING:
{
        _state=State.CALLED;
        break;
      }
case PENDING:
{
      _state=State.PROCESSING;
      process=true;
      break;
    }
case CLOSED:
case FAILED:
{
    break;
  }
default :
{
  throw new IllegalStateException("state=" + _state);
}
}
}
 if (process) processing();
}
