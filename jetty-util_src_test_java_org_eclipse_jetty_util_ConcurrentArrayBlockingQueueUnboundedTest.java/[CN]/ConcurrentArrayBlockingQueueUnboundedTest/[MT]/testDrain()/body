{
  final ConcurrentArrayBlockingQueue<Integer> queue=newConcurrentArrayQueue(512);
  List<Integer> chunk1=Arrays.asList(1,2);
  List<Integer> chunk2=Arrays.asList(3,4,5);
  queue.addAll(chunk1);
  queue.addAll(chunk2);
  List<Integer> drainer1=new ArrayList<>();
  queue.drainTo(drainer1,chunk1.size());
  List<Integer> drainer2=new ArrayList<>();
  queue.drainTo(drainer2,chunk2.size());
  Assert.assertEquals(chunk1,drainer1);
  Assert.assertEquals(chunk2,drainer2);
}
