{
  if (buffer == null)   return 0;
  return buffer.capacity() - buffer.limit();
}
