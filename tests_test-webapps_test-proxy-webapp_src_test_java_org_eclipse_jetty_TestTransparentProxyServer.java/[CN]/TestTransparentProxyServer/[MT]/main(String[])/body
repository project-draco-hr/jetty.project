{
  ((StdErrLog)Log.getLog()).setSource(false);
  String jetty_root="../../..";
  QueuedThreadPool threadPool=new QueuedThreadPool();
  threadPool.setMaxThreads(100);
  Server server=new Server(threadPool);
  server.manage(threadPool);
  MBeanContainer mbContainer=new MBeanContainer(ManagementFactory.getPlatformMBeanServer());
  server.addBean(mbContainer);
  server.addBean(Log.getLog());
  HttpConfiguration config=new HttpConfiguration();
  config.setSecurePort(8443);
  config.addCustomizer(new ForwardedRequestCustomizer());
  config.setSendDateHeader(true);
  config.setSendServerVersion(true);
  HttpConnectionFactory http=new HttpConnectionFactory(config);
  ServerConnector httpConnector=new ServerConnector(server,http);
  httpConnector.setPort(8080);
  httpConnector.setIdleTimeout(30000);
  server.addConnector(httpConnector);
  SslContextFactory sslContextFactory=new SslContextFactory();
  sslContextFactory.setKeyStorePath(jetty_root + "/jetty-server/src/main/config/etc/keystore");
  sslContextFactory.setKeyStorePassword("OBF:1vny1zlo1x8e1vnw1vn61x8g1zlu1vn4");
  sslContextFactory.setKeyManagerPassword("OBF:1u2u1wml1z7s1z7a1wnl1u2g");
  sslContextFactory.setTrustStorePath(jetty_root + "/jetty-server/src/main/config/etc/keystore");
  sslContextFactory.setTrustStorePassword("OBF:1vny1zlo1x8e1vnw1vn61x8g1zlu1vn4");
  sslContextFactory.setExcludeCipherSuites("SSL_RSA_WITH_DES_CBC_SHA","SSL_DHE_RSA_WITH_DES_CBC_SHA","SSL_DHE_DSS_WITH_DES_CBC_SHA","SSL_RSA_EXPORT_WITH_RC4_40_MD5","SSL_RSA_EXPORT_WITH_DES40_CBC_SHA","SSL_DHE_RSA_EXPORT_WITH_DES40_CBC_SHA","SSL_DHE_DSS_EXPORT_WITH_DES40_CBC_SHA");
  sslContextFactory.setCipherComparator(new HTTP2Cipher.CipherComparator());
  HttpConfiguration https_config=new HttpConfiguration(config);
  https_config.addCustomizer(new SecureRequestCustomizer());
  HTTP2ServerConnectionFactory h2=new HTTP2ServerConnectionFactory(https_config);
  NegotiatingServerConnectionFactory.checkProtocolNegotiationAvailable();
  ALPNServerConnectionFactory alpn=new ALPNServerConnectionFactory();
  alpn.setDefaultProtocol(h2.getProtocol());
  SslConnectionFactory ssl=new SslConnectionFactory(sslContextFactory,alpn.getProtocol());
  ServerConnector http2Connector=new ServerConnector(server,ssl,alpn,h2,new HttpConnectionFactory(https_config));
  http2Connector.setPort(8443);
  http2Connector.setIdleTimeout(15000);
  server.addConnector(http2Connector);
  HandlerCollection handlers=new HandlerCollection();
  ContextHandlerCollection contexts=new ContextHandlerCollection();
  handlers.setHandlers(new Handler[]{contexts,new DefaultHandler()});
  server.setHandler(handlers);
  WebAppContext webapp=new WebAppContext();
  webapp.setResourceBase("src/main/webapp");
  contexts.addHandler(webapp);
  server.setStopAtShutdown(true);
  server.start();
  server.join();
}
