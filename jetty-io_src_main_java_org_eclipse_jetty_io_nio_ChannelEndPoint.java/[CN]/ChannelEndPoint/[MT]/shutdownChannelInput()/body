{
  LOG.debug("ishut {}",this);
  if (_channel.isOpen()) {
    if (_channel instanceof SocketChannel) {
      Socket socket=((SocketChannel)_channel).socket();
      try {
        if (!socket.isInputShutdown())         socket.shutdownInput();
      }
 catch (      SocketException e) {
        LOG.debug(e.toString());
        LOG.ignore(e);
        if (!socket.isClosed())         socket.close();
      }
 finally {
        if (socket.isOutputShutdown() && !socket.isClosed())         close();
      }
    }
 else     close();
  }
}
