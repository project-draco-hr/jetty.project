{
  testRequestWithContinuationFrames(new Callable<ByteBufferPool.Lease>(){
    @Override public ByteBufferPool.Lease call() throws Exception {
      ByteBufferPool.Lease lease=new ByteBufferPool.Lease(byteBufferPool);
      generator.control(lease,new PrefaceFrame());
      MetaData.Request metaData=newRequest("GET",new HttpFields());
      generator.control(lease,new HeadersFrame(1,metaData,null,true));
      List<ByteBuffer> buffers=lease.getByteBuffers();
      ByteBuffer continuationFrameHeader=buffers.get(3);
      ByteBuffer duplicate=ByteBuffer.allocate(continuationFrameHeader.remaining());
      duplicate.put(continuationFrameHeader).flip();
      continuationFrameHeader.flip();
      continuationFrameHeader.put(0,(byte)0);
      continuationFrameHeader.putShort(1,(short)0);
      lease.insert(4,duplicate,false);
      return lease;
    }
  }
);
}
