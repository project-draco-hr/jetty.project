{
  while (true) {
    State state=_state.get();
switch (state) {
case PRODUCING:
case PRODUCING_PENDING:
      if (!_state.compareAndSet(state,State.IDLE))       continue;
    return true;
default :
  return false;
}
}
}
