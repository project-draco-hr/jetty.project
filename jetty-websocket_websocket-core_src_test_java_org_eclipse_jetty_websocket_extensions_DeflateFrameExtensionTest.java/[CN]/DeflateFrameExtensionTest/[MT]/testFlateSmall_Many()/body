{
  DeflateFrameExtension ext=new DeflateFrameExtension();
  ext.setBufferPool(new MappedByteBufferPool());
  ext.setPolicy(WebSocketPolicy.newServerPolicy());
  ExtensionConfig config=ExtensionConfig.parse("x-deflate-frame;minLength=8");
  ext.setConfig(config);
  List<String> quote=new ArrayList<>();
  quote.add("No amount of experimentation can ever prove me right;");
  quote.add("a single experiment can prove me wrong.");
  quote.add("-- Albert Einstein");
  for (  String expected : quote) {
    ByteBuffer orig=BufferUtil.toBuffer(expected,StringUtil.__UTF8_CHARSET);
    ByteBuffer compressed=ext.deflate(orig);
    ByteBuffer decompressed=ext.inflate(compressed);
    String actual=BufferUtil.toUTF8String(decompressed);
    Assert.assertEquals(expected,actual);
  }
}
