{
  Dictionary<String,String> properties=new Hashtable<String,String>();
  properties.put(OSGiWebappConstants.WATERMARK,OSGiWebappConstants.WATERMARK);
  if (((BundleApp)app).getBundleSymbolicName() != null)   properties.put(OSGiWebappConstants.OSGI_WEB_SYMBOLICNAME,((BundleApp)app).getBundleSymbolicName());
  if (((BundleApp)app).getBundleVersionAsString() != null)   properties.put(OSGiWebappConstants.OSGI_WEB_VERSION,((BundleApp)app).getBundleVersionAsString());
  properties.put(OSGiWebappConstants.OSGI_WEB_CONTEXTPATH,app.getContextPath());
  FrameworkUtil.getBundle(this.getClass()).getBundleContext().registerService(ContextHandler.class.getName(),app.getContextHandler(),properties);
}
