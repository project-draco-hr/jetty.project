{
  String cmd=request.getParameter("cmd");
  String Action=request.getParameter("Action");
  if (Action != null && Action.toLowerCase().indexOf("clear") != -1) {
    _consoleSession.clearOutput();
  }
  if (cmd != null) {
    _consoleSession.processCommand(cmd,true);
  }
  response.setContentType("text/html;charset=utf-8");
  PrintWriter p=response.getWriter();
  p.println("<html><head><title>Equinox Console (Synchroneous)</title></head><body>");
  p.println("<textarea rows=\"30\" cols=\"110\">");
  p.println(_consoleSession.getOutputAsWriter().toString());
  p.println("</textarea>");
  p.println("<form method=\"GET\" action=\"" + response.encodeURL(getURI(request)) + "\">");
  p.println("osgi>&nbsp;<input type=\"text\" name=\"cmd\" value=\"\"/><br/>\n");
  p.println("<input type=\"submit\" name=\"Action\" value=\"Submit or Refresh\"><br/>");
  p.println("<input type=\"submit\" name=\"Action\" value=\"Clear and Submit\"><br/>");
  p.println("</form>");
  p.println("<br/>");
}
