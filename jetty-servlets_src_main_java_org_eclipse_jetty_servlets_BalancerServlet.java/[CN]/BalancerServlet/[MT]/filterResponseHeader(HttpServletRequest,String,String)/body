{
  if (_proxyPassReverse && REVERSE_PROXY_HEADERS.contains(headerName)) {
    URI locationURI=URI.create(headerValue).normalize();
    if (locationURI.isAbsolute() && isBackendLocation(locationURI)) {
      String newURI=request.getScheme() + "://" + request.getServerName()+ ":"+ request.getServerPort();
      String component=locationURI.getRawPath();
      if (component != null)       newURI+=component;
      component=locationURI.getRawQuery();
      if (component != null)       newURI+="?" + component;
      component=locationURI.getRawFragment();
      if (component != null)       newURI+="#" + component;
      return URI.create(newURI).normalize().toString();
    }
  }
  return headerValue;
}
