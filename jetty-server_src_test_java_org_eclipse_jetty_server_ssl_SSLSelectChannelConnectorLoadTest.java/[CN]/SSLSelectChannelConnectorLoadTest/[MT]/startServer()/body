{
  String keystorePath=System.getProperty("basedir",".") + "/src/test/resources/keystore";
  SslContextFactory sslContextFactory=new SslContextFactory();
  sslContextFactory.setKeyStorePath(keystorePath);
  sslContextFactory.setKeyStorePassword("storepwd");
  sslContextFactory.setKeyManagerPassword("keypwd");
  sslContextFactory.setTrustStore(keystorePath);
  sslContextFactory.setTrustStorePassword("storepwd");
  server=new Server();
  connector=new SelectChannelConnector(server,sslContextFactory);
  server.addConnector(connector);
  server.setHandler(new EmptyHandler());
  server.start();
  KeyStore keystore=KeyStore.getInstance(KeyStore.getDefaultType());
  keystore.load(new FileInputStream(keystorePath),"storepwd".toCharArray());
  TrustManagerFactory trustManagerFactory=TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());
  trustManagerFactory.init(keystore);
  sslContext=SSLContext.getInstance("SSL");
  sslContext.init(null,trustManagerFactory.getTrustManagers(),null);
}
