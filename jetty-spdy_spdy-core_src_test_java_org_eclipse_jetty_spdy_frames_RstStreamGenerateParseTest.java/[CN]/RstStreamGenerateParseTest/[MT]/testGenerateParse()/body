{
  int streamId=13;
  int streamStatus=StreamStatus.UNSUPPORTED_VERSION.getCode(SPDY.V2);
  RstStreamFrame frame1=new RstStreamFrame(SPDY.V2,streamId,streamStatus);
  Generator generator=new Generator(new StandardByteBufferPool(),new StandardCompressionFactory().newCompressor());
  ByteBuffer buffer=generator.control(frame1);
  assertThat("buffer is not null",buffer,not(nullValue()));
  TestSPDYParserListener listener=new TestSPDYParserListener();
  Parser parser=new Parser(new StandardCompressionFactory().newDecompressor());
  parser.addListener(listener);
  parser.parse(buffer);
  ControlFrame frame2=listener.getControlFrame();
  assertThat("frame2 is not null",frame2,not(nullValue()));
  assertThat("frame2 is type RST_STREAM",ControlFrameType.RST_STREAM,equalTo(frame2.getType()));
  RstStreamFrame rstStream=(RstStreamFrame)frame2;
  assertThat("rstStream version is SPDY.V2",SPDY.V2,equalTo(rstStream.getVersion()));
  assertThat("rstStream id is equal to streamId",streamId,equalTo(rstStream.getStreamId()));
  assertThat("rstStream flags are 0",(byte)0,equalTo(rstStream.getFlags()));
  assertThat("stream status is equal to rstStream statuscode",streamStatus,is(rstStream.getStatusCode()));
}
