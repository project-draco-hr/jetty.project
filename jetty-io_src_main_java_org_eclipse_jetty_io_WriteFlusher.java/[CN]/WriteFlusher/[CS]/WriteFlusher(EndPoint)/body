{
  _state.set(idleState);
  _endp=endp;
  __stateTransitions.put(StateType.IDLE,new HashSet<StateType>());
  __stateTransitions.put(StateType.WRITING,new HashSet<StateType>());
  __stateTransitions.put(StateType.PENDING,new HashSet<StateType>());
  __stateTransitions.put(StateType.COMPLETING,new HashSet<StateType>());
  __stateTransitions.put(StateType.FAILED,new HashSet<StateType>());
  __stateTransitions.get(StateType.IDLE).add(StateType.WRITING);
  __stateTransitions.get(StateType.WRITING).add(StateType.IDLE);
  __stateTransitions.get(StateType.WRITING).add(StateType.PENDING);
  __stateTransitions.get(StateType.WRITING).add(StateType.FAILED);
  __stateTransitions.get(StateType.PENDING).add(StateType.IDLE);
  __stateTransitions.get(StateType.PENDING).add(StateType.COMPLETING);
  __stateTransitions.get(StateType.PENDING).add(StateType.FAILED);
  __stateTransitions.get(StateType.COMPLETING).add(StateType.IDLE);
  __stateTransitions.get(StateType.COMPLETING).add(StateType.PENDING);
  __stateTransitions.get(StateType.COMPLETING).add(StateType.FAILED);
  __stateTransitions.get(StateType.IDLE).add(StateType.IDLE);
}
