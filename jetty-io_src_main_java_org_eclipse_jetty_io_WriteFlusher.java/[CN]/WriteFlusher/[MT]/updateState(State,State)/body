{
  if (!isTransitionAllowed(previous,next))   throw new IllegalStateException();
  boolean updated=_state.compareAndSet(previous,next);
  LOG.debug("update {}:{}{}{}",this,previous,updated ? "-->" : "!->",next);
  return updated;
}
