{
  if (!isTransitionAllowed(previous,next))   throw new IllegalStateException();
  boolean updated=_state.compareAndSet(previous,next);
  LOG.debug("State update {} -> {} succeeded: {}",previous,next,updated);
  return updated;
}
