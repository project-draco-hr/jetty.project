{
  if (template == null)   throw new IllegalStateException("null template");
  if (isRunning() || template.isRunning())   throw new IllegalStateException("Running");
  _metadata=template.getMetaData();
  _configurations=new Configuration[]{new CloneConfiguration(template)};
  setAllowDuplicateFragmentNames(template.isAllowDuplicateFragmentNames());
  setAliases(template.isAliases());
  setBaseResource(template.getBaseResource());
  setClassLoader(template.getClassLoader());
  setContextPath(template.getContextPath());
  setCompactPath(template.isCompactPath());
  setDisplayName(template.getDisplayName());
  setLogger(template.getLogger());
  setMaxFormContentSize(template.getMaxFormContentSize());
  Enumeration<?> names=template.getAttributeNames();
  while (names.hasMoreElements()) {
    String name=(String)names.nextElement();
    Object val=template.getAttribute(name);
    if (!name.startsWith("javax.servlet."))     setAttribute(name,val);
  }
}
