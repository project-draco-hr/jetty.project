{
  TrackingSocket wsocket=new TrackingSocket();
  WebSocketClient client=factory.newWebSocketClient(wsocket);
  Future<UpgradeResponse> future=client.connect(server.getWsUri());
  final ServerConnection srvSock=server.accept();
  srvSock.upgrade();
  srvSock.write(WebSocketFrame.text("Hello World"));
  future.get(500,TimeUnit.MILLISECONDS);
  wsocket.assertMessage("Hello world");
}
