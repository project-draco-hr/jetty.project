{
  WebSocketClientFactory factory=new WebSocketClientFactory();
  WebSocketClient client=factory.newWebSocketClient();
  TrackingSocket wsocket=new TrackingSocket();
  URI wsUri=new URI("ws://127.0.0.1:" + server.getPort() + "/");
  Future<WebSocketConnection> future=client.connect(wsUri,wsocket);
  ServerConnection ssocket=server.accept();
  Assert.assertNotNull(ssocket);
  try {
    future.get(250,TimeUnit.MILLISECONDS);
    Assert.fail("Expected Timeout Exception");
  }
 catch (  TimeoutException e) {
    wsocket.assertNotOpened();
    wsocket.assertCloseCode(StatusCode.NO_CLOSE);
  }
}
