{
  WebSocketClientFactory factory=new WebSocketClientFactory();
  WebSocketClient client=factory.newWebSocketClient();
  TrackingSocket wsocket=new TrackingSocket();
  URI wsUri=new URI("ws://127.0.0.1:1");
  Future<WebSocketConnection> future=client.connect(wsUri,wsocket);
  Throwable error=null;
  try {
    future.get(1,TimeUnit.SECONDS);
    Assert.fail("Expected ExecutionException");
  }
 catch (  ExecutionException e) {
    error=e.getCause();
  }
  wsocket.assertNotOpened();
  wsocket.assertCloseCode(StatusCode.NO_CLOSE);
  Assert.assertTrue(error instanceof ConnectException);
}
