{
  Properties props=super.loadProperties(resource);
  if (resource.equals(resourceBase + LAUNCH_INI) && deployedInPlace) {
    String osgiInstall=props.getProperty(OSGI_INSTALL_AREA);
    if (osgiInstall == null) {
      props.put(OSGI_INSTALL_AREA,getPlatformDirectory().getAbsolutePath());
    }
    String osgiFramework=props.getProperty(OSGI_FRAMEWORK);
    File pluginsFolder=null;
    if (osgiFramework == null && getPlatformDirectory() != null) {
      File osgiFrameworkF=findOsgiFramework(getPlatformDirectory());
      pluginsFolder=osgiFrameworkF.getParentFile();
      props.put(OSGI_FRAMEWORK,osgiFrameworkF.getAbsoluteFile().getAbsolutePath());
    }
    String osgiFrameworkExtensions=props.getProperty(OSGI_FRAMEWORK_EXTENSIONS);
    if (osgiFrameworkExtensions == null) {
      osgiFrameworkExtensions="org.eclipse.equinox.servletbridge.extensionbundle";
    }
    File configIni=new File(getPlatformDirectory(),"configuration/config.ini");
    if (configIni.exists()) {
      Properties configIniProps=new Properties();
      InputStream configIniStream=null;
      try {
        configIniStream=new FileInputStream(configIni);
        configIniProps.load(configIniStream);
      }
 catch (      IOException ioe) {
      }
 finally {
        try {
          configIniStream.close();
        }
 catch (        IOException ioe2) {
        }
      }
      String confIniFrameworkExt=configIniProps.getProperty(OSGI_FRAMEWORK_EXTENSIONS);
      if (confIniFrameworkExt != null) {
        osgiFrameworkExtensions=osgiFrameworkExtensions + "," + confIniFrameworkExt;
      }
    }
    props.setProperty(OSGI_FRAMEWORK_EXTENSIONS,osgiFrameworkExtensions);
    __deployExtensionBundle(pluginsFolder);
    String jettyHome=System.getProperty("jetty.home");
    if (jettyHome == null) {
      jettyHome=getPlatformDirectory().getAbsolutePath();
      System.setProperty("jetty.home",jettyHome);
    }
 else {
      jettyHome=resolveSystemProperty(jettyHome);
    }
    String etcJettyXml=System.getProperty("jetty.etc.config.urls");
    if (etcJettyXml == null) {
      if (new File(jettyHome,"etc/jetty-osgi-nested.xml").exists()) {
        System.setProperty("jetty.etc.config.urls","etc/jetty-osgi-nested.xml");
      }
    }
    String logback=System.getProperty("logback.configurationFile");
    if (logback == null) {
      File etcLogback=new File(jettyHome,"etc/logback.xml");
      if (etcLogback.exists()) {
        System.setProperty("logback.configurationFile",etcLogback.getAbsolutePath());
      }
    }
    System.err.println("syserr: logback.configurationFile=" + System.getProperty("logback.configurationFile"));
    System.out.println("sysout: logback.configurationFile=" + System.getProperty("logback.configurationFile"));
  }
  return props;
}
