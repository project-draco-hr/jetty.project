{
  _tester=new ServletTester("/ctx");
  HttpURI uri=new HttpURI(_tester.createConnector(true));
  _host=uri.getHost();
  _port=uri.getPort();
  _tester.getContext().addServlet(TestServlet.class,"/*");
  _dosFilter=_tester.getContext().addFilter(filter,"/dos/*",EnumSet.of(DispatcherType.REQUEST,DispatcherType.ASYNC));
  _dosFilter.setInitParameter("maxRequestsPerSec","4");
  _dosFilter.setInitParameter("delayMs","200");
  _dosFilter.setInitParameter("throttledRequests","1");
  _dosFilter.setInitParameter("waitMs","10");
  _dosFilter.setInitParameter("throttleMs","4000");
  _dosFilter.setInitParameter("remotePort","false");
  _dosFilter.setInitParameter("insertHeaders","true");
  _timeoutFilter=_tester.getContext().addFilter(filter,"/timeout/*",EnumSet.of(DispatcherType.REQUEST,DispatcherType.ASYNC));
  _timeoutFilter.setInitParameter("maxRequestsPerSec","4");
  _timeoutFilter.setInitParameter("delayMs","200");
  _timeoutFilter.setInitParameter("throttledRequests","1");
  _timeoutFilter.setInitParameter("waitMs","10");
  _timeoutFilter.setInitParameter("throttleMs","4000");
  _timeoutFilter.setInitParameter("remotePort","false");
  _timeoutFilter.setInitParameter("insertHeaders","true");
  _timeoutFilter.setInitParameter("maxRequestMs",_requestMaxTime + "");
  _tester.start();
}
