{
  if ((statusCode <= 999) || (statusCode > 65535)) {
    throw new IllegalArgumentException("Status Codes must be in the range 1000 - 65535");
  }
  if ((reason != null) && (reason.length() > 123)) {
    throw new IllegalArgumentException("Reason must not exceed 123 characters.");
  }
  byte utf[]=null;
  int len=2;
  if (StringUtil.isNotBlank(reason)) {
    utf=reason.getBytes(StringUtil.__UTF8_CHARSET);
    len+=utf.length;
  }
  ByteBuffer payload=ByteBuffer.allocate(len);
  payload.putChar((char)statusCode);
  if (utf != null) {
    payload.put(utf,0,utf.length);
  }
  setPayload(payload);
}
