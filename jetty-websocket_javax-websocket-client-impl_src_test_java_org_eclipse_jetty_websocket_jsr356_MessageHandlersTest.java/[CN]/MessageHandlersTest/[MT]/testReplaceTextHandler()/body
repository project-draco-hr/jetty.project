{
  MessageHandlers mhs=new MessageHandlers(factory);
  MessageHandler oldText=new StringWholeHandler();
  mhs.add(oldText);
  mhs.add(new ByteArrayWholeHandler());
  mhs.remove(oldText);
  mhs.add(new LongMessageHandler());
  MessageHandlerWrapper wrapper=mhs.getWrapper(MessageType.BINARY);
  Assert.assertThat("Binary Handler",wrapper.getHandler(),instanceOf(ByteArrayWholeHandler.class));
  Assert.assertEquals("Message Class",wrapper.getMetadata().getMessageClass(),byte[].class);
  wrapper=mhs.getWrapper(MessageType.TEXT);
  Assert.assertThat("Text Handler",wrapper.getHandler(),instanceOf(LongMessageHandler.class));
  Assert.assertEquals("Message Class",wrapper.getMetadata().getMessageClass(),Long.class);
}
