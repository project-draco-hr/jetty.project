{
  if (isStopping() || isStopped())   return;
  Thread thread=Thread.currentThread();
  ClassLoader old_loader=thread.getContextClassLoader();
  ListIterator<?> itor=sessionIds.listIterator();
  try {
    while (itor.hasNext()) {
      String sessionId=(String)itor.next();
      if (LOG.isDebugEnabled())       LOG.debug("Expiring session id " + sessionId);
      Session session=(Session)_sessions.get(sessionId);
      if (session != null) {
        session.timeout();
        itor.remove();
      }
 else {
        if (LOG.isDebugEnabled())         LOG.debug("Unrecognized session id=" + sessionId);
      }
    }
  }
 catch (  ThreadDeath e) {
    throw e;
  }
catch (  Throwable t) {
    LOG.warn("Problem expiring sessions",t);
  }
 finally {
    thread.setContextClassLoader(old_loader);
  }
}
