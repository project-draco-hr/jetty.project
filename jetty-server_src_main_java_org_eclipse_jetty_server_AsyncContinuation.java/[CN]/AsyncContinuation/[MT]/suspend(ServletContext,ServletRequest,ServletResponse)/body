{
synchronized (this) {
    _resumed=false;
    _expired=false;
    if (_event == null || request != _event.getRequest() || response != _event.getResponse() || context != _event.getServletContext())     _event=new AsyncEventState(context,request,response);
 else {
      _event._dispatchContext=null;
      _event._path=null;
    }
switch (_state) {
case __DISPATCHED:
case __REDISPATCHED:
      _state=__ASYNCSTARTED;
    return;
case __IDLE:
  throw new IllegalStateException(this.getStatusString());
case __ASYNCSTARTED:
case __REDISPATCHING:
return;
case __COMPLETING:
case __ASYNCWAIT:
case __REDISPATCH:
case __COMPLETED:
throw new IllegalStateException(this.getStatusString());
default :
throw new IllegalStateException("" + _state);
}
}
}
