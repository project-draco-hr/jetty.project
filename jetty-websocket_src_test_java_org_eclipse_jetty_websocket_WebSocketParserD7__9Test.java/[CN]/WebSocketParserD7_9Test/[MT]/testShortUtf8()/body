{
  String string="Hell\uFF4f W\uFF4Frld";
  byte[] bytes=string.getBytes("UTF-8");
  _in.putUnmasked((byte)0x81);
  _in.putUnmasked((byte)(0x80 | bytes.length));
  _in.sendMask();
  _in.put(bytes);
  int progress=_parser.parseNext();
  assertEquals(bytes.length + 7,progress);
  assertEquals(string,_handler._data.get(0));
  assertEquals(0x8,_handler._flags);
  assertEquals(0x1,_handler._opcode);
  assertTrue(_parser.isBufferEmpty());
  assertTrue(_parser.getBuffer() == null);
}
