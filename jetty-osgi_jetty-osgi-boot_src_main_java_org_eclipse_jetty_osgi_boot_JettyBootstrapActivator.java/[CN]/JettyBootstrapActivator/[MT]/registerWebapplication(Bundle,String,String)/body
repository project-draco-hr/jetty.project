{
  checkBundleActivated();
  WebAppContext contextHandler=new WebAppContext();
  Dictionary<String,String> dic=new Hashtable<String,String>();
  dic.put(OSGiWebappConstants.SERVICE_PROP_WAR,webappFolderPath);
  dic.put(OSGiWebappConstants.SERVICE_PROP_CONTEXT_PATH,contextPath);
  String requireTldBundle=(String)contributor.getHeaders().get(OSGiWebappConstants.REQUIRE_TLD_BUNDLE);
  if (requireTldBundle != null) {
    dic.put(OSGiWebappConstants.SERVICE_PROP_REQUIRE_TLD_BUNDLE,requireTldBundle);
  }
  contributor.getBundleContext().registerService(ContextHandler.class.getName(),contextHandler,dic);
}
