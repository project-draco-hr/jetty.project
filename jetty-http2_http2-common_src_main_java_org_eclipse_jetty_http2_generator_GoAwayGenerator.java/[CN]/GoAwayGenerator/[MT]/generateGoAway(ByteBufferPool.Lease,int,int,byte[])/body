{
  if (lastStreamId < 0)   throw new IllegalArgumentException("Invalid last stream id: " + lastStreamId);
  int length=4 + 4 + (payload != null ? payload.length : 0);
  ByteBuffer header=generateHeader(lease,FrameType.GO_AWAY,length,Flag.NONE,0);
  header.putInt(lastStreamId);
  header.putInt(error);
  if (payload != null) {
    header.put(payload);
  }
  BufferUtil.flipToFlush(header,0);
  lease.append(header,true);
}
