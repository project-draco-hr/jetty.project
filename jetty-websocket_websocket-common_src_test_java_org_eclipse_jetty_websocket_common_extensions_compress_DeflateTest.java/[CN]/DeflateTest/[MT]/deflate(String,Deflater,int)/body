{
  byte uncompressed[]=Hex.asByteArray(inputHex);
  deflater.setInput(uncompressed,0,uncompressed.length);
  deflater.finish();
  ByteBuffer out=ByteBuffer.allocate(bufSize);
  byte buf[]=new byte[64];
  while (!deflater.finished()) {
    int len=deflater.deflate(buf,0,buf.length,flushMode);
    out.put(buf,0,len);
  }
  out.flip();
  return Hex.asHex(out);
}
