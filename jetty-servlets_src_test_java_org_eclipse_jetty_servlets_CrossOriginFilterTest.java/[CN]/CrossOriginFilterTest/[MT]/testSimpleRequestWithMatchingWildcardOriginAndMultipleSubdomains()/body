{
  FilterHolder filterHolder=new FilterHolder(new CrossOriginFilter());
  String origin="http://subdomain.subdomain.example.com";
  filterHolder.setInitParameter(CrossOriginFilter.ALLOWED_ORIGINS_PARAM,"http://*.example.com");
  tester.getContext().addFilter(filterHolder,"/*",FilterMapping.DEFAULT);
  CountDownLatch latch=new CountDownLatch(1);
  tester.getContext().addServlet(new ServletHolder(new ResourceServlet(latch)),"/*");
  String request="" + "GET / HTTP/1.1\r\n" + "Host: localhost\r\n"+ "Origin: " + origin + "\r\n"+ "\r\n";
  String response=tester.getResponses(request);
  Assert.assertTrue(response.contains("HTTP/1.1 200"));
  Assert.assertTrue(response.contains(CrossOriginFilter.ACCESS_CONTROL_ALLOW_ORIGIN_HEADER));
  Assert.assertTrue(response.contains(CrossOriginFilter.ACCESS_CONTROL_ALLOW_CREDENTIALS_HEADER));
  Assert.assertTrue(latch.await(1,TimeUnit.SECONDS));
}
