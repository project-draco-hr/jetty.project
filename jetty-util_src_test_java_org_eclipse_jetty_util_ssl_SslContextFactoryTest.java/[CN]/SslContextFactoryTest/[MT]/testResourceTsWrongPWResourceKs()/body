{
  Resource keystoreResource=Resource.newSystemResource("keystore");
  Resource truststoreResource=Resource.newSystemResource("keystore");
  cf.setKeyStoreResource(keystoreResource);
  cf.setTrustStoreResource(truststoreResource);
  cf.setKeyStorePassword("storepwd");
  cf.setKeyManagerPassword("keypwd");
  cf.setTrustStorePassword("wrong_storepwd");
  try {
    ((StdErrLog)Log.getLogger(AbstractLifeCycle.class)).setHideStacks(true);
    cf.start();
    Assert.fail();
  }
 catch (  IOException e) {
    Assert.assertThat(e.toString(),Matchers.containsString("java.io.IOException: Keystore was tampered with, or password was incorrect"));
  }
}
