{
  _connector=new ServerConnector(_server);
  _server.setConnectors(new Connector[]{_connector});
  _log=new ArrayList<>();
  RequestLog log=new Log();
  RequestLogHandler logHandler=new RequestLogHandler();
  logHandler.setRequestLog(log);
  _server.setHandler(logHandler);
  _expectedLogs=1;
  _expectedCode="200 ";
  ServletContextHandler context=new ServletContextHandler(ServletContextHandler.NO_SESSIONS);
  context.setContextPath("/ctx");
  logHandler.setHandler(context);
  _servletHandler=context.getServletHandler();
  ServletHolder holder=new ServletHolder(_servlet);
  holder.setAsyncSupported(true);
  _servletHandler.addServletWithMapping(holder,"/path/*");
  _server.start();
  _port=_connector.getLocalPort();
}
