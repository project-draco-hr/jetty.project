{
  _server=new Server();
  Scheduler _scheduler=new TimerScheduler();
  HttpConfiguration config=new HttpConfiguration();
  LocalConnector connector=new LocalConnector(_server,null,_scheduler,null,1,new HttpConnectionFactory(config));
  _server.addConnector(connector);
  _server.setHandler(new DumpHandler());
  _server.start();
  AbstractEndPoint endp=new ByteArrayEndPoint(_scheduler,5000);
  ByteBufferHttpInput input=new ByteBufferHttpInput();
  _channel=new HttpChannel<>(connector,new HttpConfiguration(),endp,new HttpTransport(){
    @Override public void send(    HttpGenerator.ResponseInfo info,    ByteBuffer content,    boolean lastContent) throws IOException {
      BlockingCallback cb=new BlockingCallback();
      send(info,content,lastContent,cb);
      cb.block();
    }
    @Override public void send(    ResponseInfo info,    ByteBuffer content,    boolean lastContent,    Callback callback){
      callback.succeeded();
    }
    @Override public void send(    ByteBuffer responseBodyContent,    boolean lastContent,    Callback callback){
      send(null,responseBodyContent,lastContent,callback);
    }
    @Override public void completed(){
    }
  }
,input);
}
