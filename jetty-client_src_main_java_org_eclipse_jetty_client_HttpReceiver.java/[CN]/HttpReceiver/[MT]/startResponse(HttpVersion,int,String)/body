{
  if (updateState(State.IDLE,State.RECEIVE)) {
    HttpExchange exchange=connection.getExchange();
    if (exchange != null) {
      HttpConversation conversation=exchange.getConversation();
      HttpResponse response=exchange.getResponse();
      parser.setHeadResponse(exchange.getRequest().getMethod() == HttpMethod.HEAD);
      response.version(version).status(status).reason(reason);
      HttpClient client=connection.getHttpClient();
      ProtocolHandler protocolHandler=client.findProtocolHandler(exchange.getRequest(),response);
      Response.Listener handlerListener=protocolHandler == null ? null : protocolHandler.getResponseListener();
      exchange.getConversation().setResponseListener(handlerListener);
      LOG.debug("Receiving {}",response);
      ResponseNotifier notifier=connection.getDestination().getResponseNotifier();
      notifier.notifyBegin(conversation.getResponseListeners(),response);
    }
  }
  return false;
}
