{
  super.onOpen();
  Map<Integer,Integer> settings=listener.onPreface(getSession());
  if (settings == null)   settings=Collections.emptyMap();
  PrefaceFrame prefaceFrame=new PrefaceFrame();
  SettingsFrame settingsFrame=new SettingsFrame(settings,false);
  int windowDelta=getInitialSessionWindow() - FlowControl.DEFAULT_WINDOW_SIZE;
  if (windowDelta > 0)   getSession().control(null,this,prefaceFrame,settingsFrame,new WindowUpdateFrame(0,windowDelta));
 else   getSession().control(null,this,prefaceFrame,settingsFrame);
}
