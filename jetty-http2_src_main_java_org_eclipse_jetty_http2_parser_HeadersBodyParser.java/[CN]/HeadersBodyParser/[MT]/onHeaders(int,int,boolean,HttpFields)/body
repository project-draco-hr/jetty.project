{
  PriorityFrame priorityFrame=null;
  if (hasFlag(Flag.PRIORITY)) {
    priorityFrame=new PriorityFrame(streamId,getStreamId(),weight,exclusive);
  }
  HeadersFrame frame=new HeadersFrame(getStreamId(),fields,priorityFrame,isEndStream());
  return notifyHeaders(frame);
}
