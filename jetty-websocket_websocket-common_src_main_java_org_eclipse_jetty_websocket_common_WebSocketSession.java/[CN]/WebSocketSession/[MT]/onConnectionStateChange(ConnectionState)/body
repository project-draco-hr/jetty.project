{
switch (state) {
case CLOSED:
    IOState ioState=this.connection.getIOState();
  CloseInfo close=ioState.getCloseInfo();
notifyClose(close.getStatusCode(),close.getReason());
for (SessionListener listener : sessionListeners) {
try {
  if (LOG.isDebugEnabled())   LOG.debug("{}.onSessionClosed()",listener.getClass().getSimpleName());
  listener.onSessionClosed(this);
}
 catch (Throwable t) {
  LOG.ignore(t);
}
}
break;
case CONNECTED:
for (SessionListener listener : sessionListeners) {
try {
if (LOG.isDebugEnabled()) LOG.debug("{}.onSessionOpen()",listener.getClass().getSimpleName());
listener.onSessionOpened(this);
}
 catch (Throwable t) {
LOG.ignore(t);
}
}
break;
}
}
