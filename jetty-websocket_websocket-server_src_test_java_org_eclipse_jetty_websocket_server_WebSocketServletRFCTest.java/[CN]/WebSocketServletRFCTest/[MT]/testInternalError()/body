{
  BlockheadClient client=new BlockheadClient(server.getServerUri());
  try {
    client.connect();
    client.sendStandardRequest();
    client.expectUpgradeResponse();
    client.write(WebSocketFrame.text("CRASH"));
    IncomingFramesCapture capture=client.readFrames(1,TimeUnit.MILLISECONDS,500);
    Frame cf=capture.getFrames().poll();
    CloseInfo close=new CloseInfo(cf);
    Assert.assertThat("Close Frame.status code",close.getStatusCode(),is(StatusCode.SERVER_ERROR));
  }
  finally {
    client.close();
  }
}
