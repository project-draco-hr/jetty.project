{
  BlockheadClient client=new BlockheadClient(server.getServerUri());
  try {
    client.connect();
    client.sendStandardRequest();
    client.expectUpgradeResponse();
    TextFrame frame=new TextFrame("Hello World");
    frame.setFin(true);
    client.write(frame);
    Queue<WebSocketFrame> frames=client.readFrames(1,TimeUnit.MILLISECONDS,500);
    TextFrame tf=(TextFrame)frames.remove();
    Assert.assertThat("Text Frame.status code",tf.getPayloadUTF8(),is("Hello World"));
  }
  finally {
    client.close();
  }
}
