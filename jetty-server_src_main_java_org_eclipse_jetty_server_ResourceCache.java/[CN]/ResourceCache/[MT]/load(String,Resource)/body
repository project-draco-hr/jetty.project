{
  Content content=null;
  if (resource == null || !resource.exists())   return null;
  if (!resource.isDirectory() && isCacheable(resource)) {
    content=new Content(pathInContext,resource);
    shrinkCache();
    Content added=_cache.putIfAbsent(pathInContext,content);
    if (added != null) {
      content.invalidate();
      content=added;
    }
    return content;
  }
  return new HttpContent.ResourceAsHttpContent(resource,_mimeTypes.getMimeByExtension(resource.toString()),getMaxCachedFileSize(),_etags);
}
