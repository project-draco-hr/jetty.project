{
  if (frame.getType().isControl() || !frame.isRsv1()) {
    nextIncomingFrame(frame);
    return;
  }
  ByteBuffer data=frame.getPayload();
  method.decompress().input(data);
  while (!method.decompress().isDone()) {
    ByteBuffer uncompressed=method.decompress().process();
    if (uncompressed == null) {
      continue;
    }
    WebSocketFrame out=new WebSocketFrame(frame).setPayload(uncompressed);
    if (!method.decompress().isDone()) {
      out.setFin(false);
    }
    out.setRsv1(false);
    nextIncomingFrame(out);
  }
  if (frame.isFin()) {
    method.decompress().end();
  }
}
