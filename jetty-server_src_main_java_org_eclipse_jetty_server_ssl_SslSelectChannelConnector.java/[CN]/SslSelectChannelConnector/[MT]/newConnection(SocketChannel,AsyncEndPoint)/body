{
  try {
    SSLEngine engine=createSSLEngine(channel);
    SslConnection connection=newSslConnection(endpoint,engine);
    Connection delegate=newPlainConnection(channel,connection.getSslEndPoint());
    connection.getSslEndPoint().setConnection(delegate);
    connection.setAllowRenegotiate(_sslContextFactory.isAllowRenegotiate());
    return connection;
  }
 catch (  IOException e) {
    throw new RuntimeIOException(e);
  }
}
