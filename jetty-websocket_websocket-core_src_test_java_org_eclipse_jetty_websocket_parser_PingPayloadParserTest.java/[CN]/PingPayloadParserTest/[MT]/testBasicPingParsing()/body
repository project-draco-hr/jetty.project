{
  ByteBuffer buf=ByteBuffer.allocate(16);
  BufferUtil.clearToFill(buf);
  buf.put(new byte[]{(byte)0x89,0x05,0x48,0x65,0x6c,0x6c,0x6f});
  BufferUtil.flipToFlush(buf,0);
  WebSocketPolicy policy=new WebSocketPolicy(WebSocketBehavior.SERVER);
  Parser parser=new Parser(policy);
  FrameParseCapture capture=new FrameParseCapture();
  parser.addListener(capture);
  parser.parse(buf);
  capture.assertNoErrors();
  capture.assertHasFrame(OpCode.PING,1);
  WebSocketFrame ping=capture.getFrames().get(0);
  Assert.assertThat("PingFrame.payload",ping.getPayloadAsUTF8(),is("Hello"));
}
