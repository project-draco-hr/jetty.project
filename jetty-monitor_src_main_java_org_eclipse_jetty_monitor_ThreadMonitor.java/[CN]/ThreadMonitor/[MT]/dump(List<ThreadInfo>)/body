{
  if (threads != null && threads.size() > 0) {
    for (    ThreadInfo info : threads) {
      StringBuffer msg=new StringBuffer();
      if (info.getLockOwnerId() < 0) {
        String state=info.isInNative() ? "IN_NATIVE" : info.getThreadState().toString();
        msg.append(String.format("Thread %s[id:%d,%s] is spinning",info.getThreadName(),info.getThreadId(),state));
      }
 else {
        msg.append(String.format("Thread %s[id:%d,%s]",info.getThreadName(),info.getThreadId(),info.getThreadState()));
        msg.append(String.format(" on %s owned by %s[id:%d]",info.getLockName(),info.getLockOwnerName(),info.getLockOwnerId()));
      }
      _logger.warn(new ThreadMonitorException(msg.toString(),info.getStackTrace()));
    }
  }
}
