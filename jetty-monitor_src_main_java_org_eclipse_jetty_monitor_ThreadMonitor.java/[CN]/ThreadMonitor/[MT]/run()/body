{
  long currTime=System.currentTimeMillis();
  long lastTime=currTime;
  long lastDumpTime=currTime;
  while (!_done) {
    currTime=System.currentTimeMillis();
    if (currTime < lastTime + _scanInterval) {
      try {
        Thread.sleep(50);
      }
 catch (      InterruptedException ex) {
        Log.ignore(ex);
      }
      continue;
    }
    List<ThreadInfo> threadInfo=new ArrayList<ThreadInfo>();
    findSpinningThreads(threadInfo);
    findDeadlockedThreads(threadInfo);
    lastTime=System.currentTimeMillis();
    if (threadInfo.size() > 0) {
      dump(threadInfo);
    }
    if (_dumpInterval > 0 && lastTime > lastDumpTime + _dumpInterval) {
      lastDumpTime=lastTime;
      dumpAll();
    }
  }
}
