{
  Class<?> websocketClass=websocket.getClass();
synchronized (cache) {
    JettyAnnotatedMetadata metadata=cache.get(websocketClass);
    if (metadata == null) {
      JettyAnnotatedScanner scanner=new JettyAnnotatedScanner();
      metadata=scanner.scan(websocketClass);
      cache.put(websocketClass,metadata);
    }
    return new JettyAnnotatedEventDriver(policy,websocket,metadata);
  }
}
