{
  _threadPool.setMaxThreads(_threadPool.getThreads() - _threadPool.getIdleThreads() + 10);
  Thread.sleep(1200);
  Assert.assertFalse(_lowResourcesMonitor.isLowOnResources());
  final CountDownLatch latch=new CountDownLatch(1);
  for (int i=0; i < 20; i++) {
    _threadPool.dispatch(new Runnable(){
      @Override public void run(){
        try {
          latch.await();
        }
 catch (        InterruptedException e) {
          e.printStackTrace();
        }
      }
    }
);
  }
  Thread.sleep(1200);
  Assert.assertTrue(_lowResourcesMonitor.isLowOnResources());
  latch.countDown();
  Thread.sleep(1200);
  System.err.println(_threadPool.dump());
  Assert.assertFalse(_lowResourcesMonitor.isLowOnResources());
}
