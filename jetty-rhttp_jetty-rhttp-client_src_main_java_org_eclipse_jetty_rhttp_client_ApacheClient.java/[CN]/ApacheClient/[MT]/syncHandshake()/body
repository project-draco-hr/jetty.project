{
  HttpPost handshake=new HttpPost(gatewayPath + "/" + urlEncode(getTargetId())+ "/handshake");
  HttpResponse response=httpClient.execute(handshake);
  int statusCode=response.getStatusLine().getStatusCode();
  HttpEntity entity=response.getEntity();
  if (entity != null)   entity.consumeContent();
  if (statusCode != HttpStatus.SC_OK)   throw new IOException("Handshake failed");
  getLogger().debug("Client {} handshake returned from gateway",getTargetId(),null);
}
