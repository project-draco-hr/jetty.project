{
  int headerPosition=header.getIndex();
  int headerLength=header.length();
  int bufferPosition=buffer.getIndex();
  int written=super.gatheringFlush(header,bbuf0,buffer,bbuf1);
  notifyOutgoing(header,headerPosition,written > headerLength ? headerLength : written);
  notifyOutgoing(buffer,bufferPosition,written > headerLength ? written - headerLength : 0);
  return written;
}
