{
  int headerPosition=header.position();
  int headerLength=header.remaining();
  int bufferPosition=buffer.position();
  int written=super.flush(header,buffer);
  notifyOutgoing(header,headerPosition,written > headerLength ? headerLength : written);
  notifyOutgoing(buffer,bufferPosition,written > headerLength ? written - headerLength : 0);
  return written;
}
