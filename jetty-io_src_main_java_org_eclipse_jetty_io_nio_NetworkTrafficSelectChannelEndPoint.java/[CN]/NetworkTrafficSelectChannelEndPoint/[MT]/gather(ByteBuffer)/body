{
  int written=0;
  for (  ByteBuffer b : buffers) {
    if (b.hasRemaining()) {
      int l=flush(b);
      if (l == 0)       break;
 else       written+=l;
    }
  }
  return written;
}
