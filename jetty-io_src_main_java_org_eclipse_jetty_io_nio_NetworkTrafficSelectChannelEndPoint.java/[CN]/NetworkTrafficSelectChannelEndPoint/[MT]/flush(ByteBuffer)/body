{
  int position=buffer.position();
  int written=super.flush(buffer);
  notifyOutgoing(buffer,position,written);
  return written;
}
