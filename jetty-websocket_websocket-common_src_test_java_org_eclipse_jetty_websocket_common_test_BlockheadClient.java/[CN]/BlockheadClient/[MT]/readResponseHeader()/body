{
  HttpResponse response=new HttpResponse();
  HttpResponseHeaderParser parser=new HttpResponseHeaderParser(response);
  ByteBuffer buf=BufferUtil.allocate(512);
  do {
    BufferUtil.flipToFill(buf);
    read(buf);
    BufferUtil.flipToFlush(buf,0);
  }
 while (parser.parse(buf) == null);
  remainingBuffer=response.getRemainingBuffer();
  return response;
}
