{
  Settings settings=new Settings();
  settings.put(new Settings.Setting(Settings.ID.UPLOAD_BANDWIDTH,1024 * 1024));
  settings.put(new Settings.Setting(Settings.ID.DOWNLOAD_BANDWIDTH,1024 * 1024));
  settings.put(new Settings.Setting(Settings.ID.CURRENT_CONGESTION_WINDOW,Settings.Flag.PERSISTED,1024));
  final SettingsInfo clientSettingsInfo=new SettingsInfo(settings);
  final CountDownLatch latch=new CountDownLatch(1);
  ServerSessionFrameListener serverSessionFrameListener=new ServerSessionFrameListener.Adapter(){
    @Override public void onSettings(    Session session,    SettingsInfo serverSettingsInfo){
      Assert.assertEquals(clientSettingsInfo.getFlags(),serverSettingsInfo.getFlags());
      Assert.assertEquals(clientSettingsInfo.getSettings(),serverSettingsInfo.getSettings());
      latch.countDown();
    }
  }
;
  Session session=startClient(startServer(serverSessionFrameListener),null);
  session.settings(clientSettingsInfo);
  Assert.assertTrue(latch.await(5,TimeUnit.SECONDS));
}
