{
  JettyPolicy ap=new JettyPolicy(Collections.singleton(getWorkingDirectory() + "/src/test/resources/global-all-permission.policy"),evaluator);
  ap.refresh();
  Policy.setPolicy(ap);
  System.setSecurityManager(new SecurityManager());
  try {
    File test3=new File("/tmp/foo/bar/do");
    test3.mkdirs();
    test3.delete();
    assertTrue("Under AllPermission we are allowed",true);
  }
 catch (  AccessControlException ace) {
    assertFalse("Exception was thrown which it shouldn't have been",true);
  }
  JettyPolicy ap2=new JettyPolicy(Collections.singleton(getWorkingDirectory() + "/src/test/resources/global-file-read-only-tmp-permission.policy"),evaluator);
  ap2.refresh();
  Policy.setPolicy(ap2);
  try {
    File test3=new File("/tmp/foo/bar/do");
    test3.mkdirs();
    assertFalse("We should be restricted and not get here.",true);
  }
 catch (  AccessControlException ace) {
    assertTrue("Exception was thrown as it should be.",true);
  }
  System.setSecurityManager(null);
  Policy.setPolicy(null);
}
