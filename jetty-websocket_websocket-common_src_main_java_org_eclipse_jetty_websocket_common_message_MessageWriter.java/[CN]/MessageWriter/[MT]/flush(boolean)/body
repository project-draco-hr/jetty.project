{
  ByteBuffer data=utf.getByteBuffer();
  frame.setPayload(data);
  frame.setFin(fin);
  try {
    outgoing.outgoingFrame(frame,blocker,OutgoingFrames.FlushMode.SEND);
    blocker.block();
    utf.clear();
    frameCount++;
    frame.setIsContinuation();
  }
 catch (  IOException e) {
    notifyFailure(e);
    throw e;
  }
}
