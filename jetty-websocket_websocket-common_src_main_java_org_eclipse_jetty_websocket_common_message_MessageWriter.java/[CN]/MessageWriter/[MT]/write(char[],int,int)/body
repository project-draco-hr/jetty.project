{
  LOG.debug("write(char[{}], {}, {})",cbuf.length,off,len);
  int left=len;
  int offset=off;
  while (left > 0) {
    LOG.debug("buffer: {}",BufferUtil.toDetailString(buffer));
    int space=utf.length();
    int size=Math.min(space,left);
    utf.append(cbuf,offset,size);
    left-=size;
    if (left > 0) {
      flush(false);
    }
    offset+=size;
  }
}
