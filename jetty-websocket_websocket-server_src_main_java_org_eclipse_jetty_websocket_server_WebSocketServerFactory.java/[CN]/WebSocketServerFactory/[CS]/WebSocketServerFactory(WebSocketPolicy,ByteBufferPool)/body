{
  this.basePolicy=policy;
  this.methodsCache=new EventMethodsCache();
  this.bufferPool=bufferPool;
  this.extensionRegistry=new WebSocketExtensionRegistry(basePolicy,bufferPool);
  this.creator=this;
  List<Integer> versions=new ArrayList<>();
  for (  int v : handshakes.keySet()) {
    versions.add(v);
  }
  Collections.sort(versions,Collections.reverseOrder());
  StringBuilder rv=new StringBuilder();
  for (  int v : versions) {
    if (rv.length() > 0) {
      rv.append(", ");
    }
    rv.append(v);
  }
  supportedVersions=rv.toString();
}
