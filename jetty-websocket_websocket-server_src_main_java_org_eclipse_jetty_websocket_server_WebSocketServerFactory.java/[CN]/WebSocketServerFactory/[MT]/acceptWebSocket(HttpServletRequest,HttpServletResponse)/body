{
  ServletWebSocketRequest sockreq=new ServletWebSocketRequest(request);
  ServletWebSocketResponse sockresp=new ServletWebSocketResponse(response);
  WebSocketCreator creator=getCreator();
  Object websocketPojo=creator.createWebSocket(sockreq,sockresp);
  if (sockresp.isCommitted()) {
    return false;
  }
  if (websocketPojo == null) {
    response.sendError(HttpServletResponse.SC_SERVICE_UNAVAILABLE);
    return false;
  }
  WebSocketPolicy objPolicy=this.basePolicy.clonePolicy();
  WebSocketEventDriver websocket=new WebSocketEventDriver(websocketPojo,methodsCache,objPolicy,bufferPool);
  return upgrade(sockreq,sockresp,websocket);
}
