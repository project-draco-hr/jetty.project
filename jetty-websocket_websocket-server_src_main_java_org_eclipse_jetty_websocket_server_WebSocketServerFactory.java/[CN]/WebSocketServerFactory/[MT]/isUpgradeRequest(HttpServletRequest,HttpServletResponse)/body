{
  String upgrade=request.getHeader("Upgrade");
  if (upgrade == null) {
    return false;
  }
  if (!"websocket".equalsIgnoreCase(upgrade)) {
    LOG.warn("Not a 'Upgrade: WebSocket' (was [Upgrade: " + upgrade + "])");
    return false;
  }
  if (!"HTTP/1.1".equals(request.getProtocol())) {
    LOG.warn("Not a 'HTTP/1.1' request (was [" + request.getProtocol() + "])");
    return false;
  }
  return true;
}
