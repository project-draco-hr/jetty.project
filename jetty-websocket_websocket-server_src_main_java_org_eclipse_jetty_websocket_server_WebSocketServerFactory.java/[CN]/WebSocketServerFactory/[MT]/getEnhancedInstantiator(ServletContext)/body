{
  if (enhancedInstantiator != null) {
    return enhancedInstantiator;
  }
  if (context == null) {
    LOG.debug("Using default EnhancedInstantiator (ServletContext is null)");
    return new EnhancedInstantiator();
  }
  enhancedInstantiator=(EnhancedInstantiator)context.getAttribute(EnhancedInstantiator.ATTR);
  if (enhancedInstantiator == null) {
    LOG.debug("Using default EnhancedInstantiator (ServletContext attribute is null)");
    enhancedInstantiator=new EnhancedInstantiator();
  }
  return enhancedInstantiator;
}
