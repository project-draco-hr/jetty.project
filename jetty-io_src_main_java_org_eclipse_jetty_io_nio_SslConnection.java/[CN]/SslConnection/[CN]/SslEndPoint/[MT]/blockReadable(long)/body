{
  long now=System.currentTimeMillis();
  long end=millisecs > 0 ? (now + millisecs) : Long.MAX_VALUE;
  while (now < end) {
    process(null,null);
synchronized (this) {
      if (_unwrapBuf != null && _unwrapBuf.hasContent())       break;
      if (_inbound != null && _inbound.hasContent())       break;
    }
    _endp.blockReadable(end - now);
    now=System.currentTimeMillis();
  }
  return now < end;
}
