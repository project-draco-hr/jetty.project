{
  long now=System.currentTimeMillis();
  long end=millisecs > 0 ? (now + millisecs) : Long.MAX_VALUE;
  while (now < end) {
    if (process(null,null))     break;
    _endp.blockReadable(end - now);
    now=System.currentTimeMillis();
  }
  return now < end;
}
