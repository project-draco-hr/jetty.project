{
  int size=buffer.remaining();
  process(buffer,null);
  int filled=buffer.remaining() - size;
  if (filled == 0 && isInputShutdown())   return -1;
  return filled;
}
