{
  int l=super.flush(header,buffer,trailer);
  if (l == 0 && (header != null && header.hasContent() || buffer != null && buffer.hasContent() || trailer != null && trailer.hasContent())) {
synchronized (this) {
      _writable=false;
      if (!_dispatched)       updateKey();
    }
  }
 else   if (l > 0) {
    _progressed=true;
    _writable=true;
  }
  return l;
}
