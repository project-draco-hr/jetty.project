{
  int l=super.flush(header,buffer);
  if (l == 0 && (header != null && header.remaining() > 0 || buffer != null && buffer.remaining() > 0)) {
synchronized (this) {
      if (_dispatched)       _writable=false;
    }
  }
 else   if (l > 0) {
    _writable=true;
    notIdle();
  }
  return l;
}
