{
synchronized (this) {
    long start=_selectSet.getNow();
    try {
      _writeBlocked=true;
      while (isOpen() && _writeBlocked) {
        try {
          updateKey();
          this.wait(timeoutMs);
          timeoutMs-=_selectSet.getNow() - start;
          if (_writeBlocked && timeoutMs <= 0)           return false;
        }
 catch (        InterruptedException e) {
          Log.warn(e);
        }
      }
    }
  finally {
      _writeBlocked=false;
      if (_idleTask.isScheduled())       scheduleIdle();
    }
  }
  return true;
}
