{
  boolean dispatched=true;
  try {
    while (dispatched) {
      try {
        _connection.handle();
      }
 catch (      UpgradeConnectionException e) {
        Log.debug(e.toString());
        Log.ignore(e);
        setConnection(e.getConnection());
        continue;
      }
catch (      ClosedChannelException e) {
        Log.ignore(e);
      }
catch (      EofException e) {
        Log.debug("EOF",e);
        try {
          close();
        }
 catch (        IOException e2) {
          Log.ignore(e2);
        }
      }
catch (      IOException e) {
        Log.warn(e.toString());
        Log.debug(e);
        try {
          close();
        }
 catch (        IOException e2) {
          Log.ignore(e2);
        }
      }
catch (      Throwable e) {
        Log.warn("handle failed",e);
        try {
          close();
        }
 catch (        IOException e2) {
          Log.ignore(e2);
        }
      }
      dispatched=!undispatch();
    }
  }
  finally {
    if (dispatched) {
      dispatched=!undispatch();
      while (dispatched) {
        Log.warn("SCEP.run() finally DISPATCHED");
        dispatched=!undispatch();
      }
    }
  }
}
