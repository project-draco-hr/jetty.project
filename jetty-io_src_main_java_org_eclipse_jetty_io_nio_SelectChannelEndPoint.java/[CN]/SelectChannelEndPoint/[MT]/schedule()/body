{
synchronized (this) {
    if (_key == null || !_key.isValid()) {
      _readBlocked=false;
      _writeBlocked=false;
      this.notifyAll();
      return;
    }
    if (_readBlocked || _writeBlocked) {
      if (_readBlocked && _key.isReadable())       _readBlocked=false;
      if (_writeBlocked && _key.isWritable())       _writeBlocked=false;
      this.notifyAll();
      _key.interestOps(0);
      if (_state < STATE_DISPATCHED)       updateKey();
      return;
    }
    if ((_key.readyOps() & SelectionKey.OP_WRITE) == SelectionKey.OP_WRITE && (_key.interestOps() & SelectionKey.OP_WRITE) == SelectionKey.OP_WRITE) {
      _interestOps=_key.interestOps() & ~SelectionKey.OP_WRITE;
      _key.interestOps(_interestOps);
      _writable=true;
    }
    if (_state >= STATE_DISPATCHED)     _key.interestOps(0);
 else {
      dispatch();
      if (_state >= STATE_DISPATCHED && !_selectSet.getManager().isDeferringInterestedOps0()) {
        _key.interestOps(0);
      }
    }
  }
}
