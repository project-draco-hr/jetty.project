{
  if (threadPool == null) {
    _threadPool=new QueuedThreadPool();
    addBean(_threadPool);
    _shutdownThreadPool=true;
  }
 else {
    _threadPool=threadPool;
    _shutdownThreadPool=false;
  }
  _buffers=new WebSocketBuffers(bufferSize);
  addBean(_buffers);
  _maskGen=maskGen;
  addBean(_maskGen);
  _selector=new WebSocketClientSelector();
  addBean(_selector);
  addBean(_sslContextFactory);
}
