{
  HttpExchange exchange=_exchange;
  if (exchange != null && !exchange.isDone()) {
switch (exchange.getStatus()) {
case HttpExchange.STATUS_CANCELLED:
case HttpExchange.STATUS_CANCELLING:
case HttpExchange.STATUS_COMPLETED:
case HttpExchange.STATUS_EXCEPTED:
case HttpExchange.STATUS_EXPIRED:
      break;
case HttpExchange.STATUS_PARSING_CONTENT:
    if (_endp.isInputShutdown() && _parser.isState(HttpParser.STATE_EOF_CONTENT))     break;
default :
  String exch=exchange.toString();
String reason=_endp.isOpen() ? (_endp.isInputShutdown() ? "half closed: " : "local close: ") : "closed: ";
exchange.setStatus(HttpExchange.STATUS_EXCEPTED);
exchange.getEventListener().onException(new EofException(reason + exch));
}
}
_endp.close();
}
