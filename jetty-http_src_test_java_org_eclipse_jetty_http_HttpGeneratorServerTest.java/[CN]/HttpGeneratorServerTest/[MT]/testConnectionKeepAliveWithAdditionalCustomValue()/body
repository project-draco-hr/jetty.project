{
  HttpGenerator generator=new HttpGenerator();
  HttpFields fields=new HttpFields();
  fields.put(HttpHeader.CONNECTION,HttpHeaderValue.KEEP_ALIVE);
  String customValue="test";
  fields.add(HttpHeader.CONNECTION,customValue);
  ResponseInfo info=new ResponseInfo(HttpVersion.HTTP_1_0,fields,-1,200,"OK",false);
  ByteBuffer header=BufferUtil.allocate(4096);
  HttpGenerator.Result result=generator.generateResponse(info,header,null,null,true);
  Assert.assertSame(HttpGenerator.Result.FLUSH,result);
  String headers=BufferUtil.toString(header);
  Assert.assertTrue(headers.contains(HttpHeaderValue.KEEP_ALIVE.asString()));
  Assert.assertTrue(headers.contains(customValue));
}
