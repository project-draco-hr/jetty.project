{
  Class<?> key=wrapper.getMetadata().getObjectType();
  if (decoderMap.containsKey(key)) {
    DecoderWrapper other=decoderMap.get(key);
    StringBuilder err=new StringBuilder();
    err.append("Encountered duplicate Decoder handling type <");
    err.append(MethodUtils.toString(key));
    err.append(">, ").append(wrapper.getMetadata().getDecoder().getName());
    err.append(" and ").append(other.getMetadata().getDecoder().getName());
    err.append(" both implement this type");
    throw new IllegalStateException(err.toString());
  }
  decoderMap.put(key,wrapper);
}
