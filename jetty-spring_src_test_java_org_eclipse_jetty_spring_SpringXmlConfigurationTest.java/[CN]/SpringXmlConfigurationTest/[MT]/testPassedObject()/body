{
  TestConfiguration.VALUE=77;
  URL url=SpringXmlConfigurationTest.class.getClassLoader().getResource(_configure);
  XmlConfiguration configuration=new XmlConfiguration(url);
  Map<String,String> properties=new HashMap<>();
  properties.put("test","xxx");
  TestConfiguration nested=new TestConfiguration();
  nested.setTestString0("nested");
  configuration.getIdMap().put("nested",nested);
  TestConfiguration tc=new TestConfiguration();
  tc.setTestString0("preconfig");
  tc.setTestInt0(42);
  configuration.getProperties().putAll(properties);
  tc=(TestConfiguration)configuration.configure(tc);
  Assert.assertEquals("preconfig",tc.getTestString0());
  Assert.assertEquals(42,tc.getTestInt0());
  Assert.assertEquals("SetValue",tc.getTestString1());
  Assert.assertEquals(1,tc.getTestInt1());
  Assert.assertEquals("nested",tc.getNested().getTestString0());
  Assert.assertEquals("nested",tc.getNested().getTestString1());
  Assert.assertEquals("default",tc.getNested().getNested().getTestString0());
  Assert.assertEquals("deep",tc.getNested().getNested().getTestString1());
  Assert.assertEquals("deep",((TestConfiguration)configuration.getIdMap().get("nestedDeep")).getTestString1());
  Assert.assertEquals(2,((TestConfiguration)configuration.getIdMap().get("nestedDeep")).getTestInt2());
  Assert.assertEquals("xxx",tc.getTestString2());
}
