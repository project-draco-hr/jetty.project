{
  _endp=endpoint;
  _timestamp=timestamp;
  _websocket=websocket;
  _generator=new WebSocketGenerator(buffers,_endp);
  _parser=new WebSocketParser(buffers,endpoint,new WebSocketParser.EventHandler(){
    public void onFrame(    byte frame,    String data){
      try {
        _websocket.onMessage(frame,data);
      }
 catch (      ThreadDeath th) {
        throw th;
      }
catch (      Throwable th) {
        Log.warn(th);
      }
    }
    public void onFrame(    byte frame,    Buffer buffer){
      try {
        byte[] array=buffer.array();
        _websocket.onMessage(frame,array,buffer.getIndex(),buffer.length());
      }
 catch (      ThreadDeath th) {
        throw th;
      }
catch (      Throwable th) {
        Log.warn(th);
      }
    }
  }
);
  _idle=(_endp instanceof SelectChannelEndPoint) ? new IdleCheck(){
    public void access(    EndPoint endp){
      ((SelectChannelEndPoint)_endp).scheduleIdle();
    }
  }
 : new IdleCheck(){
    public void access(    EndPoint endp){
    }
  }
;
}
