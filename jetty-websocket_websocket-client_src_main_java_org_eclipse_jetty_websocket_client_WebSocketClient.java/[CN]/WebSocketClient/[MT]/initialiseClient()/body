{
  ShutdownThread.register(this);
  if (executor == null) {
    QueuedThreadPool threadPool=new QueuedThreadPool();
    String name=WebSocketClient.class.getSimpleName() + "@" + hashCode();
    threadPool.setName(name);
    executor=threadPool;
    addBean(executor,true);
  }
 else {
    addBean(executor,false);
  }
  if (connectionManager != null) {
    return;
  }
  try {
    connectionManager=newConnectionManager();
    addBean(connectionManager);
    connectionManager.start();
  }
 catch (  IOException e) {
    throw e;
  }
catch (  Exception e) {
    throw new IOException(e);
  }
}
