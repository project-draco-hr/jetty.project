{
  try {
    for (    SelectionKey key : _selector.keys()) {
      Object attachment=key.attachment();
      if (attachment instanceof EndPoint) {
        EndPointCloser closer=new EndPointCloser((EndPoint)attachment);
        execute(closer);
        closer.await(getStopTimeout());
      }
    }
    closeNoExceptions(_selector);
  }
  finally {
    latch.countDown();
  }
}
