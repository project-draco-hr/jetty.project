{
  if (failed.compareAndSet(false,true)) {
    timeout.cancel();
    close();
    connectionFailed(channel,failure,attachment);
  }
}
