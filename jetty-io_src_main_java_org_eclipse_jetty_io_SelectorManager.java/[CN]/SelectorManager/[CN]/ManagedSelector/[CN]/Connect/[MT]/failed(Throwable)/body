{
  if (failed.compareAndSet(false,true)) {
    timeout.cancel();
    closeNoExceptions(channel);
    connectionFailed(channel,failure,attachment);
  }
}
