{
  int submissions=_submissions.get();
  if (Thread.currentThread() != _thread || submissions >= 4) {
    _changes.offer(change);
    LOG.debug("Queued change {}",change);
    boolean wakeup=_needsWakeup;
    if (wakeup)     wakeup();
    return false;
  }
 else {
    _submissions.set(submissions + 1);
    try {
      LOG.debug("Submitted change {}",change);
      runChanges();
      runChange(change);
      return true;
    }
  finally {
      _submissions.set(submissions);
    }
  }
}
