{
  SocketChannel channel=(SocketChannel)key.channel();
  try {
    key.attach(connect.attachment);
    boolean connected=finishConnect(channel);
    if (connected) {
      connect.timeout.cancel();
      key.interestOps(0);
      EndPoint endpoint=createEndPoint(channel,key);
      key.attach(endpoint);
    }
 else {
      throw new ConnectException();
    }
  }
 catch (  Throwable x) {
    connect.failed(x);
  }
}
