{
  long timeout=1000;
  start(new TimeoutHandler(2 * timeout));
  final CountDownLatch latch=new CountDownLatch(1);
  Destination destination=client.getDestination(scheme,"localhost",connector.getLocalPort());
  try (Connection connection=destination.newConnection().get(5,TimeUnit.SECONDS)){
    Request request=client.newRequest("localhost",connector.getLocalPort()).scheme(scheme);
    connection.send(request,new TimedResponseListener(timeout,TimeUnit.MILLISECONDS,request){
      @Override public void onComplete(      Result result){
        Assert.assertTrue(result.isFailed());
        latch.countDown();
      }
    }
);
    Assert.assertTrue(latch.await(3 * timeout,TimeUnit.MILLISECONDS));
  }
 }
