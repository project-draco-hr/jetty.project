{
  if (_in == null)   return 0;
  int space=buffer.space();
  if (space <= 0) {
    if (buffer.hasContent())     return 0;
    throw new IOException("FULL");
  }
  try {
    int read=buffer.readFrom(_in,space);
    if (read < 0 && isOpen()) {
      if (!isInputShutdown())       shutdownInput();
 else       if (isOutputShutdown())       close();
    }
    return read;
  }
 catch (  SocketTimeoutException e) {
    idleExpired();
    return -1;
  }
}
