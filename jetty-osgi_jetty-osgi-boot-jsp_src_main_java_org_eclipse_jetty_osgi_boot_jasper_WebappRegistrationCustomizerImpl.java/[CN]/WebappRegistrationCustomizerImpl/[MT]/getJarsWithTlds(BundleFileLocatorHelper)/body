{
  Bundle jasperBundler=FrameworkUtil.getBundle(TldLocationsCache.class);
  File jasperLocation=locatorHelper.getBundleInstallLocation(jasperBundler);
  if (jasperLocation.isDirectory()) {
    ArrayList<URL> urls=new ArrayList<URL>();
    for (    File f : jasperLocation.listFiles()) {
      if (f.getName().endsWith(".jar") && f.isFile()) {
        urls.add(f.toURI().toURL());
      }
 else       if (f.isDirectory() && f.getName().equals("lib")) {
        for (        File f2 : jasperLocation.listFiles()) {
          if (f2.getName().endsWith(".jar") && f2.isFile()) {
            urls.add(f2.toURI().toURL());
          }
        }
      }
    }
    return urls.toArray(new URL[urls.size()]);
  }
 else {
    return new URL[]{jasperLocation.toURI().toURL()};
  }
}
