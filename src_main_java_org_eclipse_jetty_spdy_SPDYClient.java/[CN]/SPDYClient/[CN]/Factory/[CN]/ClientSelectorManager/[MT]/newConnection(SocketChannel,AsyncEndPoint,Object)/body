{
  SessionFuture sessionFuture=(SessionFuture)attachment;
  SPDYClient client=sessionFuture.client;
  CompressionFactory compressionFactory=client.newCompressionFactory();
  Parser parser=client.newParser(compressionFactory.newDecompressor());
  Generator generator=client.newGenerator(compressionFactory.newCompressor());
  AsyncSPDYConnection connection=new AsyncSPDYConnection(endPoint,parser);
  Session session=client.newSession(connection,sessionFuture.listener,parser,generator);
  sessionFuture.connected(session);
  return connection;
}
