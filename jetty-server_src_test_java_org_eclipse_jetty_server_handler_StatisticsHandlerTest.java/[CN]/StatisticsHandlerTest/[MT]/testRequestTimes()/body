{
  final long sleep=1000;
  _statsHandler.setHandler(new AbstractHandler(){
    public void handle(    String path,    Request request,    HttpServletRequest httpRequest,    HttpServletResponse httpResponse) throws IOException, ServletException {
      request.setHandled(true);
      try {
        Thread.sleep(sleep);
      }
 catch (      InterruptedException x) {
        Thread.currentThread().interrupt();
        throw (IOException)new IOException().initCause(x);
      }
    }
  }
);
  _server.start();
  String request="GET / HTTP/1.1\r\n" + "Host: localhost\r\n" + "\r\n";
  _connector.getResponses(request);
  assertEquals(1,_statsHandler.getRequests());
  assertEquals(1,_statsHandler.getResponses2xx());
  assertTrue(sleep <= _statsHandler.getRequestTimeMin());
  assertEquals(_statsHandler.getRequestTimeMin(),_statsHandler.getRequestTimeMax());
  assertEquals(_statsHandler.getRequestTimeMin(),_statsHandler.getRequestTimeTotal());
  assertEquals(_statsHandler.getRequestTimeMin(),_statsHandler.getRequestTimeAverage());
  _connector.getResponses(request);
  assertEquals(2,_statsHandler.getRequests());
  assertEquals(2,_statsHandler.getResponses2xx());
  assertTrue(sleep <= _statsHandler.getRequestTimeMin());
  assertTrue(sleep <= _statsHandler.getRequestTimeAverage());
  assertTrue(_statsHandler.getRequestTimeTotal() >= 2 * sleep);
}
