{
synchronized (_factories) {
    ConnectionFactory old=_factories.remove(factory.getProtocol());
    if (old != null)     removeBean(old);
    _factories.put(factory.getProtocol().toLowerCase(),factory);
    addBean(factory);
    if (_defaultProtocol == null)     _defaultProtocol=factory.getProtocol();
  }
}
