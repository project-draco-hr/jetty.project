{
  File jettyhome=resolveJettyHome(jettyHomePath);
  if (jettyhome == null) {
    throw new IllegalArgumentException("Unable to resolve jettyhome " + jettyHomePath);
  }
  if (!jettyhome.exists()) {
    installDefaultJettyHome(jettyhome);
  }
 else   if (doNothingIfJettyHomeExists) {
    return;
  }
  File jettyXmlFile=new File(jettyhome,"etc/jetty.xml");
  if (!jettyXmlFile.exists()) {
    throw new IllegalArgumentException("The jetty configuration file must exist: '" + jettyXmlFile.getAbsolutePath());
  }
  if (jettyXml != null) {
    FileOutputStream out=null;
    try {
      out=new FileOutputStream(jettyXmlFile);
      OutputStreamWriter writer=new OutputStreamWriter(out,"UTF-8");
      writer.append(jettyXml);
    }
  finally {
      if (out != null)       try {
        out.close();
      }
 catch (      IOException ioee) {
      }
    }
  }
}
