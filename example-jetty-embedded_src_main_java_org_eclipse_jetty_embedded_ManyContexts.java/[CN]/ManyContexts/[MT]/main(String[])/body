{
  Server server=new Server();
  SelectChannelConnector connector=new SelectChannelConnector();
  connector.setPort(8080);
  server.setConnectors(new Connector[]{connector});
  ContextHandler context0=new ContextHandler();
  context0.setContextPath("/");
  Handler handler0=new HelloHandler("Root Context",BODY);
  context0.setHandler(handler0);
  ContextHandler context1=new ContextHandler();
  context1.setContextPath("/context");
  Handler handler1=new HelloHandler("A Context",BODY);
  context1.setHandler(handler1);
  ContextHandler context2=new ContextHandler();
  context2.setContextPath("/context");
  context2.setVirtualHosts(new String[]{"127.0.0.2"});
  Handler handler2=new HelloHandler("A Virtual Context",BODY);
  context2.setHandler(handler2);
  ContextHandlerCollection contexts=new ContextHandlerCollection();
  contexts.setHandlers(new Handler[]{context0,context1,context2});
  server.setHandler(contexts);
  server.start();
  System.err.println(server.dump());
  server.join();
}
