{
  if (isStarted())   throw new IllegalStateException("Started");
  _constraintMappings.clear();
  _constraintMappings.addAll(constraintMappings);
  if (roles == null) {
    roles=new HashSet<String>();
    for (    ConstraintMapping cm : constraintMappings) {
      String[] cmr=cm.getConstraint().getRoles();
      if (cmr != null) {
        for (        String r : cmr)         if (!"*".equals(r))         roles.add(r);
      }
    }
  }
  setRoles(roles);
}
