{
  String protocol=client.selectProtocol(protocols);
  if (protocol == null)   return null;
  AsyncEndPoint endPoint=getEndPoint();
  AsyncConnection connection=client.getAsyncConnectionFactory(protocol).newAsyncConnection(channel,endPoint,attachment);
  client.replaceAsyncConnection(endPoint,connection);
  completed=true;
  return protocol;
}
