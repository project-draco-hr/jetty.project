{
  URL url=null;
  boolean tried_parent=false;
  String tmp=name;
  if (tmp != null && tmp.endsWith(".class"))   tmp=tmp.substring(0,tmp.length() - 6);
  boolean system_class=_context.isSystemClass(tmp);
  boolean server_class=_context.isServerClass(tmp);
  if (system_class && server_class)   return null;
  if (_parent != null && (_context.isParentLoaderPriority() || system_class) && !server_class) {
    tried_parent=true;
    if (_parent != null)     url=_parent.getResource(name);
  }
  if (url == null) {
    url=this.findResource(name);
    if (url == null && name.startsWith("/")) {
      if (LOG.isDebugEnabled())       LOG.debug("HACK leading / off " + name);
      url=this.findResource(name.substring(1));
    }
  }
  if (url == null && !tried_parent && !server_class) {
    if (_parent != null)     url=_parent.getResource(name);
  }
  if (url != null)   if (LOG.isDebugEnabled())   LOG.debug("getResource(" + name + ")="+ url);
  return url;
}
