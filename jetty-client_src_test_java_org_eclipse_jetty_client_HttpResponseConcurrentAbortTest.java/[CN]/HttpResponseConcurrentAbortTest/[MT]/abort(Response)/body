{
  new Thread("abort"){
    @Override public void run(){
      response.abort(new Exception());
    }
  }
.start();
  try {
    boolean latched=failureLatch.await(4,TimeUnit.SECONDS);
    success.set(latched);
    latched=completeLatch.await(1,TimeUnit.SECONDS);
    success.set(!latched);
    callbackLatch.countDown();
  }
 catch (  InterruptedException x) {
    throw new RuntimeException(x);
  }
}
