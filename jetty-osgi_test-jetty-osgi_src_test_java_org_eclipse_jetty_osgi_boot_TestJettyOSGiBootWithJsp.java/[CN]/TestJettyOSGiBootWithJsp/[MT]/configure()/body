{
  File testrealm=new File("src/test/config/etc/jetty-testrealm.xml");
  ArrayList<Option> options=new ArrayList<Option>();
  options.addAll(TestJettyOSGiBootCore.provisionCoreJetty());
  options.addAll(Arrays.asList(options(PaxRunnerOptions.vmOption("-D" + OSGiServerConstants.MANAGED_JETTY_XML_CONFIG_URLS + "=etc/jetty.xml;"+ testrealm.getAbsolutePath()),mavenBundle().groupId("org.eclipse.jetty.osgi").artifactId("jetty-osgi-boot").versionAsInProject(),mavenBundle().groupId("org.eclipse.jetty.osgi").artifactId("jetty-osgi-boot-jsp").versionAsInProject(),mavenBundle().groupId("org.eclipse.jetty").artifactId("jetty-websocket").versionAsInProject(),mavenBundle().groupId("org.eclipse.jetty").artifactId("jetty-servlets").versionAsInProject(),mavenBundle().groupId("org.eclipse.jetty").artifactId("test-jetty-webapp").classifier("webbundle").versionAsInProject(),mavenBundle().groupId("commons-codec").artifactId("commons-codec").versionAsInProject(),CoreOptions.provision(PaxRunnerOptions.scanDir("target/distribution/lib/jsp")))));
  return options.toArray(new Option[options.size()]);
}
