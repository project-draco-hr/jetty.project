{
  if (isBufferingOutput()) {
    int flushed=super.flush(_outNIOBuffer);
    if (_debug)     __log.debug(_session + " Flushed " + flushed+ " left="+ _outNIOBuffer.length());
  }
 else   if (_closing) {
    if (_engine.isOutboundDone()) {
      if (_debug)       __log.debug(_session + " close");
      super.close();
    }
 else {
      if (_debug)       __log.debug(_session + " closeOutbound");
      _engine.closeOutbound();
    }
  }
}
