{
  super.setRequestURI(uri);
  Map<String,String[]> pmap=new HashMap<>();
  String query=uri.getQuery();
  if (StringUtil.isNotBlank(query)) {
    MultiMap<String> params=new MultiMap<String>();
    UrlEncoded.decodeTo(uri.getQuery(),params,StandardCharsets.UTF_8,MAX_KEYS);
    for (    String key : params.keySet()) {
      List<String> values=params.getValues(key);
      if (values == null) {
        pmap.put(key,new String[0]);
      }
 else {
        int len=values.size();
        pmap.put(key,values.toArray(new String[len]));
      }
    }
    super.setParameterMap(pmap);
  }
}
