{
switch (transport) {
case HTTP:
    return new HttpConnectionFactory(new HttpConfiguration());
case HTTP2:
  return new HTTP2ServerConnectionFactory(new HttpConfiguration());
default :
throw new IllegalArgumentException();
}
}
