{
  if (!response.isCommitted()) {
    response.setHeader("Connection","close");
  }
  try {
    try {
      response.getWriter().close();
    }
 catch (    IllegalStateException e) {
      response.getOutputStream().close();
    }
  }
 catch (  IOException e) {
    LOG.warn(e);
  }
  thread.interrupt();
}
