{
  String host="wikipedia.org";
  int port=80;
  try {
    new Socket(host,port);
  }
 catch (  IOException x) {
    Assume.assumeNoException(x);
  }
  final CountDownLatch latch1=new CountDownLatch(1);
  client.newRequest(host,port).send(new Response.CompleteListener(){
    @Override public void onComplete(    Result result){
      if (!result.isFailed() && result.getResponse().getStatus() == 200)       latch1.countDown();
    }
  }
);
  Assert.assertTrue(latch1.await(10,TimeUnit.SECONDS));
  final CountDownLatch latch2=new CountDownLatch(1);
  client.newRequest("http://" + host).send(new Response.CompleteListener(){
    @Override public void onComplete(    Result result){
      Assert.assertTrue(result.isSucceeded());
      Assert.assertEquals(200,result.getResponse().getStatus());
      URI uri=result.getRequest().getURI();
      Assert.assertTrue(uri.getPort() > 0);
      latch2.countDown();
    }
  }
);
  Assert.assertTrue(latch2.await(10,TimeUnit.SECONDS));
}
