{
  StdErrLog log=new StdErrLog(StdErrLogTest.class.getName());
  log.setHideStacks(true);
  ByteArrayOutputStream test=new ByteArrayOutputStream();
  PrintStream err=new PrintStream(test);
  log.setStdErrStream(err);
  log.info("I will not buy");
  log.setLevel(StdErrLog.LEVEL_DEBUG);
  log.info("this record");
  log.setLevel(StdErrLog.LEVEL_ALL);
  log.info("it is scratched.");
  log.setLevel(StdErrLog.LEVEL_WARN);
  log.info("sorry?");
  String output=new String(test.toByteArray(),"UTF-8");
  System.err.print(output);
  Assert.assertThat(output,containsString("I will not buy"));
  Assert.assertThat(output,containsString("this record"));
  Assert.assertThat(output,containsString("it is scratched."));
  Assert.assertThat(output,not(containsString("sorry?")));
}
