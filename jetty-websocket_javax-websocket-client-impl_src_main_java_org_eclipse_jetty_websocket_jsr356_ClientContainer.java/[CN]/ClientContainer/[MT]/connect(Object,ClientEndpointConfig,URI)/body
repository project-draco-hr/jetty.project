{
  ClientEndpointConfig cec=config;
  if (cec == null) {
    cec=ClientEndpointConfig.Builder.create().build();
  }
  ConfiguredEndpoint endpoint=new ConfiguredEndpoint(websocket,cec);
  ClientUpgradeRequest req=new ClientUpgradeRequest();
  UpgradeListener upgradeListener=null;
  if (cec != null) {
    for (    Extension ext : cec.getExtensions()) {
      req.addExtensions(new JsrExtensionConfig(ext));
    }
    if (cec.getPreferredSubprotocols().size() > 0) {
      req.setSubProtocols(config.getPreferredSubprotocols());
    }
    if (cec.getConfigurator() != null) {
      upgradeListener=new JsrUpgradeListener(cec.getConfigurator());
    }
  }
  Future<org.eclipse.jetty.websocket.api.Session> futSess=client.connect(endpoint,path,req,upgradeListener);
  try {
    return (JsrSession)futSess.get();
  }
 catch (  InterruptedException|ExecutionException e) {
    throw new IOException("Connect failure",e);
  }
}
