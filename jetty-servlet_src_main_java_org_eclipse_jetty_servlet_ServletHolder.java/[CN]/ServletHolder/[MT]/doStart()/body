{
  _unavailable=0;
  if (!_enabled)   return;
  try {
    super.doStart();
  }
 catch (  UnavailableException ue) {
    makeUnavailable(ue);
    throw ue;
  }
  try {
    checkServletType();
  }
 catch (  UnavailableException ue) {
    makeUnavailable(ue);
    if (!_servletHandler.isStartWithUnavailable())     throw ue;
  }
  _identityService=_servletHandler.getIdentityService();
  if (_identityService != null && _runAsRole != null)   _runAsToken=_identityService.newRunAsToken(_runAsRole);
  _config=new Config();
  if (_class != null && javax.servlet.SingleThreadModel.class.isAssignableFrom(_class))   _servlet=new SingleThreadedWrapper();
  if (_extInstance || _initOnStartup) {
    try {
      initServlet();
    }
 catch (    Exception e) {
      if (_servletHandler.isStartWithUnavailable())       LOG.ignore(e);
 else       throw e;
    }
  }
}
