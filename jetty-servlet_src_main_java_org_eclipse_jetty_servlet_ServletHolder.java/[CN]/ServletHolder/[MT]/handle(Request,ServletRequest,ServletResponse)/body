{
  if (_class == null)   throw new UnavailableException("Servlet Not Initialized");
  Servlet servlet=ensureInstance();
  boolean servlet_error=true;
  Object old_run_as=null;
  boolean suspendable=baseRequest.isAsyncSupported();
  try {
    if (_forcedPath != null)     adaptForcedPathToJspContainer(request);
    if (_identityService != null)     old_run_as=_identityService.setRunAs(baseRequest.getResolvedUserIdentity(),_runAsToken);
    if (!isAsyncSupported())     baseRequest.setAsyncSupported(false);
    servlet.service(request,response);
    servlet_error=false;
  }
 catch (  UnavailableException e) {
    makeUnavailable(e);
    throw _unavailableEx;
  }
 finally {
    baseRequest.setAsyncSupported(suspendable);
    if (_identityService != null)     _identityService.unsetRunAs(old_run_as);
    if (servlet_error)     request.setAttribute(RequestDispatcher.ERROR_SERVLET_NAME,getName());
  }
}
