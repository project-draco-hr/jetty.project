{
  if (!result.isFailed()) {
    List<WWWAuthenticate> wwwAuthenticates=parseWWWAuthenticate(result.getResponse());
    if (wwwAuthenticates.isEmpty()) {
    }
 else {
      Request request=result.getRequest();
      final String uri=request.uri();
      Authentication authentication=null;
      for (      WWWAuthenticate wwwAuthenticate : wwwAuthenticates) {
        authentication=client.getAuthenticationStore().findAuthentication(wwwAuthenticate.type,uri,wwwAuthenticate.realm);
        if (authentication != null)         break;
      }
      if (authentication != null) {
        final Authentication authn=authentication;
        authn.authenticate(request);
        request.send(new Adapter(){
          @Override public void onComplete(          Result result){
            if (!result.isFailed()) {
              Authentication.Result authnResult=new Authentication.Result(uri,authn);
              client.getAuthenticationStore().addAuthenticationResult(authnResult);
            }
          }
        }
);
      }
 else {
        noAuthentication(request,result.getResponse());
      }
    }
  }
}
