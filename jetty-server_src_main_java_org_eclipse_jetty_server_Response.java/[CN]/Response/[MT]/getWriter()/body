{
  if (_outputState == Output.STREAM)   throw new IllegalStateException("STREAM");
  if (_writer == null) {
    String encoding=_characterEncoding;
    if (encoding == null) {
      if (encoding == null)       encoding=StringUtil.__ISO_8859_1;
      setCharacterEncoding(encoding);
    }
    _writer=_connection.getPrintWriter(encoding);
  }
  _outputState=Output.WRITER;
  return _writer;
}
