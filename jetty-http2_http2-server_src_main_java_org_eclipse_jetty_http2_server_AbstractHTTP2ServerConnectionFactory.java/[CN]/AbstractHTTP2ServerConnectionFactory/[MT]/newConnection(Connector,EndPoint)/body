{
  Session.Listener listener=newSessionListener(connector,endPoint);
  Generator generator=new Generator(connector.getByteBufferPool(),getHeaderTableSize());
  HTTP2ServerSession session=new HTTP2ServerSession(endPoint,generator,listener,new HTTP2FlowControl(getInitialWindowSize()));
  Parser parser=new ServerParser(connector.getByteBufferPool(),session);
  HTTP2Connection connection=new HTTP2Connection(connector.getByteBufferPool(),connector.getExecutor(),endPoint,parser,getInputBufferSize());
  return configure(connection,connector,endPoint);
}
