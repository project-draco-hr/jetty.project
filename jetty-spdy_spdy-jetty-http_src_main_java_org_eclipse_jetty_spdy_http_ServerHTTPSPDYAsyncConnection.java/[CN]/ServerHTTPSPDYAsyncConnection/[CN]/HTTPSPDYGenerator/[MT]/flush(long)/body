{
  try {
    Buffer content=getContentBuffer();
    while (content != null) {
      DataInfo dataInfo=toDataInfo(content,closed);
      logger.debug("HTTP < {} bytes of content",dataInfo.length());
      stream.data(dataInfo).get(maxIdleTime,TimeUnit.MILLISECONDS);
      content.clear();
      _bypass=false;
      content=getContentBuffer();
    }
  }
 catch (  TimeoutException x) {
    stream.getSession().goAway();
    throw new EOFException("write timeout");
  }
catch (  InterruptedException x) {
    throw new InterruptedIOException();
  }
catch (  ExecutionException x) {
    throw new IOException(x.getCause());
  }
}
