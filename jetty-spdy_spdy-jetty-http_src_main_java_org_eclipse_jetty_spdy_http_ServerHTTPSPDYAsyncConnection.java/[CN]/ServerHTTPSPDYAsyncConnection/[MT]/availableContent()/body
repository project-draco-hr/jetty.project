{
  State state=this.state;
  if (state != State.HEADERS_COMPLETE && state != State.CONTENT)   throw new IllegalStateException();
  return buffer == null ? 0 : buffer.length();
}
