{
  File dir=testdir.getDir();
  createEmptyFile("foo");
  File subdir=new File(dir,"sub");
  FS.ensureDirExists(subdir);
  try (Resource base=newResource(testdir.getDir())){
    Resource res=base.addPath("foo");
    assertThat("foo.isDirectory",res.isDirectory(),is(false));
    Resource sub=base.addPath("sub");
    assertThat("sub/.isDirectory",sub.isDirectory(),is(true));
  }
 }
