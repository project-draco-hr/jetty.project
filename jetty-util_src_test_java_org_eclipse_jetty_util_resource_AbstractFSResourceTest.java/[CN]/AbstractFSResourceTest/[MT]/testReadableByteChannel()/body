{
  File file=testdir.getFile("foo");
  file.createNewFile();
  String content="Foo is here";
  try (StringReader reader=new StringReader(content);FileWriter writer=new FileWriter(file)){
    IO.copy(reader,writer);
  }
   try (Resource base=newResource(testdir.getDir())){
    Resource foo=base.addPath("foo");
    try (ReadableByteChannel channel=foo.getReadableByteChannel()){
      ByteBuffer buf=ByteBuffer.allocate(256);
      channel.read(buf);
      buf.flip();
      String actual=BufferUtil.toUTF8String(buf);
      assertThat("ReadableByteChannel content",actual,is(content));
    }
   }
 }
