{
  QueuedThreadPool threadPool=new QueuedThreadPool(256);
  threadPool.setName("serverQTP");
  server=new Server(threadPool);
  connector=newHTTPSPDYServerConnector(version);
  connector.setPort(0);
  connector.setIdleTimeout(idleTimeout);
  server.addConnector(connector);
  server.setHandler(handler);
  server.start();
  server.dumpStdErr();
  return new InetSocketAddress("localhost",connector.getLocalPort());
}
