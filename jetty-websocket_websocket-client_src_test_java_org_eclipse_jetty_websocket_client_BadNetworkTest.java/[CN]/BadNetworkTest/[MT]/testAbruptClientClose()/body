{
  TrackingSocket wsocket=new TrackingSocket();
  URI wsUri=server.getWsUri();
  Future<Session> future=client.connect(wsocket,wsUri);
  ServerConnection ssocket=server.accept();
  ssocket.upgrade();
  future.get(500,TimeUnit.MILLISECONDS);
  wsocket.waitForConnected(500,TimeUnit.MILLISECONDS);
  Session conn=wsocket.getSession();
  Assert.assertThat("Connection",conn,instanceOf(AbstractWebSocketConnection.class));
  AbstractWebSocketConnection awsc=(AbstractWebSocketConnection)conn;
  awsc.disconnect(false);
  wsocket.waitForClose(10,TimeUnit.SECONDS);
  wsocket.assertCloseCode(StatusCode.NO_CLOSE);
}
