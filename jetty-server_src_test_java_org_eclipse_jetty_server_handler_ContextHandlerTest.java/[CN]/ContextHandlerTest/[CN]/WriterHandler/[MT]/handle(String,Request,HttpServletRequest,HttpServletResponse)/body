{
  baseRequest.setHandled(true);
  error=false;
  throwable=null;
  response.setStatus(200);
  response.setContentType("text/plain; charset=utf-8");
  response.setHeader("Connection","close");
  PrintWriter writer=response.getWriter();
  try {
    writer.write("Goodbye cruel world\n");
    writer.close();
    response.flushBuffer();
    writer.write("give the printwriter a chance");
    if (writer.checkError())     writer.write("didn't take the chance, will throw now");
  }
 catch (  Throwable th) {
    throwable=th;
  }
  error=writer.checkError();
}
