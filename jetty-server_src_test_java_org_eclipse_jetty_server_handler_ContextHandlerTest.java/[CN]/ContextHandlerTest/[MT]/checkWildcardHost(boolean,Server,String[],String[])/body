{
  LocalConnector connector=(LocalConnector)server.getConnectors()[0];
  ContextHandler context=(ContextHandler)server.getHandler();
  context.setVirtualHosts(contextHosts);
  IsHandledHandler handler=(IsHandledHandler)context.getHandler();
  for (  String host : requestHosts) {
    connector.getResponses("GET / HTTP/1.1\n" + "Host: " + host + "\n\n");
    if (succeed)     assertTrue("'" + host + "' should have been handled.",handler.isHandled());
 else     assertFalse("'" + host + "' should not have been handled.",handler.isHandled());
    handler.reset();
  }
}
