{
  startClient(3000,1000);
  long serverSleep=2000;
  CustomContentExchange httpExchange=new CustomContentExchange();
  httpExchange.setURL("http://localhost:" + _port + "/?sleep="+ serverSleep);
  httpExchange.setMethod(HttpMethods.POST);
  httpExchange.setRequestContent(new ByteArrayBuffer("<h1>??</h1>"));
  _httpClient.send(httpExchange);
  Assert.assertTrue(httpExchange.getDoneLatch().await(2 * serverSleep,TimeUnit.MILLISECONDS));
  Assert.assertFalse(httpExchange.isTimeoutOccurred());
  Assert.assertTrue(httpExchange.isResponseReceived());
  Assert.assertFalse(httpExchange.isErrorOccurred());
}
