{
  freeBuffers();
  if (failed.getAndSet(true) == false) {
    try {
      if (callback != null)       callback.writeFailed(t);
    }
 catch (    Throwable e) {
      LOG.warn("Uncaught exception",e);
    }
  }
}
