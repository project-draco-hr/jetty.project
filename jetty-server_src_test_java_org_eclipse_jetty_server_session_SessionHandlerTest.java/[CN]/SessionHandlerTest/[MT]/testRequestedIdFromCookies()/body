{
  final String cookieName="SessionId";
  final String sessionId="1234.host";
  HttpServletRequest httpRequest=new MockHttpServletRequest(){
    public Cookie[] getCookies(){
      return new Cookie[]{new Cookie(cookieName,sessionId)};
    }
  }
;
  Request baseRequest=new Request();
  baseRequest.setDispatcherType(DispatcherType.REQUEST);
  assertEquals(DispatcherType.REQUEST,baseRequest.getDispatcherType());
  SessionHandler sessionHandler=new SessionHandler();
  sessionHandler.setSessionManager(new MockSessionManager(){
    public SessionCookieConfig getSessionCookieConfig(){
      return new SessionCookieConfig(){
        public String getComment(){
          return null;
        }
        public String getDomain(){
          return null;
        }
        public int getMaxAge(){
          return 0;
        }
        public String getName(){
          return cookieName;
        }
        public String getPath(){
          return null;
        }
        public boolean isHttpOnly(){
          return false;
        }
        public boolean isSecure(){
          return false;
        }
        public void setComment(        String comment){
        }
        public void setDomain(        String domain){
        }
        public void setHttpOnly(        boolean httpOnly){
        }
        public void setMaxAge(        int maxAge){
        }
        public void setName(        String name){
        }
        public void setPath(        String path){
        }
        public void setSecure(        boolean secure){
        }
      }
;
    }
    public boolean isUsingCookies(){
      return true;
    }
    public String getSessionCookie(){
      return cookieName;
    }
  }
);
  sessionHandler.checkRequestedSessionId(baseRequest,httpRequest);
  assertEquals(sessionId,baseRequest.getRequestedSessionId());
  assertTrue(baseRequest.isRequestedSessionIdFromCookie());
}
