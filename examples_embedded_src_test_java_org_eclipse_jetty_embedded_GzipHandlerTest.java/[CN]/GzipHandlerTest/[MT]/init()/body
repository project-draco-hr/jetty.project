{
  _server=new Server();
  _connector=new LocalConnector(_server);
  _server.addConnector(_connector);
  Handler testHandler=new AbstractHandler(){
    public void handle(    String target,    Request baseRequest,    HttpServletRequest request,    HttpServletResponse response) throws IOException, ServletException {
      String etag="W/\"foobar\"";
      response.setHeader(HttpHeader.ETAG.asString(),etag);
      String inm=request.getHeader(HttpHeader.IF_NONE_MATCH.asString());
      if (inm != null && inm.contains(etag)) {
        response.setStatus(HttpStatus.NOT_MODIFIED_304);
      }
 else {
        PrintWriter writer=response.getWriter();
        writer.write(__content);
        writer.close();
      }
      baseRequest.setHandled(true);
    }
  }
;
  GzipHandler gzipHandler=new GzipHandler();
  gzipHandler.setHandler(testHandler);
  _server.setHandler(gzipHandler);
  _server.start();
}
