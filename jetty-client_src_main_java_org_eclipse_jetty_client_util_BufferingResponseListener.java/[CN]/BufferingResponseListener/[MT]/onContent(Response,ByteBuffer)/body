{
  long newLength=buffer.length + content.remaining();
  if (newLength > maxLength) {
    response.abort(new IllegalArgumentException("Buffering capacity exceeded"));
  }
 else {
    byte[] newBuffer=new byte[(int)newLength];
    System.arraycopy(buffer,0,newBuffer,0,buffer.length);
    content.get(newBuffer,buffer.length,content.remaining());
    buffer=newBuffer;
  }
}
