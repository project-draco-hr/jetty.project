{
  if (value instanceof Number || value instanceof String || value instanceof Boolean|| value instanceof Date) {
    return value;
  }
 else   if (value.getClass().equals(HashMap.class)) {
    BasicDBObject o=new BasicDBObject();
    for (    Map.Entry<?,?> entry : ((Map<?,?>)value).entrySet()) {
      if (!(entry.getKey() instanceof String)) {
        o=null;
        break;
      }
      o.append(encodeName(entry.getKey().toString()),encodeName(out,bout,value));
    }
    if (o != null)     return o;
  }
  bout.reset();
  out.reset();
  out.writeUnshared(value);
  out.flush();
  return bout.toByteArray();
}
