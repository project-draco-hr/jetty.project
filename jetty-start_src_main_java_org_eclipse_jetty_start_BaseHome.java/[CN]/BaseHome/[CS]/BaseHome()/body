{
  try {
    this.baseDir=FS.toPath(System.getProperty("user.dir","."));
    String jettyBase=System.getProperty(JETTY_BASE);
    if (jettyBase != null) {
      this.baseDir=FS.toPath(jettyBase);
    }
    URL jarfile=this.getClass().getClassLoader().getResource("org/eclipse/jetty/start/BaseHome.class");
    if (jarfile != null) {
      Matcher m=Pattern.compile("jar:(file:.*)!/org/eclipse/jetty/start/BaseHome.class").matcher(jarfile.toString());
      if (m.matches()) {
        this.homeDir=new File(new URI(m.group(1))).getParentFile().toPath();
      }
    }
    if (this.homeDir == null) {
      this.homeDir=baseDir.toAbsolutePath();
    }
    String jettyHome=System.getProperty(JETTY_HOME);
    if (jettyHome != null) {
      this.homeDir=FS.toPath(jettyHome);
    }
    this.homeDir=this.homeDir.toAbsolutePath();
    this.baseDir=this.baseDir.toAbsolutePath();
  }
 catch (  URISyntaxException e) {
    throw new RuntimeException(e);
  }
}
