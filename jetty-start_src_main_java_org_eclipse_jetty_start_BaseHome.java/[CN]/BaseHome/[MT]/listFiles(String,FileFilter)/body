{
  Objects.requireNonNull(filter,"FileFilter cannot be null");
  File homePath=new File(homeDir,FS.separators(relPathToDirectory));
  List<File> homeFiles=new ArrayList<>();
  if (FS.canReadDirectory(homePath)) {
    homeFiles.addAll(Arrays.asList(homePath.listFiles(filter)));
  }
  if (isBaseDifferent()) {
    File basePath=new File(baseDir,FS.separators(relPathToDirectory));
    List<File> ret=new ArrayList<>();
    if (FS.canReadDirectory(basePath)) {
      File baseFiles[]=basePath.listFiles(filter);
      if (baseFiles != null) {
        for (        File base : baseFiles) {
          String relpath=toRelativePath(baseDir,base);
          File home=new File(homeDir,FS.separators(relpath));
          if (home.exists()) {
            homeFiles.remove(home);
          }
          ret.add(base);
        }
      }
    }
    ret.addAll(homeFiles);
    Collections.sort(ret,new NaturalSort.Files());
    return ret;
  }
 else {
    Collections.sort(homeFiles,new NaturalSort.Files());
    return homeFiles;
  }
}
