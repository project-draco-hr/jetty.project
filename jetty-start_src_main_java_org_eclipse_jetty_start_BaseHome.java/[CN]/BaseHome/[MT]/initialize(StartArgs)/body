{
  Pattern jetty_home=Pattern.compile("(-D)?jetty.home=(.*)");
  Pattern jetty_base=Pattern.compile("(-D)?jetty.base=(.*)");
  Path homePath=null;
  Path basePath=null;
  FileSystem fs=FileSystems.getDefault();
  for (  String arg : args.getCommandLine()) {
    Matcher home_match=jetty_home.matcher(arg);
    if (home_match.matches()) {
      homePath=fs.getPath(home_match.group(2));
    }
    Matcher base_match=jetty_base.matcher(arg);
    if (base_match.matches()) {
      basePath=fs.getPath(base_match.group(2));
    }
  }
  if (homePath != null) {
    this.homeDir=homePath;
    if (basePath == null) {
      this.baseDir=homePath;
      args.getProperties().setProperty("jetty.base",this.baseDir.toString(),"<internal-fallback>");
    }
 else {
      this.baseDir=basePath;
    }
  }
 else   if (basePath != null) {
    this.baseDir=basePath;
  }
  baseDir=baseDir.toAbsolutePath();
  homeDir=homeDir.toAbsolutePath();
  args.addSystemProperty("jetty.home",this.homeDir.toString());
  args.addSystemProperty("jetty.base",this.baseDir.toString());
}
