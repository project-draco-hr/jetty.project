{
  IStream parentStream=streams.get(synStream.getAssociatedStreamId());
  IStream stream=newStream(synStream,parentStream);
  stream.updateCloseState(synStream.isClose(),true);
  stream.setStreamFrameListener(listener);
  if (synStream.isUnidirectional()) {
    stream.updateCloseState(true,false);
    if (!stream.isClosed())     parentStream.associate(stream);
  }
  if (streams.putIfAbsent(synStream.getStreamId(),stream) != null) {
    throw new IllegalStateException("StreamId: " + synStream.getStreamId() + " invalid.");
  }
  logger.debug("Created {}",stream);
  notifyStreamCreated(stream);
  return stream;
}
