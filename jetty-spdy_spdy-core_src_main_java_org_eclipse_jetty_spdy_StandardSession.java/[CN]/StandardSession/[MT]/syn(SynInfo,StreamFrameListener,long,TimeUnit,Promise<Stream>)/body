{
  int associatedStreamId=0;
  if (synInfo instanceof PushSynInfo)   associatedStreamId=((PushSynInfo)synInfo).getAssociatedStreamId();
synchronized (this) {
    int streamId=streamIds.getAndAdd(2);
    SynStreamFrame synStream=new SynStreamFrame(version,synInfo.getFlags(),streamId,associatedStreamId,synInfo.getPriority(),(short)0,synInfo.getHeaders());
    IStream stream=createStream(synStream,listener,true);
    generateAndEnqueueControlFrame(stream,synStream,timeout,unit,new PromisingCallback<Stream>(promise,stream));
  }
  flush();
}
