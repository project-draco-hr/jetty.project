{
  Throwable failure;
synchronized (queue) {
    failure=this.failure;
    if (failure == null) {
      ListIterator<FrameBytes> iter=queue.listIterator(queue.size());
      while (iter.hasPrevious()) {
        FrameBytes element=iter.previous();
        if (element.compareTo(frameBytes) >= 0) {
          iter.next();
          break;
        }
      }
      iter.add(frameBytes);
    }
  }
  if (failure != null)   frameBytes.fail(new SPDYException(failure));
}
