{
  Integer invocations=handlerInvocations.get();
  if (invocations >= 4) {
    execute(new Runnable(){
      @Override public void run(){
        if (callback != null)         notifyHandlerCompleted(callback,context);
        flush();
      }
    }
);
  }
 else {
    handlerInvocations.set(invocations + 1);
    try {
      if (callback != null)       notifyHandlerCompleted(callback,context);
      flush();
    }
  finally {
      handlerInvocations.set(invocations);
    }
  }
}
