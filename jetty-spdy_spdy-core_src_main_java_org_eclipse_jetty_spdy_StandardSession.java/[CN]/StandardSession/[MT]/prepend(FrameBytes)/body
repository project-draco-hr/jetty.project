{
  Throwable failure;
synchronized (queue) {
    failure=this.failure;
    if (failure == null) {
      ListIterator<FrameBytes> iter=queue.listIterator(0);
      while (iter.hasNext()) {
        FrameBytes element=iter.next();
        if (element.compareTo(frameBytes) <= 0) {
          iter.previous();
          break;
        }
      }
      iter.add(frameBytes);
    }
  }
  if (failure != null)   frameBytes.fail(new SPDYException(failure));
}
