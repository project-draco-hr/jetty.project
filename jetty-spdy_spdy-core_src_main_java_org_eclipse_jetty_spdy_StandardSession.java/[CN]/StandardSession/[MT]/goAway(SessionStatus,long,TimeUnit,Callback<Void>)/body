{
  if (goAwaySent.compareAndSet(false,true)) {
    if (!goAwayReceived.get()) {
      GoAwayFrame frame=new GoAwayFrame(version,lastStreamId.get(),sessionStatus.getCode());
      control(null,frame,timeout,unit,callback,null);
      return;
    }
  }
  complete(callback,null);
}
