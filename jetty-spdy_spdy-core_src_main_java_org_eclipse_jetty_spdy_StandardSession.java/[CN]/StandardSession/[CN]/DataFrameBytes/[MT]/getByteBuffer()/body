{
  try {
    IStream stream=getStream();
    int windowSize=stream.getWindowSize();
    if (windowSize <= 0)     return null;
    size=dataInfo.available();
    if (size > windowSize)     size=windowSize;
    buffer=generator.data(stream.getId(),size,dataInfo);
    return buffer;
  }
 catch (  Throwable x) {
    fail(x);
    return null;
  }
}
