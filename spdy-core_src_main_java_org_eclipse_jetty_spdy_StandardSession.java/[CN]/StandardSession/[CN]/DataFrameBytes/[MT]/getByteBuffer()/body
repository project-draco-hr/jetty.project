{
  try {
    int windowSize=stream.getWindowSize();
    if (windowSize <= 0)     return null;
    ByteBuffer buffer=generator.data(stream.getId(),windowSize,data);
    dataLength=buffer.remaining() - DataFrame.HEADER_LENGTH;
    return buffer;
  }
 catch (  Throwable x) {
    fail(x);
    return null;
  }
}
