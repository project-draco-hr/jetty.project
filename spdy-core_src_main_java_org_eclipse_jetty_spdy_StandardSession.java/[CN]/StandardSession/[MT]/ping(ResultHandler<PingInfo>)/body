{
  try {
    int pingId=pingIds.getAndAdd(2);
    final PingInfo pingInfo=new PingInfo(pingId);
    PingFrame frame=new PingFrame(version,pingId);
    control(null,frame,new Handler(){
      @Override public void completed(){
        handler.completed(pingInfo);
      }
      @Override public void failed(      Throwable x){
        handler.failed(x);
      }
    }
);
    flush();
  }
 catch (  StreamException x) {
    handler.failed(x);
    throw new SPDYException(x);
  }
}
