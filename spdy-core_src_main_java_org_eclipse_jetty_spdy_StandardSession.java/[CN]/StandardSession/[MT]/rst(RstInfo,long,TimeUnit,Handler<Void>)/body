{
  try {
    if (goAwaySent.get()) {
      handler.completed(null);
    }
 else {
      RstStreamFrame frame=new RstStreamFrame(version,rstInfo.getStreamId(),rstInfo.getStreamStatus().getCode(version));
      control(null,frame,timeout,unit,handler,null);
    }
  }
 catch (  StreamException x) {
    logger.info("Could not send reset on stream " + rstInfo.getStreamId(),x);
    handler.failed(x);
  }
}
