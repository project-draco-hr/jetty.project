{
  IStream stream=new StandardStream(this,synStream);
  logger.debug("Opening {}",stream);
  int streamId=synStream.getStreamId();
  Stream existing=streams.putIfAbsent(streamId,stream);
  if (existing != null) {
    logger.debug("Detected duplicate {}, resetting",stream);
    rst(new RstInfo(streamId,StreamStatus.PROTOCOL_ERROR));
  }
 else {
    stream.handle(synStream);
    StreamFrameListener listener=notifyOnSyn(stream,synStream);
    stream.setStreamFrameListener(listener);
    flush();
    if (stream.isClosed())     removeStream(stream);
  }
}
