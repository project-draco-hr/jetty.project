{
  if (buf == null) {
    payload=null;
    return;
  }
  if (opcode.isControlFrame()) {
    if (len > WebSocketFrame.MAX_CONTROL_PAYLOAD) {
      throw new ProtocolException("Control Payloads can not exceed 125 bytes in length.");
    }
  }
  payload=new byte[len];
  System.arraycopy(buf,offset,payload,0,len);
}
