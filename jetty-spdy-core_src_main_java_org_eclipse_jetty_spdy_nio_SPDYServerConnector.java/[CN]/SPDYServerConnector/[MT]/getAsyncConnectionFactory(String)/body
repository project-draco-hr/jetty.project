{
  final Map<String,AsyncConnectionFactory> copy=new LinkedHashMap<>();
synchronized (factories) {
    copy.putAll(factories);
  }
  return copy.get(protocol);
}
