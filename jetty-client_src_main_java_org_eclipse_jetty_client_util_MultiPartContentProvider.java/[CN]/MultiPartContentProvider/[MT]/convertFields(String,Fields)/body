{
  try {
    if (fields == null || fields.isEmpty()) {
      contentDisposition+="\r\n";
      return ByteBuffer.wrap(contentDisposition.getBytes(StandardCharsets.US_ASCII));
    }
    ByteArrayOutputStream buffer=new ByteArrayOutputStream((fields.getSize() + 1) * contentDisposition.length());
    buffer.write(contentDisposition.getBytes(StandardCharsets.US_ASCII));
    for (    Fields.Field field : fields) {
      buffer.write(field.getName().getBytes(StandardCharsets.US_ASCII));
      buffer.write(COLON_SPACE_BYTES);
      buffer.write(field.getValue().getBytes(StandardCharsets.UTF_8));
      buffer.write(CR_LF_BYTES);
    }
    buffer.write(CR_LF_BYTES);
    return ByteBuffer.wrap(buffer.toByteArray());
  }
 catch (  IOException x) {
    throw new RuntimeIOException(x);
  }
}
