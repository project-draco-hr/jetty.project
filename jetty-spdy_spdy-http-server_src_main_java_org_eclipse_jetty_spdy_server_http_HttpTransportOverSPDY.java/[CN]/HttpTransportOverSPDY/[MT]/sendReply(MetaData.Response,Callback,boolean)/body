{
  Fields headers=new Fields();
  HttpVersion httpVersion=HttpVersion.HTTP_1_1;
  headers.put(HTTPSPDYHeader.VERSION.name(version),httpVersion.asString());
  int status=info.getStatus();
  StringBuilder httpStatus=new StringBuilder().append(status);
  String reason=info.getReason();
  if (reason == null)   reason=HttpStatus.getMessage(status);
  if (reason != null)   httpStatus.append(" ").append(reason);
  headers.put(HTTPSPDYHeader.STATUS.name(version),httpStatus.toString());
  if (LOG.isDebugEnabled())   LOG.debug("HTTP < {} {}",httpVersion,httpStatus);
  HttpFields fields=info.getFields();
  if (fields != null) {
    for (int i=0; i < fields.size(); ++i) {
      HttpField field=fields.getField(i);
      String name=field.getName();
      String value=field.getValue();
      headers.add(name,value);
      if (LOG.isDebugEnabled())       LOG.debug("HTTP < {}: {}",name,value);
    }
  }
  if (configuration.getSendServerVersion())   headers.add(HttpHeader.SERVER.asString(),HttpConfiguration.SERVER_VERSION);
  if (configuration.getSendXPoweredBy())   headers.add(HttpHeader.X_POWERED_BY.asString(),HttpConfiguration.SERVER_VERSION);
  ReplyInfo reply=new ReplyInfo(headers,close);
  if (LOG.isDebugEnabled())   LOG.debug("Sending reply: {} on stream: {}",reply,stream);
  reply(stream,reply,callback);
}
