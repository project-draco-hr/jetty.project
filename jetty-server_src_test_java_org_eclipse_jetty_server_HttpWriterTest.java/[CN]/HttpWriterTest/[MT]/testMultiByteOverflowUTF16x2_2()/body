{
  _writer.setCharacterEncoding(StringUtil.__UTF8);
  final String singleByteStr="a";
  int remainSize=1;
  final String multiByteDuplicateStr="\uD842\uDF9F";
  int adjustSize=-2;
  StringBuilder sb=new StringBuilder();
  for (int i=0; i < HttpWriter.MAX_OUTPUT_CHARS + adjustSize; i++) {
    sb.append(singleByteStr);
  }
  sb.append(multiByteDuplicateStr);
  for (int i=0; i < remainSize; i++) {
    sb.append(singleByteStr);
  }
  String source=sb.toString();
  byte[] bytes=source.getBytes(StringUtil.__UTF8);
  _writer.write(source.toCharArray(),0,source.toCharArray().length);
  java.io.ByteArrayOutputStream baos=new java.io.ByteArrayOutputStream();
  java.io.OutputStreamWriter osw=new java.io.OutputStreamWriter(baos,StringUtil.__UTF8);
  osw.write(source.toCharArray(),0,source.toCharArray().length);
  osw.flush();
  myReportBytes(bytes);
  myReportBytes(baos.toByteArray());
  myReportBytes(_bytes.asArray());
  assertArrayEquals(bytes,_bytes.asArray());
  assertArrayEquals(baos.toByteArray(),_bytes.asArray());
}
