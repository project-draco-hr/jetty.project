{
  Handler handler=new AbstractHandler(){
    public void handle(    String target,    Request baseRequest,    HttpServletRequest request,    HttpServletResponse response) throws IOException, ServletException {
      baseRequest.setHandled(true);
      Reader reader=request.getReader();
      byte[] b=("read=" + reader.read() + "\n").getBytes(StringUtil.__UTF8);
      response.setContentLength(b.length);
      response.getOutputStream().write(b);
      response.flushBuffer();
    }
  }
;
  _server.stop();
  _server.setHandler(handler);
  _server.start();
  String request="GET / HTTP/1.1\r\n" + "Host: whatever\r\n" + "Content-Type: text/plane\r\n"+ "Content-Length: " + 10 + "\r\n"+ "\r\n"+ "0123456789\r\n"+ "GET / HTTP/1.1\r\n"+ "Host: whatever\r\n"+ "Content-Type: text/plane\r\n"+ "Content-Length: "+ 10+ "\r\n"+ "Connection: close\r\n"+ "\r\n"+ "ABCDEFGHIJ\r\n";
  String responses=_connector.getResponses(request);
  System.err.println("response=" + responses);
  int index=responses.indexOf("read=" + (int)'0');
  assertTrue(index > 0);
  index=responses.indexOf("read=" + (int)'A',index + 7);
  assertTrue(index > 0);
}
