{
  ArrayByteBufferPool bufferPool=new ArrayByteBufferPool(10,100,1000);
  ArrayByteBufferPool.Bucket[] buckets=bufferPool.bucketsFor(true);
  for (int size=1; size <= 9; size++) {
    ByteBuffer buffer=bufferPool.acquire(size,true);
    assertTrue(buffer.isDirect());
    assertEquals(size,buffer.capacity());
    for (    ArrayByteBufferPool.Bucket bucket : buckets)     assertTrue(bucket._queue.isEmpty());
    bufferPool.release(buffer);
    for (    ArrayByteBufferPool.Bucket bucket : buckets)     assertTrue(bucket._queue.isEmpty());
  }
}
