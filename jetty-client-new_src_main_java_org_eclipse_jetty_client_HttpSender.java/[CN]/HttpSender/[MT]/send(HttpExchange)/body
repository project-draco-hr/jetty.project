{
  if (this.exchange.compareAndSet(null,exchange)) {
    LOG.debug("Sending {}",exchange.request());
    notifyRequestBegin(exchange.request());
    ContentProvider content=exchange.request().content();
    this.contentLength=content == null ? -1 : content.length();
    this.contentChunks=content == null ? Collections.<ByteBuffer>emptyIterator() : content.iterator();
    send();
  }
 else {
    throw new IllegalStateException();
  }
}
