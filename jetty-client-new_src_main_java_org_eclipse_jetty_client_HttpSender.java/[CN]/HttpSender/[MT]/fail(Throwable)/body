{
  BufferUtil.clear(header);
  BufferUtil.clear(chunk);
  releaseBuffers();
  connection.getEndPoint().shutdownOutput();
  generator.abort();
  failed=true;
  HttpExchange exchange=this.exchange.getAndSet(null);
  LOG.debug("Failed {}",exchange.request());
  exchange.requestDone(false);
  notifyRequestFailure(exchange.request(),failure);
  notifyResponseFailure(exchange.listener(),failure);
}
