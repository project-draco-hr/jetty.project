{
  final Socket client=newClient();
  System.err.println("client=" + client);
  client.setSoTimeout(600000);
  SocketChannel server=_connector.accept();
  server.configureBlocking(false);
  _manager.accept(server);
  new Thread(){
    public void run(){
      try {
        while (true) {
          byte[] buffer=new byte[1024];
          int len=client.getInputStream().read(buffer);
          if (len < 0) {
            System.err.println("===");
            return;
          }
          System.err.println(new String(buffer,0,len,"UTF-8"));
        }
      }
 catch (      IOException e) {
        e.printStackTrace();
      }
    }
  }
.start();
  for (int i=0; i < 1000000; i++) {
    client.getOutputStream().write(("HelloWorld " + i + "\n").getBytes("UTF-8"));
    System.err.println("wrote");
    if (i % 1000 == 0)     Thread.sleep(10);
  }
  Thread.sleep(20000);
  client.close();
}
