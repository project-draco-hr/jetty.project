{
  while (buffer.hasRemaining()) {
    int currByte=buffer.get();
    if (currByte != PrefaceFrame.PREFACE_BYTES[cursor]) {
      notifyConnectionFailure(ErrorCode.PROTOCOL_ERROR.code,"invalid_preface");
      BufferUtil.clear(buffer);
      return false;
    }
    ++cursor;
    if (cursor == PrefaceFrame.PREFACE_BYTES.length) {
      cursor=0;
      if (LOG.isDebugEnabled())       LOG.debug("Parsed preface bytes");
      return true;
    }
  }
  return false;
}
