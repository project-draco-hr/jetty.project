{
  while (buffer.hasRemaining()) {
    int currByte=buffer.get();
    if (currByte != PREFACE_BYTES[cursor]) {
      notifyConnectionFailure(ErrorCode.PROTOCOL_ERROR,"invalid_preface");
      return false;
    }
    ++cursor;
    if (cursor == PREFACE_BYTES.length) {
      cursor=0;
      LOG.debug("Parsed preface bytes");
      return true;
    }
  }
  return false;
}
