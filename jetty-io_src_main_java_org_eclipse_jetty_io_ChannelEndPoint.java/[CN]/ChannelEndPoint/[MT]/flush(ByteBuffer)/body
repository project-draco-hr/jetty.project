{
  int flushed=0;
  try {
    if (buffers.length == 1)     flushed=_channel.write(buffers[0]);
 else     if (buffers.length > 1 && _channel instanceof GatheringByteChannel)     flushed=(int)((GatheringByteChannel)_channel).write(buffers,0,buffers.length);
 else {
      for (      ByteBuffer b : buffers) {
        if (b.hasRemaining()) {
          int l=_channel.write(b);
          if (l > 0)           flushed+=l;
          if (b.hasRemaining())           break;
        }
      }
    }
    LOG.debug("flushed {} {}",flushed,this);
  }
 catch (  IOException e) {
    throw new EofException(e);
  }
  boolean all_flushed=true;
  if (flushed > 0) {
    notIdle();
    for (    ByteBuffer b : buffers) {
      if (BufferUtil.isEmpty(b))       BufferUtil.clear(b);
 else       all_flushed=false;
    }
  }
  return all_flushed;
}
