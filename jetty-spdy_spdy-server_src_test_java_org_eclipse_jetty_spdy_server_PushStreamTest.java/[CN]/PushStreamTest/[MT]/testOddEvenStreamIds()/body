{
  final CountDownLatch pushStreamIdIsEvenLatch=new CountDownLatch(3);
  Session clientSession=startClient(startServer(new ServerSessionFrameListener.Adapter(){
    @Override public StreamFrameListener onSyn(    Stream stream,    SynInfo synInfo){
      stream.push(new PushInfo(new Fields(),false),new Promise.Adapter<Stream>());
      return null;
    }
  }
),new SessionFrameListener.Adapter(){
    @Override public StreamFrameListener onSyn(    Stream stream,    SynInfo synInfo){
      assertStreamIdIsEven(stream);
      pushStreamIdIsEvenLatch.countDown();
      return super.onSyn(stream,synInfo);
    }
  }
);
  Stream stream=clientSession.syn(new SynInfo(new Fields(),false),null);
  Stream stream2=clientSession.syn(new SynInfo(new Fields(),false),null);
  Stream stream3=clientSession.syn(new SynInfo(new Fields(),false),null);
  assertStreamIdIsOdd(stream);
  assertStreamIdIsOdd(stream2);
  assertStreamIdIsOdd(stream3);
  assertThat("all pushStreams had even ids",pushStreamIdIsEvenLatch.await(5,TimeUnit.SECONDS),is(true));
}
