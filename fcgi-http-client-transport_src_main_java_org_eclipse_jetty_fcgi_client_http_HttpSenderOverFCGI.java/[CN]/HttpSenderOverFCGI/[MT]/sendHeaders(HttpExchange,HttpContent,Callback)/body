{
  Request httpRequest=exchange.getRequest();
  URI uri=httpRequest.getURI();
  HttpFields headers=httpRequest.getHeaders();
  HttpField field=headers.remove(HttpHeader.AUTHORIZATION);
  if (field != null)   headers.put(FCGI.Headers.AUTH_TYPE,field.getValue());
  field=headers.remove(HttpHeader.CONTENT_LENGTH);
  if (field != null)   headers.put(FCGI.Headers.CONTENT_LENGTH,field.getValue());
  field=headers.remove(HttpHeader.CONTENT_TYPE);
  if (field != null)   headers.put(FCGI.Headers.CONTENT_TYPE,field.getValue());
  headers.put(FCGI.Headers.GATEWAY_INTERFACE,"CGI/1.1");
  headers.put(FCGI.Headers.QUERY_STRING,uri.getQuery());
  headers.put(FCGI.Headers.REQUEST_METHOD,httpRequest.getMethod());
  headers.put(FCGI.Headers.REQUEST_URI,uri.toString());
  headers.put(FCGI.Headers.SERVER_PROTOCOL,httpRequest.getVersion().asString());
  int request=getHttpChannel().getRequest();
  boolean noContent=!content.hasContent();
  Generator.Result result=generator.generateRequestHeaders(request,headers,noContent ? new Callback.Adapter() : callback);
  getHttpChannel().flush(result);
  if (noContent) {
    result=generator.generateRequestContent(request,null,true,callback);
    getHttpChannel().flush(result);
  }
}
