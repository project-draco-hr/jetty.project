{
  byte[] bytes=REQUEST2.getBytes();
  int[][] badPoints=new int[][]{{70},{71},{72},{74}};
  Server server=startServer(new EchoHandler());
  try {
    for (int i=0; i < badPoints.length; ++i) {
      Socket client=new Socket(HOST,port);
      OutputStream os=client.getOutputStream();
      StringBuilder message=new StringBuilder();
      message.append("iteration #" + (i + 1));
      writeFragments(bytes,badPoints[i],message,os);
      String response=readResponse(client);
      client.close();
      assertNotSame("response for " + message.toString(),RESPONSE2,response);
    }
  }
  finally {
    server.stop();
  }
}
