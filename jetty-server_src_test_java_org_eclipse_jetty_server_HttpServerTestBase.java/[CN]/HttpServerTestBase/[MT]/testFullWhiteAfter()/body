{
  configureServer(new HelloWorldHandler());
  try (Socket client=newSocket(_serverURI.getHost(),_serverURI.getPort())){
    ((StdErrLog)Log.getLogger(HttpConnection.class)).setHideStacks(true);
    ((StdErrLog)Log.getLogger(HttpConnection.class)).info("expect Bad Message close ...");
    OutputStream os=client.getOutputStream();
    byte[] buffer=new byte[64 * 1024];
    buffer[0]='G';
    buffer[1]='E';
    buffer[2]='T';
    buffer[3]=' ';
    buffer[4]='/';
    buffer[5]=' ';
    buffer[6]='H';
    buffer[7]='T';
    buffer[8]='T';
    buffer[9]='P';
    buffer[10]='/';
    buffer[11]='1';
    buffer[12]='.';
    buffer[13]='0';
    buffer[14]='\n';
    buffer[15]='\n';
    Arrays.fill(buffer,16,buffer.length - 1,(byte)' ');
    os.write(buffer);
    os.flush();
    long start=System.nanoTime();
    String response=readResponse(client);
    long end=System.nanoTime();
    Assert.assertThat(response,Matchers.containsString("HTTP/1.1 200 OK"));
    Assert.assertThat(TimeUnit.NANOSECONDS.toSeconds(end - start),Matchers.lessThan(1L));
  }
  finally {
    ((StdErrLog)Log.getLogger(HttpConnection.class)).setHideStacks(true);
  }
}
