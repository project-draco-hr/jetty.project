{
  System.err.println("testCommittedError");
  configureServer(new CommittedErrorHandler());
  Socket client=newSocket(HOST,_connector.getLocalPort());
  try {
    OutputStream os=client.getOutputStream();
    InputStream is=client.getInputStream();
    os.write(("GET / HTTP/1.1\r\n" + "Host: " + HOST + ":"+ _connector.getLocalPort()+ "\r\n"+ "Connection: close\r\n"+ "\r\n").getBytes());
    os.flush();
    client.setSoTimeout(2000);
    String in=IO.toString(is);
    System.err.println("in=" + in);
    Thread.sleep(2000);
  }
  finally {
    System.err.println("closing");
    client.close();
    Thread.sleep(2000);
    System.err.println("FINALLY");
    Thread.sleep(2000);
  }
}
