{
  configureServer(new NoopHandler());
  final int REQS=5;
  String content="This is a loooooooooooooooooooooooooooooooooo" + "ooooooooooooooooooooooooooooooooooooooooooooo" + "ooooooooooooooooooooooooooooooooooooooooooooo"+ "ooooooooooooooooooooooooooooooooooooooooooooo"+ "ooooooooooooooooooooooooooooooooooooooooooooo"+ "ooooooooooooooooooooooooooooooooooooooooooooo"+ "ooooooooooooooooooooooooooooooooooooooooooooo"+ "ooooooooooooooooooooooooooooooooooooooooooooo"+ "ooooooooooooooooooooooooooooooooooooooooooooo"+ "oooooooooooonnnnnnnnnnnnnnnnggggggggg content"+ new String(new char[65 * 1024]);
  final byte[] bytes=content.getBytes();
  Socket client=newSocket(HOST,_connector.getLocalPort());
  final OutputStream out=client.getOutputStream();
  new Thread(){
    public void run(){
      try {
        for (int i=0; i < REQS; i++) {
          out.write("GET / HTTP/1.1\r\nHost: localhost\r\n".getBytes(StringUtil.__ISO_8859_1));
          out.write(("Content-Length: " + bytes.length + "\r\n"+ "\r\n").getBytes(StringUtil.__ISO_8859_1));
          out.write(bytes,0,bytes.length);
        }
        out.write("GET / HTTP/1.1\r\nHost: localhost\r\nConnection: close\r\n\r\n".getBytes(StringUtil.__ISO_8859_1));
        out.flush();
      }
 catch (      Exception e) {
        e.printStackTrace();
      }
    }
  }
.start();
  String resps=readResponse(client);
  int offset=0;
  for (int i=0; i < (REQS + 1); i++) {
    int ok=resps.indexOf("HTTP/1.1 200 OK",offset);
    assertThat("resp" + i,ok,greaterThanOrEqualTo(offset));
    offset=ok + 15;
  }
}
