{
  StringBuffer rawResponse=new StringBuffer();
  rawResponse.append("HTTP/1.1 200 OK\n");
  rawResponse.append("Date: Mon, 08 Jun 2009 23:05:26 GMT\n");
  rawResponse.append("Content-Type: text/plain\n");
  rawResponse.append("Content-Length: 28\n");
  rawResponse.append("Last-Modified: Mon, 08 Jun 2009 17:06:22 GMT\n");
  rawResponse.append("Server: Jetty(7.0.y.z-SNAPSHOT)\n");
  rawResponse.append("\n");
  rawResponse.append("ABCDEFGHIJKLMNOPQRSTTUVWXYZ\n");
  rawResponse.append("HTTP/1.1 200 OK\n");
  rawResponse.append("Date: Mon, 08 Jun 2009 23:05:26 GMT\n");
  rawResponse.append("Content-Type: text/plain\n");
  rawResponse.append("Content-Length: 25\n");
  rawResponse.append("Last-Modified: Mon, 08 Jun 2009 17:06:22 GMT\n");
  rawResponse.append("Server: Jetty(7.0.y.z-SNAPSHOT)\n");
  rawResponse.append("\n");
  rawResponse.append("Host=Default\n");
  rawResponse.append("Resource=R1\n");
  rawResponse.append("\n");
  rawResponse.append("HTTP/1.1 200 OK\n");
  rawResponse.append("Date: Mon, 08 Jun 2009 23:05:26 GMT\n");
  rawResponse.append("Content-Type: text/plain\n");
  rawResponse.append("Content-Length: 25\n");
  rawResponse.append("Last-Modified: Mon, 08 Jun 2009 17:06:22 GMT\n");
  rawResponse.append("Connection: close\n");
  rawResponse.append("Server: Jetty(7.0.y.z-SNAPSHOT)\n");
  rawResponse.append("\n");
  rawResponse.append("Host=Default\n");
  rawResponse.append("Resource=R2\n");
  List<HttpTester.Response> responses=HttpTesting.readResponses(rawResponse.toString());
  Assert.assertNotNull("Responses should not be null",responses);
  Assert.assertEquals("Responses.size",3,responses.size());
  HttpTester.Response resp1=responses.get(0);
  System.err.println(resp1.toString());
  Assert.assertEquals(HttpStatus.OK_200,resp1.getStatus());
  Assert.assertEquals("text/plain",resp1.get("Content-Type"));
  Assert.assertTrue(resp1.getContent().contains("ABCDEFGHIJKLMNOPQRSTTUVWXYZ\n"));
  assertThat(resp1.get("Connection"),is(not("close")));
  HttpTester.Response resp2=responses.get(1);
  System.err.println(resp2.toString());
  Assert.assertEquals(HttpStatus.OK_200,resp2.getStatus());
  Assert.assertEquals("text/plain",resp2.get("Content-Type"));
  Assert.assertTrue(resp2.getContent().contains("Host=Default\nResource=R1\n"));
  assertThat(resp2.get("Connection"),is(not("close")));
  HttpTester.Response resp3=responses.get(2);
  System.err.println(resp3.toString());
  Assert.assertEquals(HttpStatus.OK_200,resp3.getStatus());
  Assert.assertEquals("text/plain",resp3.get("Content-Type"));
  Assert.assertTrue(resp3.getContent().contains("Host=Default\nResource=R2\n"));
  assertThat(resp3.get("Connection"),is("close"));
}
