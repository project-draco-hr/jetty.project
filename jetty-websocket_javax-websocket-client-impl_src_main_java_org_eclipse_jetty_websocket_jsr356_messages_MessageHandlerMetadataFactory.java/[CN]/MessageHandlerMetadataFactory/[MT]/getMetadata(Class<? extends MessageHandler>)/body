{
  List<MessageHandlerMetadata> ret=new ArrayList<>();
  boolean partial=false;
  if (MessageHandler.Partial.class.isAssignableFrom(handler)) {
    partial=true;
    Class<?> onMessageClass=getOnMessagePartialType(handler);
    MessageType onMessageType=identifyMessageType(onMessageClass);
    ret.add(new MessageHandlerMetadata(handler,onMessageType,onMessageClass,partial));
  }
  if (MessageHandler.Whole.class.isAssignableFrom(handler)) {
    partial=false;
    Class<?> onMessageClass=getOnMessageType(handler);
    MessageType onMessageType=identifyMessageType(onMessageClass);
    MessageHandlerMetadata metadata=new MessageHandlerMetadata(handler,onMessageType,onMessageClass,partial);
    ret.add(metadata);
  }
  return ret;
}
