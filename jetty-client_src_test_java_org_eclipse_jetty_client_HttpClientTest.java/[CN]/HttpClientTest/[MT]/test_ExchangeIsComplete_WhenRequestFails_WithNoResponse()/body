{
  start(new EmptyServerHandler());
  final CountDownLatch latch=new CountDownLatch(1);
  final String host="localhost";
  final int port=connector.getLocalPort();
  client.newRequest(host,port).scheme(scheme).onRequestBegin(new Request.BeginListener(){
    @Override public void onBegin(    Request request){
      HttpDestinationOverHTTP destination=(HttpDestinationOverHTTP)client.getDestination(scheme,host,port);
      destination.getHttpConnectionPool().getActiveConnections().peek().close();
    }
  }
).send(new Response.Listener.Empty(){
    @Override public void onComplete(    Result result){
      latch.countDown();
    }
  }
);
  Assert.assertTrue(latch.await(5,TimeUnit.SECONDS));
}
