{
  WebSocketClientFactory factory=new WebSocketClientFactory();
  factory.setMasker(new ZeroMasker());
  WebSocketClient client=factory.newWebSocketClient(new TrackingSocket());
  Assert.assertThat("Client",client,notNullValue());
  Assert.assertThat("Client.factory",client.getFactory(),is(factory));
  Assert.assertThat("Client.policy",client.getPolicy(),is(factory.getPolicy()));
  Assert.assertThat("Client.masker",client.getMasker(),notNullValue());
  Assert.assertThat("Client.upgradeRequest",client.getUpgradeRequest(),notNullValue());
  Assert.assertThat("Client.upgradeResponse",client.getUpgradeResponse(),nullValue());
}
