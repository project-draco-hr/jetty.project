{
  try {
    SocketChannel channel=SocketChannel.open();
    Address address=destination.isProxied() ? destination.getProxy() : destination.getAddress();
    channel.socket().setTcpNoDelay(true);
    if (_httpClient.isConnectBlocking()) {
      channel.socket().connect(address.toSocketAddress(),_httpClient.getConnectTimeout());
      channel.configureBlocking(false);
      _selectorManager.register(channel,destination);
    }
 else {
      channel.configureBlocking(false);
      try {
        channel.connect(address.toSocketAddress());
      }
 catch (      UnresolvedAddressException uae) {
        channel.close();
        throw uae;
      }
catch (      UnknownHostException uhe) {
        channel.close();
        throw uhe;
      }
      _selectorManager.register(channel,destination);
      ConnectTimeout connectTimeout=new ConnectTimeout(channel,destination);
      _httpClient.schedule(connectTimeout,_httpClient.getConnectTimeout());
      _connectingChannels.put(channel,connectTimeout);
    }
  }
 catch (  IOException ex) {
    destination.onConnectionFailed(ex);
  }
}
