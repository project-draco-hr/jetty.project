{
  HttpDestination dest=(HttpDestination)key.attachment();
  SelectChannelEndPoint ep=null;
  if (dest.isSecure()) {
    if (dest.isProxied()) {
      SSLEngine engine=newSslEngine();
      ep=new ProxySelectChannelEndPoint(channel,selectSet,key,_sslBuffers,engine);
    }
 else {
      SSLEngine engine=newSslEngine();
      ep=new SslSelectChannelEndPoint(_sslBuffers,channel,selectSet,key,engine);
    }
  }
 else {
    ep=new SelectChannelEndPoint(channel,selectSet,key);
  }
  HttpConnection connection=(HttpConnection)ep.getConnection();
  connection.setDestination(dest);
  dest.onNewConnection(connection);
  return ep;
}
