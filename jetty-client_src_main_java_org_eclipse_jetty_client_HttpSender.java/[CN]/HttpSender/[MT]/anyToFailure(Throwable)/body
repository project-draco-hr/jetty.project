{
  HttpExchange exchange=getHttpExchange();
  if (exchange == null)   return false;
  boolean completed=exchange.requestComplete();
  if (!completed)   return false;
  this.failure=failure;
  RequestState current;
  boolean fail;
  while (true) {
    current=requestState.get();
    if (updateRequestState(current,RequestState.FAILURE)) {
      fail=current != RequestState.TRANSIENT && current != RequestState.TRANSIENT_CONTENT;
      break;
    }
  }
  dispose();
  Result result=exchange.terminateRequest(failure);
  Request request=exchange.getRequest();
  if (LOG.isDebugEnabled())   LOG.debug("Request failure {} {}",exchange,failure);
  HttpDestination destination=getHttpChannel().getHttpDestination();
  destination.getRequestNotifier().notifyFailure(request,failure);
  if (fail) {
    terminateRequest(exchange,failure,!isBeforeCommit(current),result);
  }
 else {
    if (LOG.isDebugEnabled())     LOG.debug("Concurrent failure: request termination skipped, performed by helpers");
  }
  return true;
}
