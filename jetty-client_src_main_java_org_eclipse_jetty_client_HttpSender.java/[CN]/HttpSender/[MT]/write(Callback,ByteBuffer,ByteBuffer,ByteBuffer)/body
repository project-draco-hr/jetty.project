{
  int mask=0;
  if (header != null)   mask+=1;
  if (chunk != null)   mask+=2;
  if (content != null)   mask+=4;
  EndPoint endPoint=connection.getEndPoint();
switch (mask) {
case 0:
    endPoint.write(callback,BufferUtil.EMPTY_BUFFER);
  break;
case 1:
endPoint.write(callback,header);
break;
case 2:
endPoint.write(callback,chunk);
break;
case 3:
endPoint.write(callback,header,chunk);
break;
case 4:
endPoint.write(callback,content);
break;
case 5:
endPoint.write(callback,header,content);
break;
case 6:
endPoint.write(callback,chunk,content);
break;
case 7:
endPoint.write(callback,header,chunk,content);
break;
default :
throw new IllegalStateException();
}
}
