{
  if (!updateState(State.IDLE,State.SEND))   throw new IllegalStateException();
  HttpConversation conversation=exchange.conversation();
  Response.Listener currentListener=exchange.listener();
  Response.Listener initialListener=conversation.exchanges().peekFirst().listener();
  if (initialListener == currentListener)   conversation.listener(initialListener);
 else   conversation.listener(new DoubleResponseListener(responseNotifier,currentListener,initialListener));
  Request request=exchange.request();
  if (request.aborted()) {
    exchange.abort(null);
  }
 else {
    LOG.debug("Sending {}",request);
    requestNotifier.notifyBegin(request);
    ContentProvider content=request.content();
    this.contentIterator=content == null ? Collections.<ByteBuffer>emptyIterator() : content.iterator();
    send();
  }
}
