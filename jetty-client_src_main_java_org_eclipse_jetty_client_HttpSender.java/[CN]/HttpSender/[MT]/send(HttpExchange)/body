{
  Request request=exchange.getRequest();
  Throwable cause=request.getAbortCause();
  if (cause != null) {
    exchange.abort(cause);
  }
 else {
    if (!queuedToBegin(request))     throw new IllegalStateException();
    if (!updateSenderState(SenderState.IDLE,expects100Continue(request) ? SenderState.EXPECTING : SenderState.SENDING))     throw new IllegalStateException();
    ContentProvider contentProvider=request.getContent();
    HttpContent content=this.content=new HttpContent(contentProvider);
    if (contentProvider instanceof AsyncContentProvider)     ((AsyncContentProvider)contentProvider).setListener(this);
    if (!beginToHeaders(request))     return;
    sendHeaders(exchange,content,commitCallback);
  }
}
