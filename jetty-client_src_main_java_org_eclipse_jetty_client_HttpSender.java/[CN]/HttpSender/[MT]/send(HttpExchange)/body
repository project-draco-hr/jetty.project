{
  if (!updateState(State.IDLE,State.SEND))   throw new IllegalStateException();
  Request request=exchange.request();
  if (request.aborted()) {
    exchange.abort();
  }
 else {
    LOG.debug("Sending {}",request);
    requestNotifier.notifyBegin(request);
    ContentProvider content=request.content();
    this.contentIterator=content == null ? Collections.<ByteBuffer>emptyIterator() : content.iterator();
    send();
  }
}
