{
  Request request=exchange.request();
  if (request.aborted()) {
    fail(new HttpRequestException("Request aborted",request));
  }
 else {
    LOG.debug("Sending {}",request);
    requestNotifier.notifyBegin(request);
    ContentProvider content=request.content();
    this.contentLength=content == null ? -1 : content.length();
    this.contentChunks=content == null ? Collections.<ByteBuffer>emptyIterator() : content.iterator();
    send();
  }
}
