{
  resolveTempDirectory(context);
  String name=overlay.getName();
  if (name.endsWith("!/"))   name=name.substring(0,name.length() - 2);
  int i=name.lastIndexOf('/');
  if (i > 0)   name=name.substring(i + 1,name.length());
  name=name.replace('.','_');
  File dir=new File(context.getTempDirectory(),name);
  overlay.copyTo(dir);
  Resource unpackedOverlay=Resource.newResource(dir.getCanonicalPath());
  return unpackedOverlay;
}
