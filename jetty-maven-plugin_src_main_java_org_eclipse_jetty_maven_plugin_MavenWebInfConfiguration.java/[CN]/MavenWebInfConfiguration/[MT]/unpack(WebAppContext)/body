{
  super.unpack(context);
  _originalResourceBase=context.getBaseResource();
  JettyWebAppContext jwac=(JettyWebAppContext)context;
  _unpackedOverlayResources=new ArrayList<Resource>();
  if (jwac.getOverlays() != null && !jwac.getOverlays().isEmpty()) {
    List<Resource> resourceBaseCollection=new ArrayList<Resource>();
    for (    Overlay o : jwac.getOverlays()) {
      if (o.getConfig() != null && o.getConfig().isCurrentProject() && _originalResourceBase.exists()) {
        resourceBaseCollection.add(_originalResourceBase);
        LOG.info("Adding virtual project to resource base list");
        continue;
      }
      Resource unpacked=unpackOverlay(jwac,o);
      _unpackedOverlayResources.add(unpacked);
      resourceBaseCollection.add(unpacked);
      LOG.info("Adding " + unpacked + " to resource base list");
    }
    if (!resourceBaseCollection.contains(_originalResourceBase) && _originalResourceBase.exists()) {
      if (jwac.getBaseAppFirst()) {
        LOG.info("Adding virtual project first in resource base list");
        resourceBaseCollection.add(0,_originalResourceBase);
      }
 else {
        LOG.info("Adding virtual project last in resource base list");
        resourceBaseCollection.add(_originalResourceBase);
      }
    }
    jwac.setBaseResource(new ResourceCollection(resourceBaseCollection.toArray(new Resource[resourceBaseCollection.size()])));
  }
}
