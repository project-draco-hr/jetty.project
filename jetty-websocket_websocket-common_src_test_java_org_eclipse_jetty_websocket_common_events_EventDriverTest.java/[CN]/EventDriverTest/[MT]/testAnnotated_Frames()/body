{
  AnnotatedFramesSocket socket=new AnnotatedFramesSocket();
  EventDriver driver=wrap(socket);
  LocalWebSocketSession conn=new LocalWebSocketSession(testname);
  driver.setSession(conn);
  driver.onConnect();
  driver.incomingFrame(new WebSocketFrame(OpCode.PING).setPayload("PING"));
  driver.incomingFrame(WebSocketFrame.text("Text Me"));
  driver.incomingFrame(WebSocketFrame.binary().setPayload("Hello Bin"));
  driver.incomingFrame(new CloseInfo(StatusCode.SHUTDOWN).asFrame());
  socket.capture.assertEventCount(6);
  socket.capture.assertEventStartsWith(0,"onConnect(");
  socket.capture.assertEventStartsWith(1,"onFrame(PING[");
  socket.capture.assertEventStartsWith(2,"onFrame(TEXT[");
  socket.capture.assertEventStartsWith(3,"onFrame(BINARY[");
  socket.capture.assertEventStartsWith(4,"onFrame(CLOSE[");
  socket.capture.assertEventStartsWith(5,"onClose(1001,");
}
