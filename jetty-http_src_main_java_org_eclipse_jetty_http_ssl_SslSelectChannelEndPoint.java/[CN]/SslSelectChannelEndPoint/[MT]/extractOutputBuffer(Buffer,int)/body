{
  NIOBuffer nBuf=null;
  if (buffer.buffer() instanceof NIOBuffer) {
    nBuf=(NIOBuffer)buffer.buffer();
    return nBuf.getByteBuffer();
  }
 else {
    if (_reuseBuffer[n] == null)     _reuseBuffer[n]=(NIOBuffer)_buffers.getBuffer(_session.getApplicationBufferSize());
    NIOBuffer buf=_reuseBuffer[n];
    buf.clear();
    buf.put(buffer);
    return buf.getByteBuffer();
  }
}
