{
  int size=buffer.remaining();
synchronized (this) {
    if (!BufferUtil.hasContent(_inApp))     process(null);
    if (BufferUtil.hasContent(_inApp))     BufferUtil.flipPutFlip(_inApp,buffer);
  }
  int filled=buffer.remaining() - size;
  if (filled == 0 && isInputShutdown())   return -1;
  return filled;
}
