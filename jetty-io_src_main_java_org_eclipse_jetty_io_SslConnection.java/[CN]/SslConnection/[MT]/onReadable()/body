{
  _lock.lock();
  try {
    LOG.debug("onReadable {}",this);
    allocateBuffers();
    boolean progress=true;
    while (progress) {
      progress=false;
      if (!BufferUtil.isFull(_inNet)) {
        int filled=_endp.fill(_inNet);
        LOG.debug("filled {}",filled);
        if (filled > 0)         progress=true;
      }
      progress|=process(null);
    }
  }
 catch (  IOException e) {
    LOG.warn(e);
  }
 finally {
    releaseBuffers();
    if (_appEndPoint._readCallback != null && !BufferUtil.isFull(_inNet))     scheduleOnReadable();
    _lock.unlock();
  }
}
