{
  if (LOG.isDebugEnabled())   LOG.debug("{} run",this);
  boolean produce=false;
  try (Lock locked=_locker.lock()){
    _pending=false;
    if (!_idle && !_producing) {
      produce=_producing=true;
    }
  }
   if (produce) {
    while (_threadpool != null && _threadpool.isLowOnThreads()) {
      LOG.debug("EPC low resources {}",this);
      try {
        _lowresources.execute();
      }
 catch (      Throwable e) {
        LOG.warn(e);
      }
    }
    produceAndRun();
  }
}
