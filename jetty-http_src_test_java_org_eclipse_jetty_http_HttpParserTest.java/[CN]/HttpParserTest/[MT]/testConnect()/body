{
  StringEndPoint io=new StringEndPoint();
  io.setInput("CONNECT 192.168.1.2:80 HTTP/1.1\015\012" + "\015\012");
  ByteArrayBuffer buffer=new ByteArrayBuffer(4096);
  SimpleBuffers buffers=new SimpleBuffers(buffer,null);
  Handler handler=new Handler();
  HttpParser parser=new HttpParser(buffers,io,handler);
  parser.parse();
  assertTrue(handler.request);
  assertEquals("CONNECT",f0);
  assertEquals("192.168.1.2:80",f1);
  assertEquals("HTTP/1.1",f2);
  assertEquals(-1,h);
}
