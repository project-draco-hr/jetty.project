{
  Handler handler=new Handler();
  HttpParser parser=new HttpParser((HttpParser.RequestHandler)handler);
  ByteBuffer buffer=BufferUtil.toBuffer("PROXY TCP4 207.47.45.254 10.0.1.116 27689 80\015\012");
  parser.parseNext(buffer);
  buffer=BufferUtil.toBuffer("GET / HTTP/1.1\015\012" + "Host: localhost \015\012" + "Connection: close\015\012"+ "\015\012"+ "\015\012");
  parser.parseNext(buffer);
  assertTrue(_headerCompleted);
  assertTrue(_messageCompleted);
  assertEquals("GET",_methodOrVersion);
  assertEquals("/",_uriOrStatus);
  assertEquals("HTTP/1.1",_versionOrReason);
  assertEquals("PROXY TCP4 207.47.45.254 10.0.1.116 27689 80",handler._proxy);
  assertEquals("Host",_hdr[0]);
  assertEquals("localhost",_val[0]);
  assertEquals("Connection",_hdr[1]);
  assertEquals("close",_val[1]);
  assertEquals(1,_headers);
}
