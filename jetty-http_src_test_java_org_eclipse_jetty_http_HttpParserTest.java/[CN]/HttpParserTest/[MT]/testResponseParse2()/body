{
  StringEndPoint io=new StringEndPoint();
  io.setInput("HTTP/1.1 204 No-Content\015\012" + "Connection: close\015\012" + "\015\012"+ "HTTP/1.1 200 Correct\015\012"+ "Content-Length: 10\015\012"+ "Content-Type: text/plain\015\012"+ "\015\012"+ "0123456789\015\012");
  ByteArrayBuffer buffer=new ByteArrayBuffer(4096);
  SimpleBuffers buffers=new SimpleBuffers(new Buffer[]{buffer});
  Handler handler=new Handler();
  HttpParser parser=new HttpParser(buffers,io,handler,buffer.capacity(),0);
  parser.parse();
  assertEquals("HTTP/1.1",f0);
  assertEquals("204",f1);
  assertEquals("No-Content",f2);
  assertTrue(headerCompleted);
  assertTrue(messageCompleted);
  parser.parse();
  assertEquals("HTTP/1.1",f0);
  assertEquals("200",f1);
  assertEquals("Correct",f2);
  assertEquals(_content.length(),10);
  assertTrue(headerCompleted);
  assertTrue(messageCompleted);
}
