{
  this.policy=policy;
  this.websocket=websocket;
  this.events=methodsCache.getMethods(websocket.getClass());
  this.bufferPool=bufferPool;
  if (events.isAnnotated()) {
    WebSocket anno=websocket.getClass().getAnnotation(WebSocket.class);
    policy.setBufferSize(anno.maxBufferSize());
    policy.setMaxBinaryMessageSize(anno.maxBinarySize());
    policy.setMaxTextMessageSize(anno.maxTextSize());
    policy.setMaxIdleTime(anno.maxIdleTime());
  }
}
