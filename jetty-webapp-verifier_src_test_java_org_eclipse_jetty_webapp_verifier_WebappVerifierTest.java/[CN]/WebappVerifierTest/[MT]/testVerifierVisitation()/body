{
  CountingRule counts=new CountingRule();
  WebappVerifier verifier=new WebappVerifier(MavenTestingUtils.toTargetFile("war-files/test-webapp-logging-java.war").toURI());
  verifier.addRule(counts);
  verifier.setWorkDir(getTestWorkDir());
  verifier.visitAll();
  Collection<Violation> violations=verifier.getViolations();
  assertNotNull("Should never have a null set of Violations",violations);
  assertEquals("No violations caused",0,violations.size());
  assertEquals("Counts.webappStart",1,counts.countWebappStart);
  assertEquals("Counts.countWebappEnd",1,counts.countWebappEnd);
  assertEquals("Counts.countDirStart",12,counts.countDirStart);
  assertEquals("Counts.countFile",6,counts.countFile);
  assertEquals("Counts.countDirEnd",12,counts.countDirEnd);
  assertEquals("Counts.countDir (Start == End)",counts.countDirStart,counts.countDirEnd);
  assertEquals("Counts.countWebInfClassesStart",1,counts.countWebInfClassesStart);
  assertEquals("Counts.countWebInfClass",1,counts.countWebInfClass);
  assertEquals("Counts.countWebInfClassResource",1,counts.countWebInfClassResource);
  assertEquals("Counts.countWebInfClassesEnd",1,counts.countWebInfClassesEnd);
  assertEquals("Counts.countWebInfClasses (Start == End)",counts.countWebInfClassesStart,counts.countWebInfClassesEnd);
  assertEquals("Counts.countWebInfLibStart",0,counts.countWebInfLibStart);
  assertEquals("Counts.countWebInfLibJar",0,counts.countWebInfLibJar);
  assertEquals("Counts.countWebInfLibZip",0,counts.countWebInfLibZip);
  assertEquals("Counts.countWebInfLibEnd",0,counts.countWebInfLibEnd);
  assertEquals("Counts.countWebInfLib (Start == End)",counts.countWebInfLibStart,counts.countWebInfLibEnd);
}
