{
  Assert.assertTrue(_server.isStarted());
  WebSocketClientFactory factory=new WebSocketClientFactory(new QueuedThreadPool(),new ZeroMaskGen());
  SslContextFactory cf=factory.getSslContextFactory();
  cf.setKeyStorePath(MavenTestingUtils.getTestResourceFile("keystore").getAbsolutePath());
  cf.setKeyStorePassword("storepwd");
  cf.setKeyManagerPassword("keypwd");
  factory.start();
  WebSocketClient client=new WebSocketClient(factory);
  _connection=client.open(new URI("wss://localhost:" + _port),webSocket).get(5,TimeUnit.SECONDS);
}
