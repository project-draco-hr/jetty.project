{
  Permissions permissions=new Permissions();
  for (Iterator<PermissionEntry> i=collection.iterator(); i.hasNext(); ) {
    PermissionEntry perm=i.next();
    Class clazz;
    try {
      clazz=Class.forName(perm.klass);
      if (perm.name == null && perm.actions == null) {
        permissions.add((Permission)clazz.newInstance());
      }
 else       if (perm.name != null && perm.actions == null) {
        Constructor c=clazz.getConstructor(new Class[]{String.class});
        permissions.add((Permission)c.newInstance(evaluator.evaluate(perm.name)));
      }
 else       if (perm.name != null && perm.actions != null) {
        Constructor c=clazz.getConstructor(new Class[]{String.class,String.class});
        permissions.add((Permission)c.newInstance(evaluator.evaluate(perm.name),perm.actions));
      }
    }
 catch (    Exception e) {
      throw new PolicyException(e);
    }
  }
  return permissions;
}
