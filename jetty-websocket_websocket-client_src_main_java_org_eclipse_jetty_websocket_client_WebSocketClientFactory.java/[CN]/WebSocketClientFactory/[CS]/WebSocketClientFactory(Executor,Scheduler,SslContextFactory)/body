{
  LOG.debug("new WebSocketClientFactory()");
  if (executor == null) {
    throw new IllegalArgumentException("Executor is required");
  }
  this.executor=executor;
  addBean(executor);
  if (scheduler == null) {
    throw new IllegalArgumentException("Scheduler is required");
  }
  this.scheduler=scheduler;
  addBean(scheduler);
  if (sslContextFactory != null) {
    addBean(sslContextFactory);
  }
  this.policy=WebSocketPolicy.newClientPolicy();
  this.extensionRegistry=new WebSocketExtensionRegistry(policy,bufferPool);
  this.connectionManager=new ConnectionManager(bufferPool,executor,scheduler,sslContextFactory,policy);
  addBean(this.connectionManager);
  this.methodsCache=new EventMethodsCache();
}
