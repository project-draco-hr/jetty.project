{
  Server server=new Server();
  SelectChannelConnector connector=new SelectChannelConnector();
  connector.setPort(8888);
  server.addConnector(connector);
  HandlerCollection handlers=new HandlerCollection();
  server.setHandler(handlers);
  ServletContextHandler context=new ServletContextHandler(handlers,"/",ServletContextHandler.SESSIONS);
  ServletHolder proxyServlet=new ServletHolder(ProxyServlet.class);
  proxyServlet.setInitParameter("whiteList","google.com, www.eclipse.org, localhost");
  proxyServlet.setInitParameter("blackList","google.com/calendar/*, www.eclipse.org/committers/");
  context.addServlet(proxyServlet,"/*");
  ConnectHandler proxy=new ConnectHandler();
  proxy.setWhite(new String[]{"mail.google.com"});
  proxy.addWhite("www.google.com");
  handlers.addHandler(proxy);
  server.start();
}
