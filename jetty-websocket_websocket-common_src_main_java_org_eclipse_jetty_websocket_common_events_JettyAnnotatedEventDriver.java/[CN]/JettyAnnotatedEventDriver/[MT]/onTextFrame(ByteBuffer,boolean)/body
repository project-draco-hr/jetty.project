{
  if (events.onText == null) {
    return;
  }
  if (activeMessage == null) {
    if (events.onText.isStreaming()) {
      activeMessage=new MessageReader(this);
    }
 else {
      activeMessage=new SimpleTextMessage(this);
    }
  }
  activeMessage.appendMessage(buffer,fin);
  if (fin) {
    activeMessage.messageComplete();
    activeMessage=null;
  }
}
