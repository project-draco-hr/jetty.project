{
  boolean needsQuoting=arg.indexOf(' ') >= 0 || arg.indexOf('"') >= 0;
  if (!needsQuoting) {
    return arg;
  }
  StringBuilder buf=new StringBuilder();
  buf.append('"');
  boolean escaped=false;
  for (  char c : arg.toCharArray()) {
    if (c == '"') {
      if (!escaped) {
        buf.append("\\\"");
        escaped=false;
        continue;
      }
    }
    if (c == '\\') {
      escaped=true;
    }
    buf.append(c);
  }
  buf.append('"');
  return buf.toString();
}
