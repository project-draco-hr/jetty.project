{
  ByteBufferPool.Lease lease=new ByteBufferPool.Lease(byteBufferPool);
  ByteBuffer header=generateHeader(FrameType.SETTINGS,5 * settings.size(),reply ? 0x01 : 0x00,0);
  for (  Map.Entry<Integer,Integer> entry : settings.entrySet()) {
    header.put(entry.getKey().byteValue());
    header.putInt(entry.getValue());
  }
  BufferUtil.flipToFlush(header,0);
  lease.add(header,true);
  return lease;
}
