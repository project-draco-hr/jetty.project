{
  prepareProxy(new ProxyServlet());
  prepareServer(new EmptyHttpServlet());
  proxy.stop();
  try {
    client.newRequest("localhost",serverConnector.getLocalPort()).send().get(5,TimeUnit.SECONDS);
    Assert.fail();
  }
 catch (  ExecutionException x) {
    Assert.assertThat(x.getCause(),Matchers.instanceOf(ConnectException.class));
  }
}
