{
  ByteBuffer copyByteBuffer=dataInfo.asByteBuffer(false);
  ByteBufferDataInfo copyDataInfo=new ByteBufferDataInfo(copyByteBuffer,dataInfo.isClose(),dataInfo.isCompress()){
    @Override public void consume(    int delta){
      super.consume(delta);
      dataInfo.consume(delta);
    }
  }
;
  LOG.debug("Queuing last={} content {}",endRequest,copyDataInfo);
  HttpInputOverSPDY input=(HttpInputOverSPDY)getRequest().getHttpInput();
  input.offer(copyDataInfo,endRequest);
  input.content(copyDataInfo);
  if (endRequest)   input.shutdown();
  post(new Runnable(){
    @Override public void run(){
      LOG.debug("HTTP > {} bytes of content",dataInfo.length());
      if (state == State.HEADERS) {
        updateState(State.HEADERS_COMPLETE);
        handle();
      }
      updateState(State.CONTENT);
      handle();
    }
  }
);
}
