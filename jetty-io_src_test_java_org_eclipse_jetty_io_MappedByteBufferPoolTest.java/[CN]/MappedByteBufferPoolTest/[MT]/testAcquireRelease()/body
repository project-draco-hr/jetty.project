{
  MappedByteBufferPool bufferPool=new MappedByteBufferPool();
  ConcurrentMap<Integer,Queue<ByteBuffer>> buffers=bufferPool.buffersFor(true);
  int size=512;
  ByteBuffer buffer=bufferPool.acquire(size,true);
  assertTrue(buffer.isDirect());
  assertThat(buffer.capacity(),greaterThanOrEqualTo(size));
  assertTrue(buffers.isEmpty());
  bufferPool.release(buffer);
  assertEquals(1,buffers.size());
}
