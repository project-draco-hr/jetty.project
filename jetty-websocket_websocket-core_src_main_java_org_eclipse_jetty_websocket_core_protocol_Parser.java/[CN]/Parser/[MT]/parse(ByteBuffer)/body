{
  if (buffer.remaining() <= 0) {
    return;
  }
  try {
    while (parseFrame(buffer)) {
      LOG.debug("{} Parsed Frame: {}",policy.getBehavior(),frame);
      notifyFrame(frame);
      if (frame.isDataFrame() && frame.isFin()) {
        priorDataFrame=null;
      }
 else {
        priorDataFrame=frame;
      }
    }
  }
 catch (  WebSocketException e) {
    notifyWebSocketException(e);
  }
catch (  Throwable t) {
    notifyWebSocketException(new WebSocketException(t));
  }
 finally {
    buffer.position(buffer.limit());
  }
}
