{
  start(new EmptyServerHandler());
  String host="localhost";
  int port=connector.getLocalPort();
  HttpDestination destination=(HttpDestination)client.getDestination(scheme,host,port);
  final BlockingQueue<Connection> idleConnections=destination.getIdleConnections();
  Assert.assertEquals(0,idleConnections.size());
  final BlockingQueue<Connection> activeConnections=destination.getActiveConnections();
  Assert.assertEquals(0,activeConnections.size());
  ContentResponse response=client.newRequest(host,port).scheme(scheme).send().get(5,TimeUnit.SECONDS);
  Assert.assertEquals(200,response.status());
  connector.stop();
  TimeUnit.SECONDS.sleep(1);
  Assert.assertEquals(0,idleConnections.size());
  Assert.assertEquals(0,activeConnections.size());
}
