{
  final String query1="a=1&b=2";
  final String query2="a=3";
  final String query3="a=3&b=2";
  servlet1=new HttpServlet(){
    @Override protected void doGet(    HttpServletRequest req,    HttpServletResponse resp) throws ServletException, IOException {
      checkThat(query1,Matchers.equalTo(req.getQueryString()));
      req.getRequestDispatcher("/two?" + query2).forward(req,resp);
      checkThat(query1,Matchers.equalTo(req.getQueryString()));
      checkThat("1",Matchers.equalTo(req.getParameter("a")));
      checkThat("2",Matchers.equalTo(req.getParameter("b")));
    }
  }
;
  servlet2=new HttpServlet(){
    @Override protected void doGet(    HttpServletRequest req,    HttpServletResponse resp) throws ServletException, IOException {
      checkThat(query3,Matchers.equalTo(req.getQueryString()));
      checkThat("3",Matchers.equalTo(req.getParameter("a")));
      checkThat("2",Matchers.equalTo(req.getParameter("b")));
    }
  }
;
  prepare();
  String request="" + "GET /one?" + query1 + " HTTP/1.1\r\n"+ "Host: localhost\r\n"+ "Connection: close\r\n"+ "\r\n";
  String response=connector.getResponses(request);
  Assert.assertTrue(response,response.startsWith("HTTP/1.1 200"));
}
