{
  String war=context.getWar();
  if (war == null || war.length() <= 0)   throw new IllegalStateException("No location for webapp");
  resolveTempDirectory(context);
  Resource webApp=context.newResource(war);
  if (webApp.getAlias() != null) {
    LOG.debug(webApp + " anti-aliased to " + webApp.getAlias());
    webApp=context.newResource(webApp.getAlias());
  }
  if (!webApp.exists() || !webApp.isDirectory() || webApp.toString().startsWith("jar:"))   throw new IllegalStateException("Webapp does not exist or is not unpacked");
  context.setBaseResource(webApp);
  LOG.debug("webapp={}",webApp);
  Resource webInf=context.getWebInf();
  if (webInf == null || !webInf.exists())   throw new IllegalStateException("No WEB-INF");
  LOG.debug("webinf={}",webInf);
  Resource quickStartWebXml=webInf.addPath("quickstart-web.xml");
  if (!quickStartWebXml.exists())   throw new IllegalStateException("No WEB-INF/quickstart-web.xml");
  LOG.debug("quickStartWebXml={}",quickStartWebXml);
  context.getMetaData().setWebXml(quickStartWebXml);
}
