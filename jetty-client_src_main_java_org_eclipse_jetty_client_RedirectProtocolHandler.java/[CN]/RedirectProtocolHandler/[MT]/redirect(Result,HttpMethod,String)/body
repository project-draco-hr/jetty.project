{
  Request request=result.getRequest();
  HttpConversation conversation=client.getConversation(request.conversation());
  Integer redirects=(Integer)conversation.getAttribute(ATTRIBUTE);
  if (redirects == null)   redirects=0;
  if (redirects < client.getMaxRedirects()) {
    ++redirects;
    conversation.setAttribute(ATTRIBUTE,redirects);
    Request redirect=client.newRequest(request.conversation(),location);
    redirect.method(method);
    redirect.version(request.version());
    for (    HttpFields.Field header : request.headers())     redirect.header(header.getName(),header.getValue());
    redirect.content(request.content());
    redirect.send(new Response.Listener.Empty());
  }
 else {
    fail(result,new HttpResponseException("Max redirects exceeded " + redirects,result.getResponse()));
  }
}
