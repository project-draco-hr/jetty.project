{
  final Request request=result.getRequest();
  HttpConversation conversation=client.getConversation(request.getConversationID(),false);
  Integer redirects=(Integer)conversation.getAttribute(ATTRIBUTE);
  if (redirects == null)   redirects=0;
  if (redirects < client.getMaxRedirects()) {
    ++redirects;
    conversation.setAttribute(ATTRIBUTE,redirects);
    Request redirect=client.newRequest(request.getConversationID(),location);
    redirect.method(method);
    redirect.version(request.getVersion());
    for (    HttpFields.Field header : request.getHeaders())     redirect.header(header.getName(),header.getValue());
    redirect.content(request.getContent());
    redirect.listener(new Request.Listener.Empty(){
      @Override public void onBegin(      Request redirect){
        if (request.aborted())         redirect.abort(null);
      }
    }
);
    redirect.send(new Response.Listener.Empty());
  }
 else {
    fail(result,new HttpResponseException("Max redirects exceeded " + redirects,result.getResponse()));
  }
}
