{
  final AtomicInteger countCpuLogs=new AtomicInteger(0);
  final AtomicInteger countStateLogs=new AtomicInteger(0);
  ThreadMonitor monitor=new ThreadMonitor(1000,50,1){
    @Override protected void logCpuUsage(){
      countCpuLogs.incrementAndGet();
      super.logCpuUsage();
    }
    @Override protected void logThreadState(){
      countStateLogs.incrementAndGet();
      super.logThreadState();
    }
  }
;
  monitor.logCpuUsage(2000,1);
  monitor.start();
  Spinner spinner=new Spinner();
  Thread runner=new Thread(spinner);
  runner.start();
  Thread.sleep(DURATION);
  spinner.setDone();
  monitor.stop();
  assertTrue(countCpuLogs.get() >= 1);
  assertTrue(countStateLogs.get() >= 1);
}
