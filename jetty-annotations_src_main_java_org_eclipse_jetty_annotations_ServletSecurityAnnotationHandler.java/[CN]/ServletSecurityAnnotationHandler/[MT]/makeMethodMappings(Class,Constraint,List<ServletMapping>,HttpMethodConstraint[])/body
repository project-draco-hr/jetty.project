{
  List<ConstraintMapping> mappings=new ArrayList<ConstraintMapping>();
  for (  ServletMapping sm : servletMappings) {
    for (    String url : sm.getPathSpecs()) {
      ConstraintMapping defaultMapping=makeConstraintMapping(defaultConstraint,url,null,null);
      if (annotations != null && annotations.length > 0) {
        List<String> omissions=new ArrayList<String>();
        for (int i=0; i < annotations.length; i++) {
          Constraint methodConstraint=makeConstraint(servlet,annotations[i].rolesAllowed(),annotations[i].emptyRoleSemantic(),annotations[i].transportGuarantee());
          ConstraintMapping methodConstraintMapping=makeConstraintMapping(methodConstraint,url,annotations[i].value(),null);
          mappings.add(methodConstraintMapping);
          omissions.add(annotations[i].value());
        }
        defaultMapping.setMethodOmissions(omissions.toArray(new String[0]));
      }
      mappings.add(defaultMapping);
    }
  }
  return mappings;
}
