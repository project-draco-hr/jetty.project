{
  String utf8="Hello-\uC2B5@\uC39F\uC3A4\uC3BC\uC3A0\uC3A1-UTF-8!!";
  byte msg[]=StringUtil.getUtf8Bytes(utf8);
  List<WebSocketFrame> send=new ArrayList<>();
  int len=msg.length;
  byte opcode=OpCode.TEXT;
  byte mini[];
  for (int i=0; i < len; i++) {
    WebSocketFrame frame=new WebSocketFrame(opcode);
    mini=new byte[1];
    mini[0]=msg[i];
    frame.setPayload(mini);
    frame.setFin(!(i < (len - 1)));
    send.add(frame);
  }
  send.add(new CloseInfo(StatusCode.NORMAL).asFrame());
  List<WebSocketFrame> expect=new ArrayList<>();
  expect.add(new WebSocketFrame(OpCode.TEXT).setPayload(msg));
  expect.add(new CloseInfo(StatusCode.NORMAL).asFrame());
  Fuzzer fuzzer=new Fuzzer(this);
  try {
    fuzzer.connect();
    fuzzer.setSendMode(Fuzzer.SendMode.BULK);
    fuzzer.send(send);
    fuzzer.expect(expect);
  }
  finally {
    fuzzer.close();
  }
}
