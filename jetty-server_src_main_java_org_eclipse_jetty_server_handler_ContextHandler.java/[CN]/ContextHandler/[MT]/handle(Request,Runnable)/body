{
  ClassLoader old_classloader=null;
  Thread current_thread=null;
  Context old_context=null;
  try {
    old_context=__context.get();
    __context.set(_scontext);
    if (_classLoader != null) {
      current_thread=Thread.currentThread();
      old_classloader=current_thread.getContextClassLoader();
      current_thread.setContextClassLoader(_classLoader);
    }
    enterScope(request);
    runnable.run();
  }
  finally {
    exitScope(request);
    __context.set(old_context);
    if (old_classloader != null && current_thread != null) {
      current_thread.setContextClassLoader(old_classloader);
    }
  }
}
