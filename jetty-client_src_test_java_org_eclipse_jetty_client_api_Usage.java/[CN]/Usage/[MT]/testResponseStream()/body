{
  HttpClient client=new HttpClient();
  StreamingResponseListener listener=new StreamingResponseListener();
  client.newRequest("localhost",8080).send(listener);
  Response response=listener.get(5,TimeUnit.SECONDS);
  if (response.status() == 200) {
    byte[] buffer=new byte[256];
    try (InputStream input=listener.getInputStream()){
      while (true) {
        int read=input.read(buffer);
        if (read < 0)         break;
      }
    }
     try (FileOutputStream output=new FileOutputStream("")){
      listener.writeTo(output);
    }
   }
 else {
    response.abort();
  }
}
