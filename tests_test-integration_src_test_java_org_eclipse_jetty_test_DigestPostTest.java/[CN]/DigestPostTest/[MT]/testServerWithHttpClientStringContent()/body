{
  String srvUrl="http://127.0.0.1:" + ((NetworkConnector)_server.getConnectors()[0]).getLocalPort() + "/test/";
  HttpClient client=new HttpClient();
  try {
    AuthenticationStore authStore=client.getAuthenticationStore();
    authStore.addAuthentication(new DigestAuthentication(srvUrl,"test","testuser","password"));
    client.start();
    Request request=client.newRequest(srvUrl);
    request.method(HttpMethod.POST);
    request.content(new BytesContentProvider(__message.getBytes("UTF8")));
    _received=null;
    ContentResponse response=request.send().get(5,TimeUnit.SECONDS);
    Assert.assertEquals(__message,_received);
    Assert.assertEquals(200,response.getStatus());
  }
  finally {
    client.stop();
  }
}
