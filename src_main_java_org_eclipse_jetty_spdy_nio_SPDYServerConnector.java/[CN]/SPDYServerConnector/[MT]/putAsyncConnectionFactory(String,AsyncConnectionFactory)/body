{
synchronized (factories) {
    return factories.put(protocol,factory);
  }
}
