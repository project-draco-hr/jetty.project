{
  try {
    ByteChannel channel=null;
synchronized (this) {
      if (_connection == null && _exception == null && _channel != null) {
        channel=_channel;
        _channel=null;
      }
    }
    if (channel != null) {
      closeChannel(channel,WebSocketConnectionRFC6455.CLOSE_NO_CLOSE,"cancelled");
      return true;
    }
    return false;
  }
  finally {
    _done.countDown();
  }
}
