{
  Throwable failure=result.getFailure();
  Callback callback=null;
synchronized (lock) {
    this.result=result;
    if (result.isFailed() && this.failure == null) {
      this.failure=failure;
      if (chunk != null)       callback=chunk.callback;
    }
    responseLatch.countDown();
    resultLatch.countDown();
    lock.notifyAll();
  }
  if (LOG.isDebugEnabled()) {
    if (failure == null)     LOG.debug("Result success");
 else     LOG.debug("Result failure",failure);
  }
  if (callback != null)   callback.failed(failure);
}
