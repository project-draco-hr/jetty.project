{
  Class<?> type=metadata.getObjectType();
  if (typeMap.containsKey(type)) {
    StringBuilder err=new StringBuilder();
    err.append("Duplicate decoder for type: ");
    err.append(type);
    err.append(" (class ").append(metadata.getDecoderClass().getName());
    DecoderMetadata dup=typeMap.get(type);
    err.append(" duplicates ");
    err.append(dup.getDecoderClass().getName());
    err.append(")");
    throw new IllegalStateException(err.toString());
  }
  typeMap.put(type,metadata);
}
