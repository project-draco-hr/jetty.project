{
synchronized (_inputQ) {
    long now=System.currentTimeMillis();
    if (_blockingTimeoutAt >= 0 && !isAsync())     _blockingTimeoutAt=now + getHttpChannelState().getHttpChannel().getHttpConfiguration().getBlockingTimeout();
    int minRequestDataRate=_channelState.getHttpChannel().getHttpConfiguration().getMinRequestDataRate();
    if (minRequestDataRate > 0) {
      long period=now - _channelState.getHttpChannel().getRequest().getTimeStamp();
      if (period >= 1000) {
        long data_rate=_contentArrived / (now - _channelState.getHttpChannel().getRequest().getTimeStamp());
        if (data_rate < minRequestDataRate)         throw new IOException(String.format("Request Data rate %d < %d B/s",data_rate,minRequestDataRate));
      }
    }
    while (true) {
      Content item=nextContent();
      if (item != null) {
        int l=get(item,b,off,len);
        if (LOG.isDebugEnabled())         LOG.debug("{} read {} from {}",this,l,item);
        consumeNonContent();
        return l;
      }
      if (!_state.blockForContent(this))       return _state.noContent();
    }
  }
}
