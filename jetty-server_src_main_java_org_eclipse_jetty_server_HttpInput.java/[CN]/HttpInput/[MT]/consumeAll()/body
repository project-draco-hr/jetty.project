{
synchronized (lock()) {
    T item=_inputQ.peekUnsafe();
    while (!isShutdown() && !isEarlyEOF()) {
      while (item != null) {
        _inputQ.pollUnsafe();
        onContentConsumed(item);
        item=_inputQ.peekUnsafe();
        if (item == null)         onAllContentConsumed();
      }
      try {
        blockForContent();
        item=_inputQ.peekUnsafe();
        if (item == null)         break;
      }
 catch (      IOException e) {
        throw new RuntimeIOException(e);
      }
    }
  }
}
