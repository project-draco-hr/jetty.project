{
synchronized (lock()) {
    while (!_inputEOF && !_earlyEOF) {
      ByteBuffer content=_inputQ.peekUnsafe();
      while (content != null) {
        content.clear();
        _inputQ.pollUnsafe();
        onContentConsumed(content);
        content=_inputQ.peekUnsafe();
        if (content == null)         onAllContentConsumed();
      }
      try {
        System.err.println("consume block");
        blockForContent();
      }
 catch (      IOException e) {
        e.printStackTrace();
        throw new RuntimeIOException(e);
      }
    }
  }
}
