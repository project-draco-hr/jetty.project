{
  Content content=_inputQ.peekUnsafe();
  while (content != null && remaining(content) == 0) {
    _inputQ.pollUnsafe();
    content.succeeded();
    if (LOG.isDebugEnabled())     LOG.debug("{} consumed {}",this,content);
    if (content == EOF_CONTENT) {
      if (_listener == null)       _state=EOF;
 else {
        _state=AEOF;
        _channelState.onReadUnready();
        boolean woken=_channelState.onReadPossible();
        if (woken)         wake();
      }
    }
 else     if (content == EARLY_EOF_CONTENT)     _state=EARLY_EOF;
    content=_inputQ.peekUnsafe();
  }
  return content;
}
