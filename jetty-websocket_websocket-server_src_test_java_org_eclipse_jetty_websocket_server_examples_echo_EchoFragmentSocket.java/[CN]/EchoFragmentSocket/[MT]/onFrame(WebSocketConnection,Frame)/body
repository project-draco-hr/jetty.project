{
  if (!frame.getOpCode().isDataFrame()) {
    return;
  }
  ByteBuffer data=frame.getPayload();
  int half=data.remaining() / 2;
  ByteBuffer buf1=data.slice();
  ByteBuffer buf2=data.slice();
  buf1.limit(half);
  buf2.position(half);
  Callback<Void> nop=new FutureCallback<>();
  try {
switch (frame.getOpCode()) {
case BINARY:
      conn.write(null,nop,buf1);
    conn.write(null,nop,buf2);
  break;
case TEXT:
conn.write(null,nop,BufferUtil.toUTF8String(buf1));
conn.write(null,nop,BufferUtil.toUTF8String(buf2));
break;
}
}
 catch (IOException e) {
e.printStackTrace(System.err);
}
}
