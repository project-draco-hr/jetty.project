{
  final AtomicInteger userCount=new AtomicInteger();
  final File usersFile=initUsersText();
  PropertyUserStore store=new PropertyUserStore();
  store.setConfigPath(usersFile);
  store.registerUserListener(new PropertyUserStore.UserListener(){
    public void update(    String username,    Credential credential,    String[] roleArray){
      userCount.getAndIncrement();
    }
    public void remove(    String username){
    }
  }
);
  store.start();
  Assert.assertNotNull("Failed to retrieve UserIdentity directly from PropertyUserStore",store.getUserIdentity("tom"));
  Assert.assertNotNull("Failed to retrieve UserIdentity directly from PropertyUserStore",store.getUserIdentity("dick"));
  Assert.assertNotNull("Failed to retrieve UserIdentity directly from PropertyUserStore",store.getUserIdentity("harry"));
  Assert.assertEquals(3,userCount.get());
}
