{
  HttpExchange exchange=getHttpExchange();
  if (exchange == null) {
    callback.failed(new IOException("terminated"));
    return;
  }
  ByteBufferPool byteBufferPool=getHttpDestination().getHttpClient().getByteBufferPool();
  ByteBuffer original=frame.getData();
  int length=original.remaining();
  final ByteBuffer copy=byteBufferPool.acquire(length,original.isDirect());
  BufferUtil.clearToFill(copy);
  copy.put(original).flip();
  Callback delegate=new Callback(){
    @Override public boolean isNonBlocking(){
      return callback.isNonBlocking();
    }
    @Override public void succeeded(){
      byteBufferPool.release(copy);
      callback.succeeded();
    }
    @Override public void failed(    Throwable x){
      byteBufferPool.release(copy);
      callback.failed(x);
    }
  }
;
  if (responseContent(exchange,copy,delegate)) {
    if (frame.isEndStream())     responseSuccess(exchange);
  }
}
