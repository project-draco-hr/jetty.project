{
  HttpExchange exchange=getHttpExchange();
  if (exchange == null) {
    callback.failed(new IOException("terminated"));
    return;
  }
  ByteBufferPool byteBufferPool=getHttpDestination().getHttpClient().getByteBufferPool();
  ByteBuffer original=frame.getData();
  int length=original.remaining();
  final ByteBuffer copy=byteBufferPool.acquire(length,original.isDirect());
  BufferUtil.clearToFill(copy);
  copy.put(original);
  BufferUtil.flipToFlush(copy,0);
  CompletableCallback delegate=new CompletableCallback(){
    @Override public void succeeded(){
      byteBufferPool.release(copy);
      callback.succeeded();
      super.succeeded();
    }
    @Override public void failed(    Throwable x){
      byteBufferPool.release(copy);
      callback.failed(x);
      super.failed(x);
    }
    @Override public void resume(){
      if (frame.isEndStream())       responseSuccess(exchange);
    }
    @Override public void abort(    Throwable failure){
    }
  }
;
  responseContent(exchange,copy,delegate);
  if (!delegate.tryComplete())   delegate.resume();
}
