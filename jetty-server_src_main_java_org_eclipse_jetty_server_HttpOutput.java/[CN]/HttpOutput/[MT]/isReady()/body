{
  while (true) {
switch (_state.get()) {
case OPEN:
      return true;
case ASYNC:
    if (!_state.compareAndSet(State.ASYNC,State.READY))     continue;
  return true;
case READY:
return true;
case PENDING:
if (!_state.compareAndSet(State.PENDING,State.UNREADY)) continue;
return false;
case UNREADY:
return false;
case CLOSED:
return false;
}
}
}
