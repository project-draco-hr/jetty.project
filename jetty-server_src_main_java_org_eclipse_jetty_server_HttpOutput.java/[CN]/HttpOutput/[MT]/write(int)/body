{
  if (isClosed())   throw new EOFException("Closed");
  if (_aggregate == null)   _aggregate=_channel.getByteBufferPool().acquire(getBufferSize(),false);
  BufferUtil.append(_aggregate,(byte)b);
  _written++;
  boolean complete=_channel.getResponse().isAllContentWritten(_written);
  if (complete || BufferUtil.isFull(_aggregate)) {
    BlockingCallback callback=_channel.getWriteBlockingCallback();
    _channel.write(_aggregate,false,callback);
    callback.block();
    if (complete)     closed();
  }
}
