{
  if (_eof) {
    closed();
    _channel.getByteBufferPool().release(_buffer);
    return true;
  }
  _buffer.clear();
  int len=_in.read(_buffer);
  if (len < 0) {
    _eof=true;
    _in.close();
  }
 else   if (len < _buffer.capacity()) {
    int len2=_in.read(_buffer);
    if (len2 < 0)     _eof=true;
 else     len+=len2;
  }
  _buffer.flip();
  _channel.write(_buffer,_eof,this);
  return false;
}
