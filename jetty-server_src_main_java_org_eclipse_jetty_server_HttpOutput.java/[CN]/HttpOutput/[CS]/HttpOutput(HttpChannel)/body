{
  _channel=channel;
  _interceptor=channel;
  _writeBlock=new SharedBlockingCallback(){
    @Override protected long getIdleTimeout(){
      long bto=getHttpChannel().getHttpConfiguration().getBlockingTimeout();
      if (bto > 0)       return bto;
      if (bto < 0)       return -1;
      return _channel.getIdleTimeout();
    }
  }
;
  HttpConfiguration config=channel.getHttpConfiguration();
  _bufferSize=config.getOutputBufferSize();
  _commitSize=config.getOutputAggregationSize();
  if (_commitSize > _bufferSize) {
    LOG.warn("OutputAggregationSize {} exceeds bufferSize {}",_commitSize,_bufferSize);
    _commitSize=_bufferSize;
  }
}
