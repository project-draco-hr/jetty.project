{
  if (request.getAttribute("filename") != null)   throw new IllegalStateException();
  ServletOutputStream out=response.getOutputStream();
  AsyncContext ctx=(AsyncContext)request.getAttribute(AsyncContext.class.getName());
  ctx=request.startAsync();
  String fileName=request.getServletPath();
  request.setAttribute("filename",fileName);
  ctx.addListener(this);
  ctx.setTimeout(200);
}
