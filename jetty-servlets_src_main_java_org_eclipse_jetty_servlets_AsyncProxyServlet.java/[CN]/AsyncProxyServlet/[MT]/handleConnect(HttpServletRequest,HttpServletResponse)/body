{
  String uri=request.getRequestURI();
  context.log("CONNECT: " + uri);
  String port="";
  String host="";
  int c=uri.indexOf(':');
  if (c >= 0) {
    port=uri.substring(c + 1);
    host=uri.substring(0,c);
    if (host.indexOf('/') > 0)     host=host.substring(host.indexOf('/') + 1);
  }
  InetSocketAddress inetAddress=new InetSocketAddress(host,Integer.parseInt(port));
{
    InputStream in=request.getInputStream();
    OutputStream out=response.getOutputStream();
    Socket socket=new Socket(inetAddress.getAddress(),inetAddress.getPort());
    context.log("Socket: " + socket);
    response.setStatus(200);
    response.setHeader("Connection","close");
    response.flushBuffer();
    context.log("out<-in");
    IO.copyThread(socket.getInputStream(),out);
    context.log("in->out");
    IO.copy(in,socket.getOutputStream());
  }
}
