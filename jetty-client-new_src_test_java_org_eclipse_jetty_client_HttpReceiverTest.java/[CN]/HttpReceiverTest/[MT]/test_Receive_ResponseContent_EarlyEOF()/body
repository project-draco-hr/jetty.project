{
  String content1="0123456789";
  String content2="ABCDEF";
  endPoint.setInput("" + "HTTP/1.1 200 OK\r\n" + "Content-length: " + (content1.length() + content2.length()) + "\r\n"+ "\r\n"+ content1);
  BufferingResponseListener listener=new BufferingResponseListener();
  HttpExchange exchange=newExchange(listener);
  receiver.receive(exchange);
  endPoint.setInputEOF();
  receiver.receive(exchange);
  try {
    listener.await(5,TimeUnit.SECONDS);
    Assert.fail();
  }
 catch (  ExecutionException e) {
    Assert.assertTrue(e.getCause() instanceof EOFException);
  }
}
