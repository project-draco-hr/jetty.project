{
  TestHttpExchange exchange=new TestHttpExchange(){
    @Override protected void onRequestComplete() throws IOException {
      super.onRequestComplete();
      cancel();
    }
  }
;
  exchange.setAddress(newAddress());
  exchange.setRequestURI("/");
  getHttpClient().send(exchange);
  int status=exchange.waitForDone();
  assertThat("Exchange Status",status,is(HttpExchange.STATUS_CANCELLED));
  assertThat("Exchange.isResponseCompleted",exchange.isResponseCompleted(),is(false));
  assertThat("Exchange.isFailed",exchange.isFailed(),is(false));
  assertThat("Exchange.isAssociated",exchange.isAssociated(),is(false));
}
