{
  TestHttpExchange exchange=new TestHttpExchange(){
    @Override protected void onResponseComplete() throws IOException {
      super.onResponseComplete();
      cancel();
    }
  }
;
  exchange.setAddress(newAddress());
  exchange.setURI("/");
  getHttpClient().send(exchange);
  int status=exchange.waitForDone();
  assertTrue(exchange.isResponseCompleted());
  assertFalse(exchange.isFailed());
  assertFalse(exchange.isAssociated());
  assertEquals(HttpExchange.STATUS_COMPLETED,status);
}
