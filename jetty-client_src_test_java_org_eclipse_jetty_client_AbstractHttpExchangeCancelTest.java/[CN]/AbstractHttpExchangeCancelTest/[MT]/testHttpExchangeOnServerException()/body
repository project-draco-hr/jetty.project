{
  try {
    ((StdErrLog)Log.getLog()).setHideStacks(!Log.isDebugEnabled());
    TestHttpExchange exchange=new TestHttpExchange();
    exchange.setAddress(newAddress());
    exchange.setURI("/?action=throw");
    getHttpClient().send(exchange);
    int status=exchange.waitForDone();
    assertEquals(HttpExchange.STATUS_COMPLETED,status);
    assertTrue(exchange.isResponseCompleted());
    assertFalse(exchange.isFailed());
    assertFalse(exchange.isAssociated());
  }
  finally {
    ((StdErrLog)Log.getLog()).setHideStacks(false);
  }
}
