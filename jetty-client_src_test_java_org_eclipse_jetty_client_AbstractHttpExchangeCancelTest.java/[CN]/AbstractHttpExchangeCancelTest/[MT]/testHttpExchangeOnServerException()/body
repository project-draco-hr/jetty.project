{
  try {
    ((StdErrLog)Log.getLogger(HttpConnection.class)).setHideStacks(true);
    TestHttpExchange exchange=new TestHttpExchange();
    exchange.setAddress(newAddress());
    exchange.setRequestURI("/?action=throw");
    getHttpClient().send(exchange);
    int status=exchange.waitForDone();
    assertEquals(HttpExchange.STATUS_COMPLETED,status);
    assertTrue(exchange.isResponseCompleted());
    assertFalse(exchange.isFailed());
    assertFalse(exchange.isAssociated());
  }
  finally {
    ((StdErrLog)Log.getLogger(HttpConnection.class)).setHideStacks(false);
  }
}
