{
  request.setHandled(true);
  String action=httpRequest.getParameter("action");
  if (action != null) {
    if ("body".equals(action)) {
      ServletOutputStream output=httpResponse.getOutputStream();
      output.write("body".getBytes("UTF-8"));
    }
 else     if ("throw".equals(action)) {
      throw new ServletException();
    }
 else     if (action.startsWith("wait")) {
      long sleep=Long.valueOf(action.substring("wait".length()));
      long start=System.currentTimeMillis();
      try {
        Thread.sleep(sleep);
        long end=System.currentTimeMillis();
        assertTrue("Duration " + (end - start) + " >~ "+ sleep,(end - start) > sleep - 100);
      }
 catch (      InterruptedException x) {
        Thread.currentThread().interrupt();
      }
    }
  }
}
