{
  setControllerWriteExpectation(false);
  IStream stream=createStream();
  SynInfo synInfo=new SynInfo(headers,false,stream.getPriority());
  IStream pushStream=(IStream)stream.syn(synInfo).get(5,TimeUnit.SECONDS);
  assertThatStreamIsAssociatedWithPushStream(stream,pushStream);
  assertThatPushStreamIsInSession(pushStream);
  pushStream.headers(new HeadersInfo(headers,true));
  assertThatPushStreamIsNotInSession(pushStream);
  assertThatPushStreamIsHalfClosed(pushStream);
  assertThatPushStreamIsClosed(pushStream);
  assertThatStreamIsNotAssociatedWithPushStream(stream,pushStream);
}
