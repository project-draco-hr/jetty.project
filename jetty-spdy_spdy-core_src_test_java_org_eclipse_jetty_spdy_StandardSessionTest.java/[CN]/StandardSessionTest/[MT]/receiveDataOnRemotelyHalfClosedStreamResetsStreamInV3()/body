{
  setControllerWriteExpectationToFail(false);
  IStream stream=(IStream)session.syn(new SynInfo(false),new StreamFrameListener.Adapter()).get();
  stream.updateCloseState(true,false);
  assertThat("stream is half closed from remote side",stream.isHalfClosed(),is(true));
  stream.process(new ByteBufferDataInfo(ByteBuffer.allocate(256),true));
}
