{
  setControllerWriteExpectation(false);
  IStream stream=(IStream)session.syn(new SynInfo(new Fields(),false),new StreamFrameListener.Adapter());
  stream.updateCloseState(true,false);
  assertThat("stream is half closed from remote side",stream.isHalfClosed(),is(true));
  stream.process(new ByteBufferDataInfo(ByteBuffer.allocate(256),true));
}
