{
  if (context.isStarted()) {
    if (Log.isDebugEnabled()) {
      Log.debug("Cannot configure webapp after it is started");
    }
    return;
  }
  WebXmlProcessor processor=(WebXmlProcessor)context.getAttribute(WebXmlProcessor.WEB_PROCESSOR);
  if (processor == null) {
    processor=new WebXmlProcessor(context);
    context.setAttribute(WebXmlProcessor.WEB_PROCESSOR,processor);
  }
  String defaultsDescriptor=context.getDefaultsDescriptor();
  if (defaultsDescriptor != null && defaultsDescriptor.length() > 0) {
    Resource dftResource=Resource.newSystemResource(defaultsDescriptor);
    if (dftResource == null)     dftResource=context.newResource(defaultsDescriptor);
    processor.parseDefaults(dftResource.getURL());
    processor.processDefaults();
  }
}
