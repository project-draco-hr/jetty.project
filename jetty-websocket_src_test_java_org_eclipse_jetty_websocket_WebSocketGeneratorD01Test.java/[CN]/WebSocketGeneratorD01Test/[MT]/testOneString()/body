{
  byte[] data="Hell\uFF4F W\uFF4Frld".getBytes(StringUtil.__UTF8);
  _generator.addFrame((byte)0,(byte)0x04,data,0,data.length,0);
  _generator.flush();
  assertEquals(4,_out.get());
  assertEquals('H',_out.get());
  assertEquals('e',_out.get());
  assertEquals('l',_out.get());
  assertEquals('l',_out.get());
  assertEquals(0xEF,0xff & _out.get());
  assertEquals(0xBD,0xff & _out.get());
  assertEquals(0x8F,0xff & _out.get());
  assertEquals(' ',_out.get());
  assertEquals('W',_out.get());
  assertEquals(0xEF,0xff & _out.get());
  assertEquals(0xBD,0xff & _out.get());
  assertEquals(0x8F,0xff & _out.get());
  assertEquals('r',_out.get());
  assertEquals('l',_out.get());
  assertEquals('d',_out.get());
  assertEquals(0xff,0xff & _out.get());
}
