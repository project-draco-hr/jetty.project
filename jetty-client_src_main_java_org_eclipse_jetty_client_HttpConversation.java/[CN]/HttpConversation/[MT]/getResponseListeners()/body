{
  HttpExchange firstExchange=exchanges.peekFirst();
  HttpExchange lastExchange=exchanges.peekLast();
  if (firstExchange == lastExchange) {
    if (listener != null)     return Arrays.asList(listener);
 else     return firstExchange.getResponseListeners();
  }
 else {
    List<Response.ResponseListener> result=new ArrayList<>(lastExchange.getResponseListeners());
    if (listener != null)     result.add(listener);
 else     result.addAll(firstExchange.getResponseListeners());
    return result;
  }
}
