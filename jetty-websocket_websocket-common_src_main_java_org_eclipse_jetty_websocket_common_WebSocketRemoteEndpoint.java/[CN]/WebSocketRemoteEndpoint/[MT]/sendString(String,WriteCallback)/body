{
  lockMsg(MsgType.TEXT);
  try {
    TextFrame frame=new TextFrame().setPayload(text);
    if (LOG.isDebugEnabled()) {
      LOG.debug("sendString({},{})",BufferUtil.toDetailString(frame.getPayload()),callback);
    }
    sendFrame(frame,callback == null ? NOOP_CALLBACK : callback);
  }
  finally {
    unlockMsg();
  }
}
