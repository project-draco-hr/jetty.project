{
  FutureWriteCallback future=new FutureWriteCallback();
  try {
    connection.getIOState().assertOutputOpen();
    outgoing.outgoingFrame(frame,future);
  }
 catch (  IOException e) {
    future.writeFailed(e);
  }
  return future;
}
