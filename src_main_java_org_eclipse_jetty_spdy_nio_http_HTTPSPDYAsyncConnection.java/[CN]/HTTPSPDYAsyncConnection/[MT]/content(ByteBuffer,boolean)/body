{
switch (state) {
case REQUEST:
{
      buffer=byteBuffer.isDirect() ? new DirectNIOBuffer(byteBuffer,false) : new IndirectNIOBuffer(byteBuffer,false);
      state=endRequest ? State.FINAL : State.CONTENT;
      logger.debug("Accumulated first {} content bytes",byteBuffer.remaining());
      headerComplete();
      content(buffer);
      break;
    }
case CONTENT:
{
    buffer=byteBuffer.isDirect() ? new DirectNIOBuffer(byteBuffer,false) : new IndirectNIOBuffer(byteBuffer,false);
    state=endRequest ? State.FINAL : State.CONTENT;
    logger.debug("Accumulated {} content bytes",byteBuffer.remaining());
    content(buffer);
    break;
  }
default :
{
  throw new IllegalStateException();
}
}
}
