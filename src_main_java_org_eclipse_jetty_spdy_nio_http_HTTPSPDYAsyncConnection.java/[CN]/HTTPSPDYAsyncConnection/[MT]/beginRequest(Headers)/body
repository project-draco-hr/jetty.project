{
switch (state) {
case INITIAL:
{
      if (!headers.isEmpty()) {
        Headers.Header method=headers.get("method");
        Headers.Header uri=headers.get("url");
        Headers.Header version=headers.get("version");
        if (method == null || uri == null || version == null)         throw new HttpException(HttpStatus.BAD_REQUEST_400);
        state=State.REQUEST;
        String m=method.value();
        String u=uri.value();
        String v=version.value();
        logger.debug("HTTP {} {} {}",new Object[]{m,u,v});
        startRequest(new ByteArrayBuffer(m),new ByteArrayBuffer(u),new ByteArrayBuffer(v));
        headers(headers);
      }
      break;
    }
default :
{
    throw new IllegalStateException();
  }
}
}
