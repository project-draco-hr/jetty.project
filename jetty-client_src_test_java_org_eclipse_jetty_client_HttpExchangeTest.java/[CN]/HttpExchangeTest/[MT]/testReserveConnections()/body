{
  _httpClient=serverAndClientCreator.createClient(3000L,3500L,2000);
  final HttpDestination destination=_httpClient.getDestination(new Address("localhost",_port),_scheme.equalsIgnoreCase("https"));
  final org.eclipse.jetty.client.AbstractHttpConnection[] connections=new org.eclipse.jetty.client.AbstractHttpConnection[_maxConnectionsPerAddress];
  for (int i=0; i < _maxConnectionsPerAddress; i++) {
    connections[i]=destination.reserveConnection(200);
    assertNotNull(connections[i]);
    HttpExchange ex=new ContentExchange();
    ex.setURI(getBaseURI().resolve("?i=" + i));
    ex.setMethod(HttpMethod.GET);
    connections[i].send(ex);
  }
  Connection c=destination.reserveConnection(500);
  assertNull(c);
  destination.returnConnection(connections[0],false);
  c=destination.reserveConnection(500);
  assertNotNull(c);
  for (  AbstractHttpConnection httpConnection : connections) {
    destination.returnConnection(httpConnection,false);
  }
}
