{
  ContentExchange httpExchange=new ContentExchange();
  httpExchange.setURI(getBaseURI());
  httpExchange.setMethod(HttpMethods.POST);
  final String data="012345678901234567890123456789012345678901234567890123456789";
  InputStream content=new InputStream(){
    int _index=0;
    @Override public int read() throws IOException {
      if (_index >= data.length())       return -1;
      try {
        Thread.sleep(5);
      }
 catch (      InterruptedException e) {
        e.printStackTrace();
      }
      return data.charAt(_index++);
    }
    @Override public int read(    byte[] b,    int off,    int len) throws IOException {
      if (_index >= data.length())       return -1;
      try {
        Thread.sleep(25);
      }
 catch (      InterruptedException e) {
        e.printStackTrace();
      }
      int l=0;
      while (l < 5 && _index < data.length() && l < len)       b[off + l++]=(byte)data.charAt(_index++);
      return l;
    }
  }
;
  httpExchange.setRequestContentSource(content);
  _httpClient.send(httpExchange);
  int status=httpExchange.waitForDone();
  String result=httpExchange.getResponseContent();
  assertEquals(HttpExchange.STATUS_COMPLETED,status);
  assertEquals(data,result);
}
