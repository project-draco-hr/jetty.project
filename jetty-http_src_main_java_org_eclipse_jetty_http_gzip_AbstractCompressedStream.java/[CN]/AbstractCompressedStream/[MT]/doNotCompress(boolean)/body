{
  if (_compressedOutputStream != null)   throw new IllegalStateException("Compressed output stream is already assigned.");
  if (_out == null || _bOut != null) {
    if (sendVary)     setHeader("Vary",_vary);
    if (_wrapper.getETag() != null)     setHeader("ETag",_wrapper.getETag());
    _doNotCompress=true;
    _out=_response.getOutputStream();
    setContentLength();
    if (_bOut != null)     _out.write(_bOut.getBuf(),0,_bOut.getCount());
    _bOut=null;
  }
}
