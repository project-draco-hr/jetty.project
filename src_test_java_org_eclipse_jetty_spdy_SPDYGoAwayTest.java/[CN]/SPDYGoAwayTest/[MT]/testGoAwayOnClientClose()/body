{
  final CountDownLatch latch=new CountDownLatch(1);
  ServerSessionFrameListener serverSessionFrameListener=new ServerSessionFrameListener.Adapter(){
    @Override public Stream.FrameListener onSyn(    Stream stream,    SynInfo synInfo){
      stream.reply(new ReplyInfo(true));
      return null;
    }
    @Override public void onGoAway(    Session session,    GoAwayInfo goAwayInfo){
      Assert.assertEquals(0,goAwayInfo.getLastStreamId());
      Assert.assertSame(SessionStatus.OK,goAwayInfo.getSessionStatus());
      latch.countDown();
    }
  }
;
  Session session=startClient(startServer(serverSessionFrameListener),null);
  short version=(short)2;
  session.syn(version,new SynInfo(true),null);
  session.goAway(version);
  Assert.assertTrue(latch.await(5,TimeUnit.SECONDS));
}
