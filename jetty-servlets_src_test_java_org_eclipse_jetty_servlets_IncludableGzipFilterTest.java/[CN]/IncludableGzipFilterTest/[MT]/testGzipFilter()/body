{
  HttpTester request=new HttpTester();
  HttpTester response=new HttpTester();
  request.setMethod("GET");
  request.setVersion("HTTP/1.0");
  request.setHeader("Host","tester");
  request.setHeader("accept-encoding",compressionType.getEncodingHeader());
  request.setURI("/context/file.txt");
  ByteArrayBuffer reqsBuff=new ByteArrayBuffer(request.generate().getBytes());
  ByteArrayBuffer respBuff=tester.getResponses(reqsBuff);
  response.parse(respBuff.asArray());
  assertTrue(response.getMethod() == null);
  assertTrue(response.getHeader("Content-Encoding").equalsIgnoreCase(compressionType.getEncodingHeader()));
  assertEquals(HttpServletResponse.SC_OK,response.getStatus());
  InputStream testIn=null;
  ByteArrayInputStream compressedResponseStream=new ByteArrayInputStream(response.getContentBytes());
  if (compressionType.equals(CompressionType.GZIP)) {
    testIn=new GZIPInputStream(compressedResponseStream);
  }
 else   if (compressionType.equals(CompressionType.DEFLATE)) {
    testIn=new InflaterInputStream(compressedResponseStream);
  }
  ByteArrayOutputStream testOut=new ByteArrayOutputStream();
  IO.copy(testIn,testOut);
  assertEquals(__content,testOut.toString("ISO8859_1"));
}
