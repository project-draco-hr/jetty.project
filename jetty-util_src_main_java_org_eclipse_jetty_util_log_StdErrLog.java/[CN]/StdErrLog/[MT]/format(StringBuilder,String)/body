{
  if (msg == null)   buffer.append("null");
 else   for (int i=0; i < msg.length(); i++) {
    char c=msg.charAt(i);
    if (Character.isISOControl(c)) {
      if (c == '\n')       buffer.append('|');
 else       if (c == '\r')       buffer.append('<');
 else       buffer.append('?');
    }
 else     buffer.append(c);
  }
}
