{
  String nameSegment=name;
  while ((nameSegment != null) && (nameSegment.length() > 0)) {
    String levelStr=props.getProperty(nameSegment + ".LEVEL");
    if (levelStr == null) {
      int idx=nameSegment.lastIndexOf('.');
      if (idx >= 0) {
        nameSegment=nameSegment.substring(0,idx);
      }
 else {
        nameSegment=null;
      }
    }
 else {
      if ("ALL".equalsIgnoreCase(levelStr.trim())) {
        return LEVEL_ALL;
      }
 else       if ("DEBUG".equalsIgnoreCase(levelStr.trim())) {
        return LEVEL_DEBUG;
      }
 else       if ("INFO".equalsIgnoreCase(levelStr.trim())) {
        return LEVEL_INFO;
      }
 else       if ("WARN".equalsIgnoreCase(levelStr.trim())) {
        return LEVEL_WARN;
      }
    }
  }
  return LEVEL_INFO;
}
