{
  super(websocket);
  ServerEndpoint anno=websocket.getAnnotation(ServerEndpoint.class);
  if (anno == null) {
    throw new InvalidWebSocketException("Unsupported WebSocket object, missing @" + ServerEndpoint.class + " annotation");
  }
  this.endpoint=anno;
  this.config=new AnnotatedServerEndpointConfig(websocket,anno);
  this.decoders=new DecoderFactory(container.getDecoderFactory());
  this.encoders=new EncoderFactory(container.getEncoderFactory());
  this.decoders.registerAll(anno.decoders());
  this.encoders.registerAll(anno.encoders());
}
