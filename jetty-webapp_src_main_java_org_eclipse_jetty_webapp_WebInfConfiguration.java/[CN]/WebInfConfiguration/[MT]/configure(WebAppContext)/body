{
  if (context.isStarted()) {
    if (Log.isDebugEnabled()) {
      Log.debug("Cannot configure webapp " + context + " after it is started");
    }
    return;
  }
  Resource web_inf=context.getWebInf();
  if (web_inf != null && web_inf.isDirectory() && context.getClassLoader() instanceof WebAppClassLoader) {
    Resource classes=web_inf.addPath("classes/");
    if (classes.exists())     ((WebAppClassLoader)context.getClassLoader()).addClassPath(classes.toString());
    Resource lib=web_inf.addPath("lib/");
    if (lib.exists() || lib.isDirectory())     ((WebAppClassLoader)context.getClassLoader()).addJars(lib);
  }
  List<URL> urls=(List<URL>)context.getAttribute(RESOURCE_URLS);
  if (urls != null) {
    Resource[] resources=new Resource[urls.size() + 1];
    int i=0;
    resources[i++]=context.getBaseResource();
    for (    URL url : urls)     resources[i++]=Resource.newResource(url);
    ResourceCollection collection=new ResourceCollection(resources);
    context.setBaseResource(collection);
  }
}
