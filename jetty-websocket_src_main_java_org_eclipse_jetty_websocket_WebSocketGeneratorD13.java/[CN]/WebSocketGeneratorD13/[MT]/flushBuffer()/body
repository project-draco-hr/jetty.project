{
  if (!_endp.isOpen())   throw new EofException();
  if (_buffer != null) {
    int flushed=_endp.flush(_buffer);
    if (_closed && _buffer.length() == 0)     _endp.shutdownOutput();
    return flushed;
  }
  return 0;
}
