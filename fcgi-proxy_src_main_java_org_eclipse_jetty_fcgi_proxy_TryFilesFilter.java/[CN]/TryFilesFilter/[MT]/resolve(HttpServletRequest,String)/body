{
  String path=request.getRequestURI();
  String query=request.getQueryString();
  String result=value.replaceAll("\\$path",path);
  result=result.replaceAll("\\$query",query == null ? "" : query);
  if (query == null && (result.endsWith("?") || result.endsWith("&")))   result=result.substring(0,result.length() - 1);
  return result;
}
