{
  if (LOG.isDebugEnabled()) {
    LOG.debug("write(context,{},byte[],{},{})",callback,offset,len);
  }
  if (len == 0) {
    return;
  }
  ByteBuffer raw=bufferPool.acquire(len + FrameGenerator.OVERHEAD,false);
  BufferUtil.clearToFill(raw);
  DataFrame frame=new DataFrame();
  frame.setPayload(ByteBuffer.wrap(buf,offset,len));
  frame.setFin(true);
  generator.generate(raw,frame);
  BufferUtil.flipToFlush(raw,0);
  writeRaw(context,callback,raw);
}
