{
  try {
    while (true) {
      int filled=getEndPoint().fill(buffer);
      if (filled == 0) {
        break;
      }
      if (LOG.isDebugEnabled() && (filled > 0)) {
        LOG.debug("Filled {} bytes - {}",filled,BufferUtil.toDetailString(buffer));
      }
      parser.parse(buffer);
    }
  }
 catch (  IOException e) {
    LOG.warn(e);
    terminateConnection(StatusCode.PROTOCOL,e.getMessage());
  }
catch (  CloseException e) {
    LOG.warn(e);
    terminateConnection(e.getStatusCode(),e.getMessage());
  }
}
