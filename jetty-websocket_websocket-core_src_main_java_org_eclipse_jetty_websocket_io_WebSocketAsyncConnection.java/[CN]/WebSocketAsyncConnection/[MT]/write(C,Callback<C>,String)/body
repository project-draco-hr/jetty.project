{
  if (LOG.isDebugEnabled()) {
    LOG.debug("write(context,{},message.length:{})",callback,message.length());
  }
  WebSocketFrame frame=FrameBuilder.text(message).fin(true).asFrame();
  FrameBytes bytes=new FrameBytes<C>(callback,context,frame,buffer);
  WebSocketFrame frame=FrameBuilder.text(messages[i]).fin(true).asFrame();
  raw[i]=bufferPool.acquire(policy.getBufferSize(),false);
  BufferUtil.clearToFill(raw[i]);
  generator.generate(raw[i],frame);
  BufferUtil.flipToFlush(raw[i],0);
  writeRaw(context,callback,raw);
}
