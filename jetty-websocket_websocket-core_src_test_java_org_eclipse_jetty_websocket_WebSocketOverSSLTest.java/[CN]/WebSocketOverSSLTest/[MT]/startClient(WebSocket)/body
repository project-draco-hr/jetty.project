{
  Assert.assertTrue(_server.isStarted());
  _threadPool=new QueuedThreadPool();
  _threadPool.setName("wsc-" + _threadPool.getName());
  _threadPool.start();
  _wsFactory=new WebSocketClientFactory(_threadPool,new ZeroMaskGen());
  SslContextFactory cf=_wsFactory.getSslContextFactory();
  cf.setKeyStorePath(MavenTestingUtils.getTestResourceFile("keystore").getAbsolutePath());
  cf.setKeyStorePassword("storepwd");
  cf.setKeyManagerPassword("keypwd");
  _wsFactory.start();
  WebSocketClient client=new WebSocketClient(_wsFactory);
  _connection=client.open(new URI("wss://localhost:" + _port),webSocket).get(5,TimeUnit.SECONDS);
}
