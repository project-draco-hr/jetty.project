{
  if (windowUpdate < 0)   throw new IllegalArgumentException("Invalid window update: " + windowUpdate);
  boolean both=false;
  if (streamId < 0) {
    both=true;
    streamId=-streamId;
  }
  if (both) {
    ByteBuffer header=generateHeader(lease,FrameType.WINDOW_UPDATE,4,Flag.NONE,0);
    header.putInt(windowUpdate);
    BufferUtil.flipToFlush(header,0);
    lease.append(header,true);
  }
  ByteBuffer header=generateHeader(lease,FrameType.WINDOW_UPDATE,4,Flag.NONE,streamId);
  header.putInt(windowUpdate);
  BufferUtil.flipToFlush(header,0);
  lease.append(header,true);
}
