{
  final AtomicBoolean running=new AtomicBoolean(true);
  Thread thread=new Thread(){
    public void run(){
      while (running.get()) {
        try {
          TimeUnit.MILLISECONDS.sleep(200);
          SelectableEndPoint endp=_endp;
          if (endp != null && endp.isOpen())           endp.asyncDispatch();
        }
 catch (        Exception e) {
          e.printStackTrace();
        }
      }
    }
  }
;
  try {
    thread.start();
    testSuspendResume();
  }
  finally {
    running.set(false);
    thread.join();
  }
}
