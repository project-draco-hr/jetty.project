{
  String jetty_home=System.getProperty("jetty.home","../jetty-server/src/main/config");
  System.setProperty("jetty.home",jetty_home);
  Server server=new Server();
  SelectChannelConnector connector0=new SelectChannelConnector(server);
  connector0.setPort(8080);
  connector0.setIdleTimeout(30000);
  SslContextFactory sslContextFactory=new SslContextFactory();
  sslContextFactory.setKeyStorePath(jetty_home + "/etc/keystore");
  sslContextFactory.setKeyStorePassword("OBF:1vny1zlo1x8e1vnw1vn61x8g1zlu1vn4");
  sslContextFactory.setKeyManagerPassword("OBF:1u2u1wml1z7s1z7a1wnl1u2g");
  SelectChannelConnector connector1=new SelectChannelConnector(server,sslContextFactory);
  connector1.setPort(8443);
  HttpChannelConfig config=new HttpChannelConfig();
  config.setSecureScheme("https");
  config.setSecurePort(8443);
  config.setOutputBufferSize(32768);
  config.setRequestHeaderSize(8192);
  config.setResponseHeaderSize(8192);
  config.addCustomizer(new ForwardedRequestCustomizer());
  config.addCustomizer(new SecureRequestCustomizer());
  HttpConnectionFactory http=new HttpConnectionFactory(config);
  http.setInputBufferSize(16384);
  PushStrategy push=new ReferrerPushStrategy();
  HTTPSPDYServerConnectionFactory spdy2=new HTTPSPDYServerConnectionFactory(2,config,push);
  spdy2.setInputBufferSize(8192);
  spdy2.setInitialWindowSize(32768);
  HTTPSPDYServerConnectionFactory spdy3=new HTTPSPDYServerConnectionFactory(3,config,push);
  spdy2.setInputBufferSize(8192);
  NPNServerConnectionFactory npn=new NPNServerConnectionFactory(spdy3.getProtocol(),spdy2.getProtocol(),http.getProtocol());
  npn.setDefaultProtocol(http.getProtocol());
  npn.setInputBufferSize(1024);
  SslConnectionFactory ssl=new SslConnectionFactory(sslContextFactory,npn.getProtocol());
  QueuedThreadPool threadPool=new QueuedThreadPool();
  threadPool.setMaxThreads(256);
  TimerScheduler scheduler=new TimerScheduler();
  ByteBufferPool bufferPool=new ArrayByteBufferPool(32,4096,32768);
  SelectChannelConnector connector2=new SelectChannelConnector(server,threadPool,scheduler,bufferPool,2,2,ssl,npn,spdy3,spdy2,http);
  connector2.setDefaultProtocol("ssl-npn");
  connector2.setPort(8444);
  connector2.setIdleTimeout(30000);
  connector2.setSoLingerTime(10000);
  server.setConnectors(new Connector[]{connector0,connector1,connector2});
  server.setHandler(new HelloHandler());
  server.start();
  server.dumpStdErr();
  server.join();
}
