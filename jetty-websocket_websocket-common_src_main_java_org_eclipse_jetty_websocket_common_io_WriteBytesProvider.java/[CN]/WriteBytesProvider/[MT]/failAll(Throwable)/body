{
  List<FrameEntry> callbacks=new ArrayList<>();
synchronized (this) {
    if (active != null) {
      FrameEntry entry=active;
      active=null;
      callbacks.add(entry);
    }
    callbacks.addAll(past);
    callbacks.addAll(queue);
    past.clear();
    queue.clear();
  }
  if (!callbacks.isEmpty()) {
    flushCallback.failed(t);
    for (    FrameEntry entry : callbacks) {
      entry.notifyFailed(t);
    }
  }
}
