{
synchronized (this) {
    boolean notified=false;
    if (active != null) {
      active.notifyFailure(t);
      notified=true;
    }
    failure=t;
    for (    FrameEntry fe : past) {
      fe.notifyFailure(t);
      notified=true;
    }
    past.clear();
    for (    FrameEntry fe : queue) {
      fe.notifyFailure(t);
      notified=true;
    }
    queue.clear();
    if (notified) {
      flushCallback.failed(t);
    }
  }
}
