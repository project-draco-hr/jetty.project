{
  boolean notified=false;
  if (active != null) {
    FrameEntry entry=active;
    active=null;
    entry.notifyFailure(t);
    notified=true;
  }
  failure=t;
  while (!past.isEmpty()) {
    FrameEntry entry=past.pop();
    entry.notifyFailure(t);
    notified=true;
  }
  while (!queue.isEmpty()) {
    FrameEntry entry=queue.pop();
    entry.notifyFailure(t);
    notified=true;
  }
  if (notified) {
    flushCallback.failed(t);
  }
}
