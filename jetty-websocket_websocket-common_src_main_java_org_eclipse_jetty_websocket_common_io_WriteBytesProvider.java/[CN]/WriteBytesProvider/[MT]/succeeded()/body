{
  List<FrameEntry> callbacks=new ArrayList<>();
synchronized (this) {
    if ((active != null) && (active.frame.remaining() <= 0)) {
      FrameEntry entry=active;
      active=null;
      callbacks.add(entry);
    }
    callbacks.addAll(past);
    past.clear();
  }
  flushCallback.succeeded();
  for (  FrameEntry entry : callbacks) {
    entry.notifySucceeded();
  }
}
