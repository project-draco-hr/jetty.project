{
  if (_noContent)   throw new IllegalStateException("NO CONTENT");
  if (_last || _state == STATE_END) {
    Log.debug("Ignoring extra content {}",content);
    content.clear();
    return;
  }
  _last=last;
  if (_content != null && _content.length() > 0 || _bufferChunked) {
    if (!_endp.isOpen())     throw new EofException();
    flushBuffer();
    if (_content != null && _content.length() > 0 || _bufferChunked)     throw new IllegalStateException("FULL");
  }
  _content=content;
  _contentWritten+=content.length();
  if (_head) {
    content.clear();
    _content=null;
  }
 else   if (_endp != null && _buffer == null && content.length() > 0 && _last) {
    _bypass=true;
  }
 else {
    if (_buffer == null)     _buffer=_buffers.getBuffer(_contentBufferSize);
    int len=_buffer.put(_content);
    _content.skip(len);
    if (_content.length() == 0)     _content=null;
  }
}
