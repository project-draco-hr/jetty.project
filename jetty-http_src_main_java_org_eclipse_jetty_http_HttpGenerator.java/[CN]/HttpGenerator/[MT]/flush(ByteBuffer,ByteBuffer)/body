{
switch (_state) {
case START:
    return Result.NEED_COMMIT;
case CHUNKING:
  if (chunk == null)   return Result.NEED_CHUNK;
if (BufferUtil.hasContent(buffer)) {
  BufferUtil.clear(chunk);
  prepareChunk(chunk,buffer.remaining());
}
}
return Result.FLUSH;
}
