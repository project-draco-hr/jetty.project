{
  Server server=new Server();
  WebAppContext wac=new WebAppContext();
  wac.setServer(server);
  InjectionCollection injections=new InjectionCollection();
  wac.setAttribute(InjectionCollection.INJECTION_COLLECTION,injections);
  InitialContext ic=new InitialContext();
  Context comp=(Context)ic.lookup("java:comp");
  Context env=comp.createSubcontext("env");
  org.eclipse.jetty.plus.jndi.EnvEntry resourceA=new org.eclipse.jetty.plus.jndi.EnvEntry(server,"resA",new Integer(1000),false);
  org.eclipse.jetty.plus.jndi.EnvEntry resourceB=new org.eclipse.jetty.plus.jndi.EnvEntry(server,"resB",new Integer(2000),false);
  AnnotationIntrospector introspector=new AnnotationIntrospector();
  ResourcesAnnotationHandler handler=new ResourcesAnnotationHandler(wac);
  introspector.registerHandler(handler);
  introspector.introspect(ResourceA.class);
  introspector.introspect(ResourceB.class);
  assertEquals(resourceA.getObjectToBind(),env.lookup("peach"));
  assertEquals(resourceB.getObjectToBind(),env.lookup("pear"));
}
