{
  _contextHandler.setContextPath("/foo");
  String request="GET /foo/servletPath HTTP/1.1\r\n" + "Host: localhost\r\n" + "Content-Type: application/x-www-form-urlencoded\r\n"+ "Connection: close\r\n"+ "\r\n";
  String responseString=_connector.getResponses(request);
  BufferedReader br=new BufferedReader(new StringReader(responseString));
  Assert.assertEquals("HTTP/1.1 200 OK",br.readLine());
  br.readLine();
  br.readLine();
  br.readLine();
  Assert.assertEquals("servlet gets right path","doGet:getServletPath:/servletPath",br.readLine());
  Assert.assertEquals("async context gets right path in get","doGet:async:getServletPath:/servletPath",br.readLine());
  Assert.assertEquals("async context gets right path in async","async:run:attr:servletPath:/servletPath",br.readLine());
}
