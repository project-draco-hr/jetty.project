{
  byte payload[]=new byte[10240];
  Arrays.fill(payload,(byte)0x44);
  WebSocketFrame frame=new BinaryFrame(payload);
  int windowSize=1024;
  WindowHelper helper=new WindowHelper(windowSize);
  ByteBuffer completeBuffer=helper.generateWindowed(frame);
  int expectedHeaderSize=4;
  int expectedSize=payload.length + expectedHeaderSize;
  int expectedParts=(int)Math.ceil((double)(payload.length) / windowSize);
  helper.assertTotalParts(expectedParts);
  helper.assertTotalBytes(payload.length + expectedHeaderSize);
  Assert.assertThat("Generated Buffer",completeBuffer.remaining(),is(expectedSize));
}
