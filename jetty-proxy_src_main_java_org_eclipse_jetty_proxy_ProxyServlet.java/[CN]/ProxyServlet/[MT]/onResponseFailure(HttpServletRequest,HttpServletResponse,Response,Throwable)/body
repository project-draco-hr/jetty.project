{
  _log.debug(getRequestId(request) + " proxying failed",failure);
  if (!response.isCommitted()) {
    if (failure instanceof TimeoutException)     response.setStatus(HttpServletResponse.SC_GATEWAY_TIMEOUT);
 else     response.setStatus(HttpServletResponse.SC_BAD_GATEWAY);
  }
  AsyncContext asyncContext=request.getAsyncContext();
  asyncContext.complete();
}
