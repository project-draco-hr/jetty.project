{
  for (  HttpField field : proxyResponse.getHeaders()) {
    String headerName=field.getName();
    String lowerHeaderName=headerName.toLowerCase(Locale.ENGLISH);
    if (HOP_HEADERS.contains(lowerHeaderName))     continue;
    String newHeaderValue=filterResponseHeader(request,headerName,field.getValue());
    if (newHeaderValue == null || newHeaderValue.trim().length() == 0)     continue;
    response.setHeader(headerName,newHeaderValue);
  }
}
