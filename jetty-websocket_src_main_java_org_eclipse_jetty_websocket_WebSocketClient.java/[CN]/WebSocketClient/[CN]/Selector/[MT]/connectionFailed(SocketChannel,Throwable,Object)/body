{
  if (!(attachment instanceof WebSocketHolder))   super.connectionFailed(channel,ex,attachment);
 else {
    __log.debug(ex);
    WebSocketHolder holder=(WebSocketHolder)attachment;
    holder.cancel();
    holder.getWebSocket().onError(ex.toString(),ex);
  }
}
