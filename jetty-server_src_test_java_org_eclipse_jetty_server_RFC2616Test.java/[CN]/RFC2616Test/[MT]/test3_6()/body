{
  String response=null;
  try {
    int offset=0;
    offset=0;
    connector.reopen();
    response=connector.getResponses("GET /R1 HTTP/1.1\n" + "Host: localhost\n" + "Transfer-Encoding: chunked,identity\n"+ "Content-Type: text/plain\n"+ "\015\012"+ "5;\015\012"+ "123\015\012\015\012"+ "0;\015\012\015\012");
    checkContains(response,offset,"HTTP/1.1 400 Bad","Chunked last");
    offset=0;
    connector.reopen();
    response=connector.getResponses("GET /R1 HTTP/1.1\n" + "Host: localhost\n" + "Transfer-Encoding: chunked\n"+ "Content-Type: text/plain\n"+ "\n"+ "2;\n"+ "12\n"+ "3;\n"+ "345\n"+ "0;\n\n"+ "GET /R2 HTTP/1.1\n"+ "Host: localhost\n"+ "Transfer-Encoding: chunked\n"+ "Content-Type: text/plain\n"+ "\n"+ "4;\n"+ "6789\n"+ "5;\n"+ "abcde\n"+ "0;\n\n"+ "GET /R3 HTTP/1.1\n"+ "Host: localhost\n"+ "Connection: close\n"+ "\n");
    offset=checkContains(response,offset,"HTTP/1.1 200","3.6.1 Chunking");
    offset=checkContains(response,offset,"12345","3.6.1 Chunking");
    offset=checkContains(response,offset,"HTTP/1.1 200","3.6.1 Chunking");
    offset=checkContains(response,offset,"6789abcde","3.6.1 Chunking");
    offset=checkContains(response,offset,"/R3","3.6.1 Chunking");
    offset=0;
    connector.reopen();
    response=connector.getResponses("POST /R1 HTTP/1.1\n" + "Host: localhost\n" + "Transfer-Encoding: chunked\n"+ "Content-Type: text/plain\n"+ "\n"+ "3;\n"+ "fgh\n"+ "3;\n"+ "Ijk\n"+ "0;\n\n"+ "POST /R2 HTTP/1.1\n"+ "Host: localhost\n"+ "Transfer-Encoding: chunked\n"+ "Content-Type: text/plain\n"+ "\n"+ "4;\n"+ "lmno\n"+ "5;\n"+ "Pqrst\n"+ "0;\n\n"+ "GET /R3 HTTP/1.1\n"+ "Host: localhost\n"+ "Connection: close\n"+ "\n");
    checkNotContained(response,"HTTP/1.1 100","3.6.1 Chunking");
    offset=checkContains(response,offset,"HTTP/1.1 200","3.6.1 Chunking");
    offset=checkContains(response,offset,"fghIjk","3.6.1 Chunking");
    offset=checkContains(response,offset,"HTTP/1.1 200","3.6.1 Chunking");
    offset=checkContains(response,offset,"lmnoPqrst","3.6.1 Chunking");
    offset=checkContains(response,offset,"/R3","3.6.1 Chunking");
    offset=0;
    connector.reopen();
    response=connector.getResponses("GET /R1 HTTP/1.1\n" + "Host: localhost\n" + "Transfer-Encoding: chunked\n"+ "Content-Type: text/plain\n"+ "Connection: keep-alive\n"+ "\n"+ "3;\n"+ "123\n"+ "3;\n"+ "456\n"+ "0;\n\n"+ "GET /R2 HTTP/1.1\n"+ "Host: localhost\n"+ "Connection: close\n"+ "\n");
    offset=checkContains(response,offset,"HTTP/1.1 200","3.6.1 Chunking") + 10;
    offset=checkContains(response,offset,"123456","3.6.1 Chunking");
    offset=checkContains(response,offset,"/R2","3.6.1 Chunking") + 10;
  }
 catch (  Exception e) {
    e.printStackTrace();
    assertTrue(false);
    if (response != null)     System.err.println(response);
  }
}
