{
  final Session session=stream.getSession();
  session.close(ErrorCodes.PROTOCOL_ERROR,reason,new Callback.Adapter(){
    @Override public void failed(    Throwable x){
      ((ISession)session).disconnect();
    }
  }
);
}
