{
  if (LOG.isDebugEnabled())   LOG.debug("Processing {} on {}",frame,stream);
  HttpChannelOverHTTP2 channel=channels.poll();
  if (channel != null) {
    channel.getHttp2Transport().setStream((IStream)stream);
    if (LOG.isDebugEnabled())     LOG.debug("recycled :{}",channel);
  }
 else {
    channel=new HttpChannelOverHTTP2(connector,httpConfiguration,endPoint,new HttpTransportOverHTTP2(connector,httpConfiguration,endPoint,(IStream)stream)){
      @Override public void onCompleted(){
        super.onCompleted();
        recycle();
        channels.add(this);
      }
    }
;
  }
  stream.setAttribute(IStream.CHANNEL_ATTRIBUTE,channel);
  channel.onRequest(frame);
  return frame.isEndStream() ? null : this;
}
