{
  WebSocketClient client=new WebSocketClient(_factory);
  try {
    client.open(new URI("ws://localhost"),new WebSocket(){
      public void onOpen(      Connection connection){
      }
      public void onClose(      int closeCode,      String message){
        System.out.println("closeCode = " + closeCode);
      }
    }
).get(5,TimeUnit.SECONDS);
  }
 catch (  ExecutionException x) {
    Assert.assertTrue(x.getCause() instanceof ConnectException);
  }
  try {
    client.open(new URI("wss://localhost"),new WebSocket(){
      public void onOpen(      Connection connection){
      }
      public void onClose(      int closeCode,      String message){
      }
    }
).get(5,TimeUnit.SECONDS);
  }
 catch (  ExecutionException x) {
    Assert.assertTrue(x.getCause() instanceof ConnectException);
  }
}
