{
  byte buf[]=toByteArray("0x82 0x0d 0x01 0x81","Hello world");
  LinkedList<WebSocketFrame> frames=asFrames(buf);
  Assert.assertThat("Frame count",frames.size(),is(1));
  MuxEventCapture capture=parseMuxFrames(frames);
  capture.assertFrameCount(1);
  MuxedFrame mux;
  mux=capture.getFrames().pop();
  String prefix="MuxFrame[0]";
  Assert.assertThat(prefix + ".channelId",mux.getChannelId(),is(1L));
  Assert.assertThat(prefix + ".fin",mux.isFin(),is(true));
  Assert.assertThat(prefix + ".rsv1",mux.isRsv1(),is(false));
  Assert.assertThat(prefix + ".rsv2",mux.isRsv2(),is(false));
  Assert.assertThat(prefix + ".rsv3",mux.isRsv3(),is(false));
  Assert.assertThat(prefix + ".masked",mux.isMasked(),is(false));
  Assert.assertThat(prefix + ".opcode",mux.getOpCode(),is(OpCode.TEXT));
  String payload=mux.getPayloadAsUTF8();
  Assert.assertThat(prefix + ".payload/text",payload,is("Hello world"));
}
