{
  HttpConnectionOverHTTP connection=getHttpConnection();
  EndPoint endPoint=connection.getEndPoint();
  HttpClient client=getHttpDestination().getHttpClient();
  ByteBufferPool bufferPool=client.getByteBufferPool();
  ByteBuffer buffer=bufferPool.acquire(client.getResponseBufferSize(),true);
  try {
    while (true) {
      if (connection.isClosed()) {
        LOG.debug("{} closed",connection);
        break;
      }
 else {
        int read=endPoint.fill(buffer);
        LOG.debug("Read {} bytes from {}",read,endPoint);
        if (read > 0) {
          parse(buffer);
        }
 else         if (read == 0) {
          fillInterested();
          break;
        }
 else {
          shutdown();
          break;
        }
      }
    }
  }
 catch (  EofException x) {
    LOG.ignore(x);
    failAndClose(x);
  }
catch (  Exception x) {
    LOG.debug(x);
    failAndClose(x);
  }
 finally {
    bufferPool.release(buffer);
  }
}
