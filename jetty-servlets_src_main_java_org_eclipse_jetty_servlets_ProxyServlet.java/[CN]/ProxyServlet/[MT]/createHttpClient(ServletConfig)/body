{
  HttpClient client=new HttpClient();
  client.setConnectorType(HttpClient.CONNECTOR_SELECT_CHANNEL);
  String t=config.getInitParameter("maxThreads");
  if (t != null) {
    client.setThreadPool(new QueuedThreadPool(Integer.parseInt(t)));
  }
 else {
    client.setThreadPool(new QueuedThreadPool());
  }
  ((QueuedThreadPool)client.getThreadPool()).setName(config.getServletName());
  t=config.getInitParameter("maxConnections");
  if (t != null) {
    client.setMaxConnectionsPerAddress(Integer.parseInt(t));
  }
  t=config.getInitParameter("timeout");
  if (t != null) {
    client.setTimeout(Long.parseLong(t));
  }
  t=config.getInitParameter("idleTimeout");
  if (t != null) {
    client.setIdleTimeout(Long.parseLong(t));
  }
  t=config.getInitParameter("requestHeaderSize");
  if (t != null) {
    client.setRequestHeaderSize(Integer.parseInt(t));
  }
  t=config.getInitParameter("requestBufferSize");
  if (t != null) {
    client.setRequestBufferSize(Integer.parseInt(t));
  }
  t=config.getInitParameter("responseHeaderSize");
  if (t != null) {
    client.setResponseHeaderSize(Integer.parseInt(t));
  }
  t=config.getInitParameter("responseBufferSize");
  if (t != null) {
    client.setResponseBufferSize(Integer.parseInt(t));
  }
  client.start();
  return client;
}
