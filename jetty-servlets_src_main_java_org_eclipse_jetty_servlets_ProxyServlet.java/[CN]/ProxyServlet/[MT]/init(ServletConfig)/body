{
  _config=config;
  _context=config.getServletContext();
  _client=new HttpClient();
  _client.setConnectorType(HttpClient.CONNECTOR_SELECT_CHANNEL);
  try {
    String t=config.getInitParameter("attrPrefix");
    if (t != null)     _name=t;
    _log=Log.getLogger("org.eclipse.jetty.servlets." + _name);
    t=config.getInitParameter("maxThreads");
    if (t != null)     _client.setThreadPool(new QueuedThreadPool(Integer.parseInt(t)));
 else     _client.setThreadPool(new QueuedThreadPool());
    ((QueuedThreadPool)_client.getThreadPool()).setName(_name.substring(_name.lastIndexOf('.') + 1));
    t=config.getInitParameter("maxConnections");
    if (t != null)     _client.setMaxConnectionsPerAddress(Integer.parseInt(t));
    _client.start();
    _context.setAttribute("org.eclipse.jetty.servlets." + _name + ".Logger",_log);
    _context.setAttribute("org.eclipse.jetty.servlets." + _name + ".ThreadPool",_client.getThreadPool());
    _context.setAttribute("org.eclipse.jetty.servlets." + _name + ".HttpClient",_client);
  }
 catch (  Exception e) {
    throw new ServletException(e);
  }
}
