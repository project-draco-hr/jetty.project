{
  StringBuilder buf=new StringBuilder();
  buf.append(record.getLevel().getName()).append("|");
  String logname=record.getLoggerName();
  int idx=logname.lastIndexOf('.');
  if (idx > 0) {
    logname=logname.substring(idx + 1);
  }
  buf.append(logname);
  buf.append("|");
  buf.append(record.getMessage());
  lines.add(buf.toString());
  if (record.getThrown() != null) {
    StringWriter sw=new StringWriter(128);
    PrintWriter capture=new PrintWriter(sw);
    record.getThrown().printStackTrace(capture);
    capture.flush();
    lines.add(sw.toString());
    IO.close(capture);
  }
}
