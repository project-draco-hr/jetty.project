{
  String request="GET /";
  if (query != null)   request+="?" + query;
  request+=" HTTP/1.1\r\n" + "Host: localhost\r\n" + "Connection: close\r\n";
  if (content == null)   request+="\r\n";
 else {
    request+="Content-Length: " + content.length() + "\r\n";
    request+="\r\n" + content;
  }
  int port=_port;
  String response=null;
  try (Socket socket=new Socket("localhost",port)){
    socket.setSoTimeout(10000);
    socket.getOutputStream().write(request.getBytes("UTF-8"));
    socket.getOutputStream().flush();
    response=toString(socket.getInputStream());
  }
 catch (  Exception e) {
    System.err.println("failed on port " + port);
    e.printStackTrace();
    throw e;
  }
  return response;
}
