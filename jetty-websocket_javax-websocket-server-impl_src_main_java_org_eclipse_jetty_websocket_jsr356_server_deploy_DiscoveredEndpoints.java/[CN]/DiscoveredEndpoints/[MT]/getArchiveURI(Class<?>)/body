{
  String resourceName=clazz.getName().replace('.','/') + ".class";
  URL classUrl=clazz.getClassLoader().getResource(resourceName);
  if (classUrl == null) {
    return null;
  }
  try {
    URI uri=classUrl.toURI();
    String scheme=uri.getScheme();
    if (scheme.equalsIgnoreCase("jar")) {
      String ssp=uri.getSchemeSpecificPart();
      int idx=ssp.indexOf("!/");
      if (idx >= 0) {
        ssp=ssp.substring(0,idx);
      }
      return URI.create(ssp);
    }
  }
 catch (  URISyntaxException e) {
    LOG.warn("Class reference not a valid URI? " + classUrl,e);
  }
  return null;
}
