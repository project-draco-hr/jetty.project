{
  if (!scheme.equals(request.scheme()))   throw new IllegalArgumentException("Invalid request scheme " + request.scheme() + " for destination "+ this);
  if (!host.equals(request.host()))   throw new IllegalArgumentException("Invalid request host " + request.host() + " for destination "+ this);
  if (port != request.port())   throw new IllegalArgumentException("Invalid request port " + request.port() + " for destination "+ this);
  HttpResponse response=new HttpResponse(request,listener);
  if (client.isRunning()) {
    if (requests.offer(response)) {
      if (!client.isRunning() && requests.remove(response)) {
        throw new RejectedExecutionException(HttpClient.class.getSimpleName() + " is shutting down");
      }
 else {
        Request.Listener requestListener=request.listener();
        notifyRequestQueued(requestListener,request);
        ensureConnection();
      }
    }
 else {
      throw new RejectedExecutionException("Max requests per address " + client.getMaxQueueSizePerAddress() + " exceeded");
    }
  }
}
