{
  final AtomicInteger count=new AtomicInteger(0);
  PolicyMonitor monitor=new PolicyMonitor(new File(MavenTestingUtils.getTargetDir(),"test-classes/monitor-test-3").getAbsolutePath()){
    @Override public void onPolicyChange(    PolicyBlock grant){
      count.incrementAndGet();
    }
  }
;
  monitor.setScanInterval(1);
  monitor.start();
  while (!monitor.isInitialized()) {
    Thread.sleep(100);
  }
  Assert.assertEquals(16,count.get());
  monitor.stop();
}
