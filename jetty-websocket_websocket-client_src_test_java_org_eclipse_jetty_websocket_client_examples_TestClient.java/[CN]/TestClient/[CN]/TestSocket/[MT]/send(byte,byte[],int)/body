{
  _starts.add(System.nanoTime());
  int off=0;
  int len=data.length;
  if ((maxFragmentLength > 0) && (len > maxFragmentLength)) {
    len=maxFragmentLength;
  }
  __messagesSent++;
  while (off < data.length) {
    __framesSent++;
    byte flags=(byte)((off + len) == data.length ? 0x8 : 0);
    if (_verbose) {
    }
    off+=len;
    if ((data.length - off) > len) {
      len=data.length - off;
    }
    if ((maxFragmentLength > 0) && (len > maxFragmentLength)) {
      len=maxFragmentLength;
    }
  }
}
