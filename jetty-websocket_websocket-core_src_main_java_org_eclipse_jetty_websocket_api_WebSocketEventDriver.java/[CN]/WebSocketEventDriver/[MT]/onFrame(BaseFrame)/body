{
  if (LOG.isDebugEnabled()) {
    LOG.debug("{}.onFrame({})",websocket.getClass().getSimpleName(),frame);
  }
  if ((frame instanceof Frame) && (events.onFrame != null)) {
    events.onFrame.call(websocket,connection,frame);
  }
  if ((frame instanceof CloseFrame) && (events.onClose != null)) {
    CloseFrame close=(CloseFrame)frame;
    events.onClose.call(websocket,connection,close.getStatusCode(),close.getReason());
    return;
  }
  try {
    if (frame instanceof TextFrame) {
      if (events.onText != null) {
        TextFrame text=(TextFrame)frame;
        events.onText.call(websocket,connection,text.getPayloadUTF8());
        return;
      }
      return;
    }
    if (frame instanceof BinaryFrame) {
      if (events.onBinary != null) {
        BinaryFrame bin=(BinaryFrame)frame;
        byte buf[]=BufferUtil.toArray(bin.getPayload());
        events.onBinary.call(websocket,connection,buf,0,buf.length);
      }
      return;
    }
  }
 catch (  Throwable t) {
    unhandled(t);
  }
}
