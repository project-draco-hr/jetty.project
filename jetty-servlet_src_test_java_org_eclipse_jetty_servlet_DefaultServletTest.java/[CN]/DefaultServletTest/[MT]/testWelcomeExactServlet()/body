{
  testdir.ensureEmpty();
  File resBase=testdir.getFile("docroot");
  FS.ensureDirExists(resBase);
  File inde=new File(resBase,"index.htm");
  File index=new File(resBase,"index.html");
  String resBasePath=resBase.getAbsolutePath();
  ServletHolder defholder=context.addServlet(DefaultServlet.class,"/");
  defholder.setInitParameter("dirAllowed","false");
  defholder.setInitParameter("redirectWelcome","false");
  defholder.setInitParameter("welcomeServlets","exact");
  defholder.setInitParameter("gzip","false");
  defholder.setInitParameter("resourceBase",resBasePath);
  ServletHolder jspholder=context.addServlet(NoJspServlet.class,"*.jsp");
  context.addServlet(jspholder,"/index.jsp");
  String response;
  response=connector.getResponses("GET /context/ HTTP/1.0\r\n\r\n");
  assertResponseContains("JSP support not configured",response);
  createFile(index,"<h1>Hello Index</h1>");
  response=connector.getResponses("GET /context/ HTTP/1.0\r\n\r\n");
  assertResponseContains("<h1>Hello Index</h1>",response);
  createFile(inde,"<h1>Hello Inde</h1>");
  response=connector.getResponses("GET /context/ HTTP/1.0\r\n\r\n");
  assertResponseContains("<h1>Hello Index</h1>",response);
  assertTrue(index.delete());
  response=connector.getResponses("GET /context/ HTTP/1.0\r\n\r\n");
  assertResponseContains("<h1>Hello Inde</h1>",response);
  assertTrue(inde.delete());
  response=connector.getResponses("GET /context/ HTTP/1.0\r\n\r\n");
  assertResponseContains("JSP support not configured",response);
}
