{
  ByteBuffer byteBuffer=createByteBuffer(bufferSize);
  ByteBufferDataInfo dataInfo=new ByteBufferDataInfo(byteBuffer,true);
  fillHeaderBuffer(bufferSize);
  ByteBuffer dataFrameBuffer=dataFrameGenerator.generate(streamId,bufferSize,dataInfo);
  assertThat("The content size in dataFrameBuffer matches the buffersize + header length",dataFrameBuffer.limit(),is(bufferSize + DataFrame.HEADER_LENGTH));
  byte[] headerBytes=new byte[DataFrame.HEADER_LENGTH];
  dataFrameBuffer.get(headerBytes,0,DataFrame.HEADER_LENGTH);
  assertThat("Header bytes are prepended",headerBytes,is(headerBuffer.array()));
}
