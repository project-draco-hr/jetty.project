{
  _in.putUnmasked((byte)0x01);
  _in.putUnmasked((byte)0x86);
  _in.sendMask();
  _in.put("Hello ".getBytes(StringUtil.__UTF8));
  _in.putUnmasked((byte)0x80);
  _in.putUnmasked((byte)0x85);
  _in.sendMask();
  _in.put("World".getBytes(StringUtil.__UTF8));
  int progress=_parser.parseNext();
  assertEquals(24,progress);
  assertEquals(0,_handler._data.size());
  assertFalse(_parser.isBufferEmpty());
  assertFalse(_parser.getBuffer() == null);
  progress=_parser.parseNext();
  _parser.returnBuffer();
  assertEquals(1,progress);
  assertEquals("Hello World",_handler._data.get(0));
  assertTrue(_parser.isBufferEmpty());
  assertTrue(_parser.getBuffer() == null);
}
