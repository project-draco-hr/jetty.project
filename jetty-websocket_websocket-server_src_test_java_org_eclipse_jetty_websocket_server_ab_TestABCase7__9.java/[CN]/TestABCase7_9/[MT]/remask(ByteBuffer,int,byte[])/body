{
  int end=buf.position();
  int off;
  for (int i=position; i < end; i++) {
    off=i - position;
    buf.put(i,(byte)(buf.get(i) ^ mask[off % 4]));
  }
}
