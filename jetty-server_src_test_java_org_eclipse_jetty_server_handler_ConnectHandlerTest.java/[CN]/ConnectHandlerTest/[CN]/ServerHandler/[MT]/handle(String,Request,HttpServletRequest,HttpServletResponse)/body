{
  request.setHandled(true);
  String uri=httpRequest.getRequestURI();
switch (uri) {
case "/echo":
{
      StringBuilder builder=new StringBuilder();
      builder.append(httpRequest.getMethod()).append(" ").append(uri);
      if (httpRequest.getQueryString() != null)       builder.append("?").append(httpRequest.getQueryString());
      ByteArrayOutputStream baos=new ByteArrayOutputStream();
      InputStream input=httpRequest.getInputStream();
      int read;
      while ((read=input.read()) >= 0)       baos.write(read);
      baos.close();
      ServletOutputStream output=httpResponse.getOutputStream();
      output.println(builder.toString());
      output.write(baos.toByteArray());
      break;
    }
case "/close":
{
    request.getHttpChannel().getEndPoint().close();
    break;
  }
default :
{
  throw new ServletException();
}
}
}
