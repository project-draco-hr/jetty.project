{
  boolean head=this.head=info.isHead();
  if (head) {
    if (lastContent) {
      Generator.Result headersResult=generator.generateResponseHeaders(request,info.getStatus(),info.getReason(),info.getHttpFields(),new Callback.Adapter());
      Generator.Result contentResult=generator.generateResponseContent(request,BufferUtil.EMPTY_BUFFER,lastContent,callback);
      flusher.flush(headersResult,contentResult);
    }
 else {
      Generator.Result headersResult=generator.generateResponseHeaders(request,info.getStatus(),info.getReason(),info.getHttpFields(),callback);
      flusher.flush(headersResult);
    }
  }
 else {
    Generator.Result headersResult=generator.generateResponseHeaders(request,info.getStatus(),info.getReason(),info.getHttpFields(),new Callback.Adapter());
    Generator.Result contentResult=generator.generateResponseContent(request,content,lastContent,callback);
    flusher.flush(headersResult,contentResult);
  }
}
