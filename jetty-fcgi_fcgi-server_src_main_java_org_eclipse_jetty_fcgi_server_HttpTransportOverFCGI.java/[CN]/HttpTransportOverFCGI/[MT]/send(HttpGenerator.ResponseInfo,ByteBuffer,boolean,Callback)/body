{
  if (info != null)   commit(info,content,lastContent,callback);
 else {
    if (head) {
      if (lastContent) {
        Generator.Result result=generateResponseContent(BufferUtil.EMPTY_BUFFER,true,callback);
        flusher.flush(result);
      }
 else {
        callback.succeeded();
      }
    }
 else {
      Generator.Result result=generateResponseContent(content,lastContent,callback);
      flusher.flush(result);
    }
    if (lastContent && shutdown)     flusher.shutdown();
  }
}
