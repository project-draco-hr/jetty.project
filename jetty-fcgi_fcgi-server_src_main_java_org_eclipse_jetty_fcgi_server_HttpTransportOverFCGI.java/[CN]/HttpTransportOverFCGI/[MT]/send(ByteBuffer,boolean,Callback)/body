{
  if (head) {
    if (lastContent) {
      Generator.Result result=generator.generateResponseContent(request,BufferUtil.EMPTY_BUFFER,lastContent,callback);
      flusher.flush(result);
    }
 else {
      callback.succeeded();
    }
  }
 else {
    Generator.Result result=generator.generateResponseContent(request,content,lastContent,callback);
    flusher.flush(result);
  }
}
