{
  Queue<Entry> queued;
synchronized (this) {
    queued=new ArrayDeque<>(frames);
    frames.clear();
  }
  if (LOG.isDebugEnabled())   LOG.debug("Terminating, queued={}",queued.size());
  for (  Entry entry : queued)   closed(entry,x);
  session.disconnect();
}
