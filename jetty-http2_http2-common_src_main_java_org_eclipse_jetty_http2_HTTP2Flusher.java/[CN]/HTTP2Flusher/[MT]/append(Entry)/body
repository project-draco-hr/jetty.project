{
  boolean closed;
synchronized (this) {
    closed=terminated;
    if (!closed) {
      frames.offer(entry);
      if (LOG.isDebugEnabled())       LOG.debug("Appended {}, frames={}",entry,frames.size());
    }
  }
  if (closed)   closed(entry,new ClosedChannelException());
  return !closed;
}
