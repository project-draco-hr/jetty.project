{
  boolean fail=false;
synchronized (this) {
    if (isClosed()) {
      fail=true;
    }
 else {
      frames.offer(entry);
      if (LOG.isDebugEnabled())       LOG.debug("Appended {}, frames={}",entry,frames.size());
    }
  }
  if (fail)   closed(entry,new ClosedChannelException());
}
