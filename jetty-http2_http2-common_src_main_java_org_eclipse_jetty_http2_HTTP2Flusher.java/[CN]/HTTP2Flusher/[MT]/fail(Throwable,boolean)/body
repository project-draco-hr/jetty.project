{
  Queue<Entry> queued;
synchronized (this) {
    queued=new ArrayDeque<>(frames);
    frames.clear();
  }
  if (LOG.isDebugEnabled())   LOG.debug("{}, queued={}",closed ? "Closing" : "Failing",queued.size());
  for (  Entry entry : queued)   entry.failed(x);
  if (!closed)   session.abort(x);
}
