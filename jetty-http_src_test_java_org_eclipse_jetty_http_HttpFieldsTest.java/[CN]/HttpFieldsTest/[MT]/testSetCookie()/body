{
  HttpFields fields=new HttpFields();
  fields.addSetCookie("minimal","value",null,null,-1,null,false,false,-1);
  assertEquals("minimal=value",fields.getStringField("Set-Cookie"));
  fields.clear();
  fields.addSetCookie("everything","value","domain","path",0,"comment",true,true,0);
  assertEquals("everything=value;Path=path;Domain=domain;Expires=Thu, 01 Jan 1970 00:00:00 GMT;Secure;HttpOnly",fields.getStringField("Set-Cookie"));
  fields.clear();
  fields.addSetCookie("ev erything","va lue","do main","pa th",1,"co mment",true,true,2);
  assertEquals("\"ev erything\"=\"va lue\";Version=2;Comment=\"co mment\";Path=\"pa th\";Domain=\"do main\";Max-Age=1;Secure;HttpOnly",fields.getStringField("Set-Cookie"));
  fields.clear();
  fields.addSetCookie("json","{\"services\":[\"cwa\", \"aa\"]}",null,null,-1,null,false,false,-1);
  assertEquals("json=\"{\\\"services\\\":[\\\"cwa\\\", \\\"aa\\\"]}\"",fields.getStringField("Set-Cookie"));
}
