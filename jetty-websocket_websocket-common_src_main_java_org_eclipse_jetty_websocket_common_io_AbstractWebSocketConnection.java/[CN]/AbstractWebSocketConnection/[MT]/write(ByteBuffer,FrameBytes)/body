{
  EndPoint endpoint=getEndPoint();
  if (LOG_FRAMES.isDebugEnabled()) {
    LOG_FRAMES.debug("{} Writing {} of {} ",policy.getBehavior(),BufferUtil.toDetailString(buffer),frameBytes);
  }
  if (!isOpen()) {
    frameBytes.failed(new WebSocketException("Connection closed"));
    return;
  }
  try {
    endpoint.write(frameBytes,buffer);
  }
 catch (  Throwable t) {
    frameBytes.failed(t);
  }
}
