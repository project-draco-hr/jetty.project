{
  if (LOG.isDebugEnabled()) {
    LOG.debug("outgoingFrame({}, {})",frame,callback);
  }
  CloseInfo close=null;
  if (frame.getOpCode() == OpCode.CLOSE) {
    close=new CloseInfo(frame);
  }
  flusher.enqueue(frame,callback,batchMode);
  if (close != null) {
    LOG.debug("outgoing CLOSE frame - {}: {}",frame,close);
    ioState.onCloseLocal(close);
  }
}
