{
  if (LOG.isDebugEnabled())   LOG.debug("{} Connection State Change: {}",policy.getBehavior(),state);
switch (state) {
case OPEN:
    if (BufferUtil.hasContent(prefillBuffer)) {
      if (LOG.isDebugEnabled()) {
        LOG.debug("OPEN: has prefill - onFillable called");
      }
      onFillable();
    }
 else {
      if (LOG.isDebugEnabled()) {
        LOG.debug("OPEN: normal fillInterested");
      }
      fillInterested();
    }
  break;
case CLOSED:
if (ioState.wasAbnormalClose()) {
  CloseInfo abnormal=new CloseInfo(StatusCode.SHUTDOWN,"Abnormal Close - " + ioState.getCloseInfo().getReason());
  outgoingFrame(abnormal.asFrame(),new OnDisconnectCallback(false),BatchMode.OFF);
}
 else {
  this.disconnect(false);
}
break;
case CLOSING:
if (ioState.wasRemoteCloseInitiated()) {
CloseInfo close=ioState.getCloseInfo();
outgoingFrame(close.asFrame(),new OnCloseLocalCallback(new OnDisconnectCallback(true),close),BatchMode.OFF);
}
default :
break;
}
}
