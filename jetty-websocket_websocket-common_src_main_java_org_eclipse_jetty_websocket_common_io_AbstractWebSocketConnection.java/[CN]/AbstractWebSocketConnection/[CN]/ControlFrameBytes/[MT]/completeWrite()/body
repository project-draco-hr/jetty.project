{
  if (LOG.isDebugEnabled()) {
    LOG.debug("completeWrite() - frame: {}",frame);
  }
  if (buffer != null) {
    if (LOG.isDebugEnabled()) {
      LOG.debug("Releasing Buffer: {}",BufferUtil.toDetailString(buffer));
    }
    getBufferPool().release(buffer);
    buffer=null;
  }
  queue.remove(this);
  super.completeFrame();
  if (frame.getType().getOpCode() == OpCode.CLOSE) {
    CloseInfo close=new CloseInfo(origPayload,false);
    onWriteWebSocketClose(close);
  }
  getBufferPool().release(origPayload);
}
