{
  if (buffer == null) {
    if (frame.hasPayload()) {
      int len=frame.getPayload().remaining();
      origPayload=getBufferPool().acquire(len,false);
      BufferUtil.put(frame.getPayload(),origPayload);
    }
    buffer=getGenerator().generate(frame);
  }
  return buffer;
}
