{
  int nbits=0xFF;
  if (i < nbits) {
    buf.put((byte)i);
  }
 else {
    buf.put((byte)nbits);
    int length=i - nbits;
    while (true) {
      if ((length & ~0x7F) == 0) {
        buf.put((byte)length);
        return;
      }
 else {
        buf.put((byte)((length & 0x7F) | 0x80));
        length>>>=7;
      }
    }
  }
}
