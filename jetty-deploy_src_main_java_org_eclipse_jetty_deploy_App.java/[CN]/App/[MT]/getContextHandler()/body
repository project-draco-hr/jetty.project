{
  if (_context == null) {
    if (FileID.isXmlFile(_archivePath)) {
      this._context=createContextFromXml(_manager);
    }
 else     if (FileID.isWebArchive(_archivePath)) {
      this._context=createContextDefault(_manager);
    }
 else {
      throw new IllegalStateException("Not an XML or Web Archive: " + _archivePath.getAbsolutePath());
    }
    this._context.setAttributes(new AttributesMap(_manager.getContextAttributes()));
  }
  return _context;
}
