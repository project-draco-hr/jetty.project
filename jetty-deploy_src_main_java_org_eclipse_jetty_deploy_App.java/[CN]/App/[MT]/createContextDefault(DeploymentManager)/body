{
  String context=_archivePath.getName();
  if (FileID.isWebArchiveFile(_archivePath)) {
    context=context.substring(0,context.length() - 4);
  }
  if (context.equalsIgnoreCase("root") || context.equalsIgnoreCase("root/")) {
    context=URIUtil.SLASH;
  }
  if (context.charAt(0) != '/') {
    context="/" + context;
  }
  if (context.endsWith("/") && context.length() > 0) {
    context=context.substring(0,context.length() - 1);
  }
  WebAppContext wah=new WebAppContext();
  wah.setContextPath(context);
  wah.setWar(_archivePath.getAbsolutePath());
  if (_defaultsDescriptor != null) {
    wah.setDefaultsDescriptor(_defaultsDescriptor);
  }
  wah.setExtractWAR(_extractWars);
  wah.setParentLoaderPriority(_parentLoaderPriority);
  return wah;
}
