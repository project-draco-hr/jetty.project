{
  bindUserTransaction(context);
  WebXmlProcessor webXmlProcessor=(WebXmlProcessor)context.getAttribute(WebXmlProcessor.__web_processor);
  if (webXmlProcessor == null)   throw new IllegalStateException("No processor for web xml");
  if (!webXmlProcessor.isMetaDataComplete()) {
    if (Log.isDebugEnabled())     Log.debug("Processing annotations");
    parseAnnotations(context);
  }
  PlusWebXmlProcessor plusProcessor=new PlusWebXmlProcessor(context);
  plusProcessor.process(webXmlProcessor.getWebDefault());
  plusProcessor.process(webXmlProcessor.getWebXml());
  for (  XmlParser.Node frag : webXmlProcessor.getFragments())   plusProcessor.process(frag);
  plusProcessor.process(webXmlProcessor.getOverrideWeb());
  ((ServletHandler)context.getServletHandler()).setInjections(_injections);
  ((ServletHandler)context.getServletHandler()).setCallbacks(_callbacks);
  injectAndCallPostConstructCallbacks(context);
}
