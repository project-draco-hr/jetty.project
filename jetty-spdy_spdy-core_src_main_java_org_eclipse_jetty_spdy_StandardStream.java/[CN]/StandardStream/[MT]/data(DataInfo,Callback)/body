{
  notIdle();
  if (!canSend()) {
    session.rst(new RstInfo(getId(),StreamStatus.PROTOCOL_ERROR),new Adapter());
    throw new IllegalStateException("Protocol violation: cannot send a DATA frame before a SYN_REPLY frame");
  }
  if (isLocallyClosed()) {
    session.rst(new RstInfo(getId(),StreamStatus.PROTOCOL_ERROR),new Adapter());
    throw new IllegalStateException("Protocol violation: cannot send a DATA frame on a locally closed stream");
  }
  session.data(this,dataInfo,dataInfo.getTimeout(),dataInfo.getUnit(),callback);
}
