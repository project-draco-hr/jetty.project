{
  if (isUnidirectional())   throw new IllegalStateException("Protocol violation: cannot send SYN_REPLY frames in unidirectional streams");
  openState=OpenState.REPLY_SENT;
  updateCloseState(replyInfo.isClose(),true);
  SynReplyFrame frame=new SynReplyFrame(session.getVersion(),replyInfo.getFlags(),getId(),replyInfo.getHeaders());
  session.control(this,frame,timeout,unit,callback,null);
}
