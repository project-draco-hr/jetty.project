{
  if (close) {
switch (closeState) {
case OPENED:
{
        closeState=local ? CloseState.LOCALLY_CLOSED : CloseState.REMOTELY_CLOSED;
        break;
      }
case LOCALLY_CLOSED:
{
      if (local)       throw new IllegalStateException();
 else       closeState=CloseState.CLOSED;
      break;
    }
case REMOTELY_CLOSED:
{
    if (local)     closeState=CloseState.CLOSED;
 else     throw new IllegalStateException();
    break;
  }
default :
{
  throw new IllegalStateException();
}
}
}
}
