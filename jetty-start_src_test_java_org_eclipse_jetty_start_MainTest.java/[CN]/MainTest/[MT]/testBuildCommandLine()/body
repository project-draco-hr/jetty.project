{
  List<String> jvmArgs=new ArrayList<String>();
  jvmArgs.add("--exec");
  jvmArgs.add("-Xms1024m");
  jvmArgs.add("-Xmx1024m");
  List<String> xmls=new ArrayList<String>();
  xmls.add("jetty.xml");
  xmls.add("jetty-jmx.xml");
  xmls.add("jetty-logging.xml");
  Main main=new Main();
  main.addJvmArgs(jvmArgs);
  Classpath classpath=nastyWayToCreateAClasspathObject("/jetty/home with spaces/");
  CommandLineBuilder cmd=main.buildCommandLine(classpath,xmls);
  Assert.assertThat("CommandLineBuilder shouldn't be null",cmd,notNullValue());
  String commandLine=cmd.toString();
  Assert.assertThat("CommandLine shouldn't be null",commandLine,notNullValue());
  Assert.assertThat("Classpath should be correctly quoted and match expected value",commandLine,containsString("-cp /jetty/home with spaces/somejar.jar:/jetty/home with spaces/someotherjar.jar"));
  Assert.assertThat("CommandLine should contain jvmArgs",commandLine,containsString("--exec -Xms1024m -Xmx1024m"));
  Assert.assertThat("CommandLine should contain xmls",commandLine,containsString("jetty.xml jetty-jmx.xml jetty-logging.xml"));
}
