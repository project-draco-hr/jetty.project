{
  client.setConnectTimeout(httpClient.getConnectTimeout());
  final HttpDestination destination=(HttpDestination)context.get(HTTP_DESTINATION_CONTEXT_KEY);
  @SuppressWarnings("unchecked") final Promise<Connection> connection=(Promise<Connection>)context.get(HTTP_CONNECTION_PROMISE_CONTEXT_KEY);
  Session.Listener listener=new Session.Listener.Adapter(){
    @Override public void onFailure(    Session session,    Throwable failure){
      destination.abort(failure);
    }
  }
;
  final Promise<Session> promise=new Promise<Session>(){
    @Override public void succeeded(    Session session){
      connection.succeeded(newHttpConnection(destination,session));
    }
    @Override public void failed(    Throwable failure){
      connection.failed(failure);
    }
  }
;
  client.connect(httpClient.getSslContextFactory(),address,listener,promise,context);
}
