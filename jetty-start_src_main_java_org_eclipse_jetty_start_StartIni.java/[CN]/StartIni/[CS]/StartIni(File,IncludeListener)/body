{
  this.file=file;
  this.lines=new LinkedList<>();
  try (FileReader reader=new FileReader(file)){
    try (BufferedReader buf=new BufferedReader(reader)){
      String line;
      while ((line=buf.readLine()) != null) {
        line=line.trim();
        if (line.length() == 0) {
          continue;
        }
        if (line.charAt(0) == '#') {
          continue;
        }
        if (line.startsWith("OPTIONS=")) {
          int idx=line.indexOf('=');
          String value=line.substring(idx + 1);
          for (          String part : value.split(",")) {
            addUniqueLine("OPTION=" + part);
          }
        }
 else         if (line.endsWith("/")) {
          if (listener == null) {
            System.err.printf("Nested includes not supported: %s (found in %s)%n",line,file.getAbsolutePath());
          }
 else {
            for (            StartIni included : listener.onIniInclude(line)) {
              for (              String includedLine : included) {
                addUniqueLine(includedLine);
              }
            }
          }
        }
 else {
          addUniqueLine(line);
        }
      }
    }
   }
 }
