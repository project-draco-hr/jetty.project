{
  InetSocketAddress address=startHTTPServer(version,new PushStrategyBenchmarkHandler(),30000);
  ConnectionFactory factory=new HttpConnectionFactory(new HttpConfiguration());
  connector.setDefaultProtocol(factory.getProtocol());
  HttpClient httpClient=new HttpClient();
  httpClient.setMaxConnectionsPerDestination(6);
  httpClient.start();
  benchmarkHTTP(httpClient);
  httpClient.stop();
  PushStrategy pushStrategy=new PushStrategy.None();
  factory=new HTTPSPDYServerConnectionFactory(version,new HttpConfiguration(),pushStrategy);
  connector.setDefaultProtocol(factory.getProtocol());
  Session session=startClient(version,address,new ClientSessionFrameListener());
  benchmarkSPDY(pushStrategy,session);
  session.goAway(new GoAwayInfo(5,TimeUnit.SECONDS));
  pushStrategy=new ReferrerPushStrategy();
  factory=new HTTPSPDYServerConnectionFactory(version,new HttpConfiguration(),pushStrategy);
  connector.setDefaultProtocol(factory.getProtocol());
  session=startClient(version,address,new ClientSessionFrameListener());
  benchmarkSPDY(pushStrategy,session);
  session.goAway(new GoAwayInfo(5,TimeUnit.SECONDS));
}
