{
  WebSocketFrame frame=null;
switch (copy.getOpCode()) {
case OpCode.BINARY:
    frame=new BinaryFrame();
  break;
case OpCode.TEXT:
frame=new TextFrame();
break;
case OpCode.CLOSE:
frame=new CloseFrame();
break;
case OpCode.CONTINUATION:
frame=new ContinuationFrame();
break;
case OpCode.PING:
frame=new PingFrame();
break;
case OpCode.PONG:
frame=new PongFrame();
break;
default :
throw new IllegalArgumentException("Cannot copy frame with opcode " + copy.getOpCode() + " - "+ copy);
}
frame.copyHeaders(copy);
frame.setPayload(copy.getPayload());
return frame;
}
