{
  HttpSession session=getSession(false);
  if (session == null)   throw new IllegalStateException("No session");
  AbstractSessionManager.renewSession(this,session,getRemoteUser() != null);
  return session.getId();
}
