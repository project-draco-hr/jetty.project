{
  if (_serverName != null)   return _serverName;
  if (_uri == null)   throw new IllegalStateException("No uri");
  _serverName=_uri.getHost();
  if (_serverName != null) {
    _port=_uri.getPort();
    return _serverName;
  }
  String hostPort=_fields.getStringField(HttpHeader.HOST);
  _port=0;
  if (hostPort != null) {
    try {
      HostPort authority=new HostPort(hostPort);
      _serverName=authority.getHost();
      _port=authority.getPort();
    }
 catch (    Exception e) {
      LOG.warn(e);
      _serverName=hostPort;
      _port=0;
      return _serverName;
    }
    return _serverName;
  }
  if (_channel != null) {
    _serverName=getLocalName();
    _port=getLocalPort();
    if (_serverName != null && !StringUtil.ALL_INTERFACES.equals(_serverName))     return _serverName;
  }
  try {
    _serverName=InetAddress.getLocalHost().getHostAddress();
  }
 catch (  java.net.UnknownHostException e) {
    LOG.ignore(e);
  }
  return _serverName;
}
