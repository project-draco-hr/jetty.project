{
  _metadata=request;
  setMethod(request.getMethod());
  HttpURI uri=request.getURI();
  String scheme=uri.getScheme();
  if (scheme != null)   setScheme(scheme);
  String uriHost=uri.getHost();
  if (uriHost != null) {
    setServerName(uriHost);
    setServerPort(uri.getPort());
  }
  setUri(uri);
  String path=uri.getDecodedPath();
  String info;
  if (path == null || path.length() == 0) {
    if (uri.isAbsolute())     path="/";
 else     throw new BadMessageException(400,"Bad URI");
    info=path;
  }
 else   if (!path.startsWith("/")) {
    if (!"*".equals(path) && !HttpMethod.CONNECT.is(getMethod()))     throw new BadMessageException(400,"Bad URI");
    info=path;
  }
 else   info=URIUtil.canonicalPath(path);
  if (info == null)   throw new BadMessageException(400,"Bad URI");
  setPathInfo(info);
}
