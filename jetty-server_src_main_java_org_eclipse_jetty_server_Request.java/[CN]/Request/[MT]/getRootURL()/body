{
  StringBuilder url=new StringBuilder(48);
  String scheme=getScheme();
  String server=getServerName();
  int port=getServerPort();
  if (server.indexOf(':') >= 0)   url.append(scheme).append("://").append('[').append(server).append(']');
 else   url.append(scheme).append("://").append(getServerName());
  if (port > 0 && ((HttpScheme.HTTP.is(scheme) && port != 80) || (HttpScheme.HTTPS.is(scheme) && port != 443))) {
    url.append(':').append(port);
  }
  return url;
}
