{
  byte buf[]=new byte[bufferSize];
  try {
    int inflated=inflater.inflate(buf);
    if (inflated == 0) {
      return null;
    }
    ByteBuffer ret=BufferUtil.toBuffer(buf,0,inflated);
    if (LOG.isDebugEnabled()) {
      LOG.debug("uncompressed={}",BufferUtil.toDetailString(ret));
    }
    return ret;
  }
 catch (  DataFormatException e) {
    LOG.warn(e);
    throw new BadPayloadException(e);
  }
}
