{
  if (finished) {
    throw new IOException("Cannot append to finished buffer");
  }
  if (payload == null) {
    return;
  }
  driver.getPolicy().assertValidMessageSize(size + payload.remaining());
  size+=payload.remaining();
synchronized (buf) {
    BufferUtil.put(payload,buf);
  }
  if (needsNotification) {
    needsNotification=true;
    this.driver.onInputStream(this);
  }
}
