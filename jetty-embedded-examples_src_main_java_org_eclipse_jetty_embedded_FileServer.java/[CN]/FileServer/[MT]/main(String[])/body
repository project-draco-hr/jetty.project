{
  Server server=new Server(args.length == 0 ? 8080 : Integer.parseInt(args[0]));
  ResourceHandler resource_handler=new ResourceHandler(){
    protected void doDirectory(    HttpServletRequest request,    HttpServletResponse response,    Resource resource) throws IOException {
      String listing=resource.getListHTML(request.getRequestURI(),request.getPathInfo().lastIndexOf("/") > 0);
      response.setContentType("text/html; charset=UTF-8");
      response.getWriter().println(listing);
    }
  }
;
  resource_handler.setResourceBase(args.length == 2 ? args[1] : ".");
  HandlerList handlers=new HandlerList();
  handlers.setHandlers(new Handler[]{resource_handler,new DefaultHandler()});
  server.setHandler(handlers);
  server.start();
  server.join();
}
