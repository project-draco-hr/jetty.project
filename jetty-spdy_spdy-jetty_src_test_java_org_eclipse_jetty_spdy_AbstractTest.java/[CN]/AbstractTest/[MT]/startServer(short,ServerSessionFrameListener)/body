{
  QueuedThreadPool pool=new QueuedThreadPool();
  pool.setName(pool.getName() + "-server");
  server=new Server(pool);
  if (connector == null)   connector=newSPDYServerConnector(listener);
  if (listener == null)   listener=connector.getServerSessionFrameListener();
  connector.setDefaultConnectionFactory(new ServerSPDYConnectionFactory(version,connector.getByteBufferPool(),connector.getExecutor(),connector.getScheduler(),listener));
  connector.setPort(0);
  server.addConnector(connector);
  server.start();
  return new InetSocketAddress("localhost",connector.getLocalPort());
}
