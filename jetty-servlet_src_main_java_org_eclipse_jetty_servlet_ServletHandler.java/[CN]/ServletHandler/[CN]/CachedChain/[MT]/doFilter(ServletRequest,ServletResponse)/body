{
  final Request baseRequest=(request instanceof Request) ? ((Request)request) : HttpChannel.getCurrentHttpChannel().getRequest();
  if (_filterHolder != null) {
    if (LOG.isDebugEnabled())     LOG.debug("call filter " + _filterHolder);
    Filter filter=_filterHolder.getFilter();
    if (_filterHolder.isAsyncSupported())     filter.doFilter(request,response,_next);
 else {
      final boolean suspendable=baseRequest.isAsyncSupported();
      if (suspendable) {
        try {
          baseRequest.setAsyncSupported(false);
          filter.doFilter(request,response,_next);
        }
  finally {
          baseRequest.setAsyncSupported(true);
        }
      }
 else       filter.doFilter(request,response,_next);
    }
    return;
  }
  HttpServletRequest srequest=(HttpServletRequest)request;
  if (_servletHolder != null) {
    if (LOG.isDebugEnabled())     LOG.debug("call servlet " + _servletHolder);
    _servletHolder.handle(baseRequest,request,response);
  }
 else   if (getHandler() == null)   notFound(srequest,(HttpServletResponse)response);
 else   nextHandle(URIUtil.addPaths(srequest.getServletPath(),srequest.getPathInfo()),baseRequest,srequest,(HttpServletResponse)response);
}
