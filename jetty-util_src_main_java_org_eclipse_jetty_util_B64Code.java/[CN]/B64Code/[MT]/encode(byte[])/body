{
  if (b == null)   return null;
  int bLen=b.length;
  int cLen=((bLen + 2) / 3) * 4;
  char c[]=new char[cLen];
  int ci=0;
  int bi=0;
  byte b0, b1, b2;
  int stop=(bLen / 3) * 3;
  while (bi < stop) {
    b0=b[bi++];
    b1=b[bi++];
    b2=b[bi++];
    c[ci++]=__rfc1421alphabet[(b0 >>> 2) & 0x3f];
    c[ci++]=__rfc1421alphabet[(b0 << 4) & 0x3f | (b1 >>> 4) & 0x0f];
    c[ci++]=__rfc1421alphabet[(b1 << 2) & 0x3f | (b2 >>> 6) & 0x03];
    c[ci++]=__rfc1421alphabet[b2 & 077];
  }
  if (bLen != bi) {
switch (bLen % 3) {
case 2:
      b0=b[bi++];
    b1=b[bi++];
  c[ci++]=__rfc1421alphabet[(b0 >>> 2) & 0x3f];
c[ci++]=__rfc1421alphabet[(b0 << 4) & 0x3f | (b1 >>> 4) & 0x0f];
c[ci++]=__rfc1421alphabet[(b1 << 2) & 0x3f];
c[ci++]=__pad;
break;
case 1:
b0=b[bi++];
c[ci++]=__rfc1421alphabet[(b0 >>> 2) & 0x3f];
c[ci++]=__rfc1421alphabet[(b0 << 4) & 0x3f];
c[ci++]=__pad;
c[ci++]=__pad;
break;
default :
break;
}
}
return c;
}
