{
  if (isFelix403 == null) {
    try {
      Class bundleImplClazz=bundle.getClass().getClassLoader().loadClass("org.apache.felix.framework.BundleImpl");
      Felix_bundleWiringClazz=bundle.getClass().getClassLoader().loadClass("org.osgi.framework.wiring.BundleWiring");
      Felix_adapt_method=bundleImplClazz.getDeclaredMethod("adapt",new Class[]{Class.class});
      Felix_adapt_method.setAccessible(true);
      Felix_bundle_wiring_getClassLoader_method=Felix_bundleWiringClazz.getDeclaredMethod("getClassLoader");
      Felix_bundle_wiring_getClassLoader_method.setAccessible(true);
      isFelix403=Boolean.TRUE;
    }
 catch (    ClassNotFoundException e) {
      LOG.warn("Felix 4.x classes not found in environment");
      isFelix403=Boolean.FALSE;
    }
catch (    NoSuchMethodException e) {
      LOG.warn("Felix 4.x classes not found in environment");
      isFelix403=Boolean.FALSE;
    }
  }
}
