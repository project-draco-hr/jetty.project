{
  try {
    int val=client.read();
    Assert.fail("Server has not closed socket");
  }
 catch (  SocketException e) {
  }
  IOState ios=client.getIOState();
  if (wasClean) {
    Assert.assertTrue(ios.wasRemoteCloseInitiated());
    Assert.assertTrue(ios.wasCleanClose());
  }
 else {
    Assert.assertTrue(ios.wasRemoteCloseInitiated());
  }
}
