{
  logger.debug("S -> P {} on {}",replyInfo,stream);
  short serverVersion=stream.getSession().getVersion();
  Fields headers=new Fields(replyInfo.getHeaders(),false);
  addResponseProxyHeaders(stream,headers);
  customizeResponseHeaders(stream,headers);
  short clientVersion=this.clientStream.getSession().getVersion();
  convert(serverVersion,clientVersion,headers);
  this.replyInfo=new ReplyInfo(headers,replyInfo.isClose());
  if (replyInfo.isClose())   reply(stream);
}
