{
  byte[] to=new byte[buffer.remaining()];
  if (buffer.isDirect())   buffer.slice().get(to);
 else {
    byte[] array=buffer.array();
    System.arraycopy(array,buffer.position(),to,0,to.length);
  }
  return to;
}
