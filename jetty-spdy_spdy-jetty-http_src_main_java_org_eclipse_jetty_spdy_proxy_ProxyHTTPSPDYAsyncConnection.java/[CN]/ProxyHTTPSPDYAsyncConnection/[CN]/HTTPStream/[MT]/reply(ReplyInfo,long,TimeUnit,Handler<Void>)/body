{
  try {
    Headers headers=new Headers(replyInfo.getHeaders(),false);
    headers.remove(HTTPSPDYHeader.SCHEME.name(version));
    String status=headers.remove(HTTPSPDYHeader.STATUS.name(version)).value();
    Matcher matcher=statusRegexp.matcher(status);
    matcher.matches();
    int code=Integer.parseInt(matcher.group(1));
    String reason=matcher.group(2);
    generator.setResponse(code,reason);
    String httpVersion=headers.remove(HTTPSPDYHeader.VERSION.name(version)).value();
    generator.setVersion(Integer.parseInt(httpVersion.replaceAll("\\D","")));
    Headers.Header host=headers.remove(HTTPSPDYHeader.HOST.name(version));
    if (host != null)     headers.put("host",host.value());
    HttpFields fields=new HttpFields();
    for (    Headers.Header header : headers) {
      String name=camelize(header.name());
      fields.put(name,header.value());
    }
    generator.completeHeader(fields,replyInfo.isClose());
    if (replyInfo.isClose())     complete();
    handler.completed(null);
  }
 catch (  IOException x) {
    handler.failed(null,x);
  }
}
