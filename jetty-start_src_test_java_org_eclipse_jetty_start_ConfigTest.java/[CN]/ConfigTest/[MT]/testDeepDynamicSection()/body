{
  StringBuffer buf=new StringBuffer();
  buf.append("[All,default,=$(jetty.home)/lib/**]\n");
  String jettyHome=getTestableJettyHome();
  Config options=new Config();
  options.setProperty("jetty.home",jettyHome);
  options.parse(buf);
  Classpath defaultClasspath=options.getClasspath();
  Assert.assertNotNull("Default Classpath should not be null",defaultClasspath);
  Classpath foocp=options.getSectionClasspath("foo");
  Assert.assertNotNull("Foo Classpath should not exist",foocp);
  Classpath allcp=options.getSectionClasspath("All");
  Assert.assertNotNull("Classpath section 'All' should exist",allcp);
  Classpath extcp=options.getSectionClasspath("ext");
  Assert.assertNotNull("Classpath section 'ext' should exist",extcp);
  File lib=new File(getJettyHomeDir(),"lib");
  Classpath expected=new Classpath();
  File foo=new File(lib,"foo");
  File bar=new File(foo,"bar");
  expected.addComponent(new File(bar,"foobar.jar"));
  assertEquals("Deep Classpath Section",expected,foocp);
  File ext=new File(lib,"ext");
  expected=new Classpath();
  expected.addComponent(new File(ext,"custom-impl.jar"));
  assertEquals("Single Classpath Section",expected,extcp);
}
