{
  _generator=new WebSocketGeneratorRFC6455(_buffers,_endPoint,null);
  byte[] data="xxGame Over".getBytes(StringUtil.__UTF8);
  data[0]=(byte)(1000 / 0x100);
  data[1]=(byte)(1000 % 0x100);
  _generator.addFrame((byte)0x8,(byte)0x08,data,0,data.length);
  _generator.flush();
  assertEquals((byte)0x88,_out.get());
  assertEquals(11,0xff & _out.get());
  _out.get();
  _out.get();
  assertEquals('G',_out.get());
  assertEquals('a',_out.get());
  assertEquals('m',_out.get());
  assertEquals('e',_out.get());
  assertEquals(' ',_out.get());
  assertEquals('O',_out.get());
  assertEquals('v',_out.get());
  assertEquals('e',_out.get());
  assertEquals('r',_out.get());
  try {
    _generator.addFrame((byte)0x8,(byte)0x04,data,0,data.length);
    assertTrue(false);
  }
 catch (  EofException e) {
  }
  assertTrue(_endPoint.isOutputShutdown());
}
