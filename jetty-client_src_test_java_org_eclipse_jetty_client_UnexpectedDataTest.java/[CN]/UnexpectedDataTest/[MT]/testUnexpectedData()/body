{
  for (int i=0; i < 4; ++i) {
    final CountDownLatch done=new CountDownLatch(1);
    ContentExchange httpExchange=new ContentExchange(){
      protected void onResponseComplete() throws IOException {
        super.onResponseComplete();
        done.countDown();
      }
    }
;
    httpExchange.setURL("http://localhost:" + _port + "/?i="+ i);
    httpExchange.setMethod(HttpMethods.GET);
    _httpClient.send(httpExchange);
    Assert.assertTrue(done.await(1000,TimeUnit.SECONDS));
    int status=httpExchange.getStatus();
    String result=httpExchange.getResponseContent();
    Assert.assertEquals("i=" + i,0,result.indexOf("<hello>"));
    Assert.assertEquals("i=" + i,result.length() - 10,result.indexOf("</hello>"));
    Assert.assertEquals(HttpExchange.STATUS_COMPLETED,status);
    Thread.sleep(500);
  }
}
