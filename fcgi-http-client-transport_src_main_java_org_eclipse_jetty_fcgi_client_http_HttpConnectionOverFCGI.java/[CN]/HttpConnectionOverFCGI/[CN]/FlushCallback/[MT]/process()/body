{
  if (active != null)   active.succeeded();
  Generator.Result result;
synchronized (queue) {
    if (queue.isEmpty()) {
      flushing=false;
      return true;
    }
    result=queue.poll();
  }
  active=result;
  List<ByteBuffer> buffers=result.getByteBuffers();
  getEndPoint().write(this,buffers.toArray(new ByteBuffer[buffers.size()]));
  return false;
}
