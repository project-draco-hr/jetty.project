{
  List<String> modulesThatWereDisabled=new ArrayList<>();
  List<String> modulesThatWereEnabled=new ArrayList<>();
  Set<String> resolvedModulesToDisable=args.getAllModules().resolveChildModulesOf(moduleName);
  System.out.printf(" - Disabling Module: %s%n",moduleName);
  if (resolvedModulesToDisable.size() > 1) {
    System.out.printf(" - (Resolved to) : ");
    boolean needDelim=false;
    for (    String name : resolvedModulesToDisable) {
      if (needDelim) {
        System.out.print(" -> ");
      }
      System.out.print(name);
      needDelim=true;
    }
    System.out.println();
  }
  Modules modules=args.getAllModules();
  Module leaf=modules.get(moduleName);
  if (leaf.getChildEdges().size() <= 0) {
    List<String> sources=new ArrayList<>();
    sources.add("<module-persistence>");
    for (    Module parent : leaf.getParentEdges()) {
      parent.setEnabled(true);
      parent.addSources(sources);
      addUniqueLine(parent.getName());
      modulesThatWereEnabled.add(parent.getName());
    }
  }
  ListIterator<String> iter=super.listIterator();
  while (iter.hasNext()) {
    String line=iter.next().trim();
    if (resolvedModulesToDisable.contains(line)) {
      iter.remove();
      modulesThatWereDisabled.add(line);
    }
  }
  saveFile();
  if (modulesThatWereDisabled.size() > 0) {
    System.out.printf("Disabled %d module%s%n",modulesThatWereDisabled.size(),modulesThatWereDisabled.size() > 1 ? "s" : "");
    for (    String name : modulesThatWereDisabled) {
      System.out.printf(" - %s%n",name);
    }
    return true;
  }
 else   if (modulesThatWereEnabled.size() > 0) {
    System.out.printf("Module %s was has been effectively disabled.%n",moduleName);
    return true;
  }
 else {
    System.out.printf("Module %s not found, no changes made to module persistence.%n",moduleName);
    return false;
  }
}
