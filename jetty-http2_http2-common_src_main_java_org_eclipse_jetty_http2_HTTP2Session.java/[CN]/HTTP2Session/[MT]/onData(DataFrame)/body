{
  int streamId=frame.getStreamId();
  final IStream stream=getStream(streamId);
  if (stream != null) {
    stream.updateClose(frame.isEndStream(),false);
    flowControl.onDataReceived(this,stream,frame.getFlowControlledLength());
    return stream.process(frame,new Callback.Adapter(){
      @Override public void succeeded(){
        int consumed=frame.getFlowControlledLength();
        LOG.debug("Flow control: {} consumed on {}",consumed,stream);
        flowControl.onDataConsumed(HTTP2Session.this,stream,consumed);
      }
    }
);
  }
 else {
    ResetFrame resetFrame=new ResetFrame(streamId,ErrorCode.STREAM_CLOSED_ERROR);
    reset(resetFrame,disconnectCallback);
    return false;
  }
}
