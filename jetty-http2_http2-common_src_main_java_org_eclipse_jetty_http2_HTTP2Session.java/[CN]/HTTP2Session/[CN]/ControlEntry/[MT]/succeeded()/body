{
switch (frame.getType()) {
case HEADERS:
{
      HeadersFrame headersFrame=(HeadersFrame)frame;
      if (stream.updateClose(headersFrame.isEndStream(),true))       removeStream(stream,true);
      break;
    }
case RST_STREAM:
{
    if (stream != null) {
      stream.close();
      removeStream(stream,true);
    }
    break;
  }
case SETTINGS:
{
  SettingsFrame settingsFrame=(SettingsFrame)frame;
  Integer initialWindow=settingsFrame.getSettings().get(SettingsFrame.INITIAL_WINDOW_SIZE);
  if (initialWindow != null)   flowControl.updateInitialStreamWindow(HTTP2Session.this,initialWindow,true);
  break;
}
case PUSH_PROMISE:
{
stream.updateClose(true,false);
break;
}
case GO_AWAY:
{
getEndPoint().shutdownOutput();
break;
}
case DISCONNECT:
{
terminate();
break;
}
default :
{
break;
}
}
callback.succeeded();
}
