{
  boolean fail=false;
synchronized (queue) {
    if (isClosed())     fail=true;
 else     queue.offer(entry);
    if (LOG.isDebugEnabled())     LOG.debug("Appended {}, queue={}",entry,queue.size());
  }
  if (fail)   closed(entry);
}
