{
  boolean fail=false;
synchronized (queue) {
    if (closed)     fail=true;
 else     queue.offer(entry);
  }
  if (fail)   closed(entry);
}
