{
  Queue<Generator.LeaseCallback> queued;
synchronized (queue) {
    closed=true;
    queued=new ArrayDeque<>(queue);
  }
  while (true) {
    Generator.LeaseCallback item=queued.poll();
    if (item == null)     break;
    fail(item);
  }
}
