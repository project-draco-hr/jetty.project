{
  Queue<FlusherEntry> queued;
synchronized (queue) {
    closed=true;
    queued=new ArrayDeque<>(queue);
  }
  if (LOG.isDebugEnabled())   LOG.debug("Closing, queued={}",queued.size());
  while (true) {
    FlusherEntry item=queued.poll();
    if (item == null)     break;
    closed(item);
  }
}
