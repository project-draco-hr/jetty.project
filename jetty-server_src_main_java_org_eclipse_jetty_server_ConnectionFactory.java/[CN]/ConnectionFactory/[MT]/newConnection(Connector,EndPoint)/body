{
  if (_ssl) {
    SSLEngine engine=_sslContextFactory.createSSLEngine(endp.getRemoteAddress());
    SslConnection ssl_connection=new SslConnection(connector.getByteBufferPool(),connector.getExecutor(),endp,engine);
    Connection http_connection=new HttpConnection(_httpConfig,connector,ssl_connection.getDecryptedEndPoint());
    ssl_connection.getDecryptedEndPoint().setConnection(http_connection);
    return ssl_connection;
  }
  return new HttpConnection(_httpConfig,connector,endp);
}
