{
  try {
    DeliverExchange exchange=new DeliverExchange(response);
    exchange.setMethod(HttpMethods.POST);
    exchange.setAddress(gatewayAddress);
    exchange.setURI(gatewayPath + "/" + urlEncode(getTargetId())+ "/deliver");
    exchange.setRequestContent(new ByteArrayBuffer(response.getFrameBytes()));
    httpClient.send(exchange);
    getLogger().debug("Client {} deliver sent to gateway, response {}",getTargetId(),response);
  }
 catch (  IOException x) {
    getLogger().debug("Could not send exchange",x);
    throw new RuntimeException(x);
  }
}
