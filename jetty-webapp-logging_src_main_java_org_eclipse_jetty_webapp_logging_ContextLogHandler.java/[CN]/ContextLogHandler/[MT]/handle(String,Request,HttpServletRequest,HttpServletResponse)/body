{
  MDC.put("target",target);
  String contextPath=request.getContextPath();
  if (contextPath != null) {
    MDC.put("contextPath",contextPath);
  }
  MDC.put("remoteAddr",request.getRemoteAddr());
  String remoteUser=request.getRemoteUser();
  if (remoteUser != null) {
    MDC.put("remoteUser",remoteUser);
  }
  Principal principal=request.getUserPrincipal();
  if (principal != null) {
    MDC.put("principal",principal.getName());
  }
  try {
    super.handle(target,baseRequest,request,response);
  }
  finally {
    MDC.clear();
  }
}
