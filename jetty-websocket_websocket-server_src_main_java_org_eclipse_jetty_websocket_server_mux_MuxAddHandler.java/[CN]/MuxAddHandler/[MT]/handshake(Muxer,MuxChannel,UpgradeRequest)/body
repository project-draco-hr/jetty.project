{
  HttpTransportOverMux transport=new HttpTransportOverMux(muxer,channel);
  EmptyHttpInput input=new EmptyHttpInput();
  HttpConfiguration configuration=new HttpConfiguration();
  HttpChannelOverMux httpChannel=new HttpChannelOverMux(connector,configuration,endPoint,transport,input);
  HttpMethod method=HttpMethod.fromString(request.getMethod());
  HttpVersion version=HttpVersion.fromString(request.getHttpVersion());
  String uri=request.getRequestURI().toASCIIString();
  httpChannel.startRequest(method,request.getMethod(),uri,version);
  for (  String headerName : request.getHeaders().keySet()) {
    HttpHeader header=HttpHeader.lookAheadGet(headerName.getBytes(),0,headerName.length());
    for (    String value : request.getHeaders().get(headerName)) {
      httpChannel.parsedHeader(header,headerName,value);
    }
  }
  httpChannel.headerComplete();
  httpChannel.messageComplete();
  httpChannel.run();
  throw new MuxException("Not a valid request");
}
