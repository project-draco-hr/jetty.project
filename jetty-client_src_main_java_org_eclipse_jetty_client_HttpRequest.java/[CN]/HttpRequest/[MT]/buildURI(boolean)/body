{
  String path=getPath();
  String query=getQuery();
  if (query != null && withQuery)   path+="?" + query;
  URI result=URI.create(path);
  if (!result.isAbsolute() && !result.isOpaque())   result=URI.create(new Origin(getScheme(),getHost(),getPort()).asString() + path);
  return result;
}
