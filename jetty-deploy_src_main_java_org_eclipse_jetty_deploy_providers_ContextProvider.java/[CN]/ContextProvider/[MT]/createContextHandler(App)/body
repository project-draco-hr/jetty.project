{
  Resource resource=Resource.newResource(app.getOriginId());
  File file=resource.getFile();
  if (resource.exists() && FileID.isXmlFile(file)) {
    XmlConfiguration xmlc=new XmlConfiguration(resource.getURL());
    xmlc.getIdMap().put("Server",getDeploymentManager().getServer());
    if (getConfigurationManager() != null)     xmlc.getProperties().putAll(getConfigurationManager().getProperties());
    return (ContextHandler)xmlc.configure();
  }
  throw new IllegalStateException("App resouce does not exist " + resource);
}
