{
  HttpExchange ex=null;
  try {
synchronized (HttpConnection.this) {
      ex=_exchange;
      _exchange=null;
      if (ex != null) {
        ex.disassociate(HttpConnection.this);
        _destination.returnConnection(HttpConnection.this,true);
      }
 else       if (_idle.compareAndSet(true,false)) {
        _destination.returnIdleConnection(HttpConnection.this);
      }
    }
  }
 catch (  Exception e) {
    Log.debug(e);
  }
 finally {
    try {
      close();
    }
 catch (    IOException e) {
      Log.ignore(e);
    }
    if (ex != null && ex.getStatus() < HttpExchange.STATUS_COMPLETED) {
      ex.setStatus(HttpExchange.STATUS_EXPIRED);
    }
  }
}
