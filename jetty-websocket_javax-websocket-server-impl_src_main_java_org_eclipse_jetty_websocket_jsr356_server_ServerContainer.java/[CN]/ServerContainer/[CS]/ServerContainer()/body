{
  super();
  WebAppContext webapp=WebAppContext.getCurrentWebAppContext();
  if (webapp != null) {
    WebSocketUpgradeFilter filter=new WebSocketUpgradeFilter();
    FilterHolder fholder=new FilterHolder(filter);
    fholder.setName("Jetty_WebSocketUpgradeFilter");
    fholder.setDisplayName("WebSocket Upgrade Filter");
    String pathSpec="/*";
    webapp.addFilter(fholder,pathSpec,EnumSet.of(DispatcherType.REQUEST));
    LOG.debug("Adding {} mapped to {} to {}",filter,pathSpec,webapp);
    mappedCreator=filter;
  }
 else {
    LOG.debug("No active WebAppContext detected");
  }
}
