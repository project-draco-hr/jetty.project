{
  if (config == null) {
    return null;
  }
  String name=config.getName();
  if (StringUtil.isBlank(name)) {
    return null;
  }
  Class<? extends Extension> extClass=registry.get(name);
  if (extClass == null) {
    return null;
  }
  try {
    Extension ext=extClass.newInstance();
    ext.setConfig(config);
    ext.setPolicy(policy);
    ext.setBufferPool(bufferPool);
    return ext;
  }
 catch (  InstantiationException|IllegalAccessException e) {
    throw new WebSocketException("Cannot instantiate extension: " + extClass,e);
  }
}
