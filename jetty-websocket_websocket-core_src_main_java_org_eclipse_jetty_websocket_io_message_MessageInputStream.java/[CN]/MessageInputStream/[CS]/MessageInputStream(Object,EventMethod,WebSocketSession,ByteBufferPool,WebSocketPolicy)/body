{
  this.websocket=websocket;
  this.onEvent=onEvent;
  this.session=session;
  this.bufferPool=bufferPool;
  this.policy=policy;
  this.buf=bufferPool.acquire(policy.getBufferSize(),false);
  BufferUtil.clearToFill(this.buf);
  size=0;
  readPosition=this.buf.position();
  finished=false;
  needsNotification=true;
}
