{
synchronized (buf) {
    byte b=buf.get();
    if (buf.limit() <= (buf.capacity() - 5)) {
      buf.compact();
    }
    return b;
  }
}
