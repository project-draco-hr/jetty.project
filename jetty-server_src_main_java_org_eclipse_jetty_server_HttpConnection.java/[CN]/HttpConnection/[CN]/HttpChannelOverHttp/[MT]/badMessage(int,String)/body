{
  if (status < 0) {
    EndPoint ep=getEndPoint();
    while (ep.getTransport() instanceof EndPoint)     ep=(EndPoint)ep.getTransport();
    ep.close();
    _parser.atEOF();
    LOG.debug("badMessage -1 close of {}",getEndPoint());
    completed();
  }
 else {
    _generator.setPersistent(false);
    super.badMessage(status,reason);
  }
}
