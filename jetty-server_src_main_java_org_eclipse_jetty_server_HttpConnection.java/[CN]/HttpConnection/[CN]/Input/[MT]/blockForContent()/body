{
  while (!_parser.isComplete()) {
    boolean event=_parser.parseNext(_requestBuffer == null ? BufferUtil.EMPTY_BUFFER : _requestBuffer);
    while (!event && BufferUtil.hasContent(_requestBuffer) && _parser.inContentState())     event=_parser.parseNext(_requestBuffer);
    if (_parser.isComplete() || available() > 0)     return;
    if (BufferUtil.isEmpty(_requestBuffer)) {
      if (getEndPoint().isInputShutdown()) {
        _parser.shutdownInput();
        shutdown();
        return;
      }
      fillInterested(_readBlocker);
      LOG.debug("{} block readable on {}",this,_readBlocker);
      _readBlocker.block();
      if (_requestBuffer == null) {
        long content_length=_channel.getRequest().getContentLength();
        int size=getInputBufferSize();
        if (size < content_length)         size=size * 4;
        _requestBuffer=_bufferPool.acquire(size,REQUEST_BUFFER_DIRECT);
      }
      int filled=getEndPoint().fill(_requestBuffer);
      LOG.debug("{} block filled {}",this,filled);
      if (filled < 0) {
        _parser.shutdownInput();
        return;
      }
    }
  }
}
