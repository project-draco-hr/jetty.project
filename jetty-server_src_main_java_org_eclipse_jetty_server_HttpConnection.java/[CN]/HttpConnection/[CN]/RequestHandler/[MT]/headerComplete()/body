{
  _requests++;
  _generator.setVersion(_version);
switch (_version) {
case HttpVersions.HTTP_0_9_ORDINAL:
    break;
case HttpVersions.HTTP_1_0_ORDINAL:
  _generator.setHead(_head);
break;
case HttpVersions.HTTP_1_1_ORDINAL:
_generator.setHead(_head);
if (_server.getSendDateHeader()) _responseFields.put(HttpHeaders.DATE_BUFFER,_request.getTimeStampBuffer(),_request.getTimeStamp());
if (!_host) {
_generator.setResponse(HttpStatus.BAD_REQUEST_400,null);
_responseFields.put(HttpHeaders.CONNECTION_BUFFER,HttpHeaderValues.CLOSE_BUFFER);
_generator.completeHeader(_responseFields,true);
_generator.complete();
return;
}
if (_expect != UNKNOWN) {
if (_expect == HttpHeaderValues.CONTINUE_ORDINAL) {
}
 else if (_expect == HttpHeaderValues.PROCESSING_ORDINAL) {
}
 else {
_generator.sendError(HttpStatus.EXPECTATION_FAILED_417,null,null,true);
return;
}
}
break;
default :
}
if (_charset != null) _request.setCharacterEncodingUnchecked(_charset);
if ((((HttpParser)_parser).getContentLength() <= 0 && !((HttpParser)_parser).isChunking()) || _expect == HttpHeaderValues.CONTINUE_ORDINAL) handleRequest();
 else _delayedHandling=true;
}
