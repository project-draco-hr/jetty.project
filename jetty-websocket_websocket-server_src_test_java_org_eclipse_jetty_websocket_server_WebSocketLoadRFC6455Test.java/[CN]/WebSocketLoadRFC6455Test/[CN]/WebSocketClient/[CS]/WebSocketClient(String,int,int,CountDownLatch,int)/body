{
  this.latch=latch;
  socket=new Socket(host,port);
  socket.setSoTimeout(readTimeout);
  output=new BufferedWriter(new OutputStreamWriter(socket.getOutputStream(),"ISO-8859-1"));
  input=new BufferedReader(new InputStreamReader(socket.getInputStream(),"ISO-8859-1"));
  this.iterations=iterations;
  _endp=new SocketEndPoint(socket);
  _generator=new WebSocketGeneratorRFC6455(new WebSocketBuffers(32 * 1024),_endp,new FixedMasker());
  _parser=new WebSocketParserRFC6455(new WebSocketBuffers(32 * 1024),_endp,_handler,false);
}
