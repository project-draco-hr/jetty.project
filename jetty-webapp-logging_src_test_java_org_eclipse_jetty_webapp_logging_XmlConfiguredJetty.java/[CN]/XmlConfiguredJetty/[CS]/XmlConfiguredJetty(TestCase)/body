{
  xmlConfigurations=new ArrayList<URL>();
  properties=new Properties();
  File jettyHome=MavenTestingUtils.getTargetTestingDir(test);
  jettyHome.mkdirs();
  File logsDir=new File(jettyHome,"logs");
  logsDir.mkdirs();
  File etcDir=new File(jettyHome,"etc");
  etcDir.mkdirs();
  IO.copyFile(MavenTestingUtils.getTestResourceFile("etc/realm.properties"),new File(etcDir,"realm.properties"));
  File webappsDir=new File(jettyHome,"webapps");
  webappsDir.mkdirs();
  File tmpDir=new File(MavenTestingUtils.getTargetTestingDir(test),"tmp");
  tmpDir.mkdirs();
  System.setProperty("java.io.tmpdir",tmpDir.getAbsolutePath());
  properties.setProperty("jetty.home",jettyHome.getAbsolutePath());
  System.setProperty("jetty.home",jettyHome.getAbsolutePath());
  properties.setProperty("test.basedir",MavenTestingUtils.getBasedir().getAbsolutePath());
  properties.setProperty("test.resourcesdir",MavenTestingUtils.getTestResourcesDir().getAbsolutePath());
  properties.setProperty("test.webapps",MavenTestingUtils.getTestResourceDir("webapps").getAbsolutePath());
  properties.setProperty("test.targetdir",MavenTestingUtils.getTargetDir().getAbsolutePath());
  File testConfig=MavenTestingUtils.getTargetFile("xml-configured-jetty.properties");
  FileOutputStream out=new FileOutputStream(testConfig);
  properties.store(out,"Generated by " + XmlConfiguredJetty.class.getName());
}
