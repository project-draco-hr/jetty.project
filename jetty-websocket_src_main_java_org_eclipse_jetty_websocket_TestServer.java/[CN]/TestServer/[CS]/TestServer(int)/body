{
  _connector=new SelectChannelConnector();
  _connector.setPort(port);
  addConnector(_connector);
  _wsHandler=new WebSocketHandler(){
    public WebSocket doWebSocketConnect(    HttpServletRequest request,    String protocol){
      if ("org.ietf.websocket.test-echo".equals(protocol) || "echo".equals(protocol) || "lws-mirror-protocol".equals(protocol)) {
        _websocket=new TestEchoWebSocket();
      }
 else       if ("org.ietf.websocket.test-echo-broadcast".equals(protocol)) {
        _websocket=new TestEchoBroadcastWebSocket();
      }
 else       if ("org.ietf.websocket.test-echo-assemble".equals(protocol)) {
        _websocket=new TestEchoAssembleWebSocket();
      }
 else       if ("org.ietf.websocket.test-echo-fragment".equals(protocol)) {
        _websocket=new TestEchoFragmentWebSocket();
      }
 else       if (protocol == null) {
        _websocket=new TestWebSocket();
      }
      return _websocket;
    }
  }
;
  setHandler(_wsHandler);
  _rHandler=new ResourceHandler();
  _rHandler.setDirectoriesListed(true);
  _rHandler.setResourceBase(".");
  _wsHandler.setHandler(_rHandler);
}
