{
  WebAppContext context=new WebAppContext();
  context.setWar(Resource.newResource(app.getArchivePath().toURL()).toString());
  String path=app.getArchivePath().getName();
  if (FileID.isWebArchiveFile(app.getArchivePath())) {
    path=path.substring(0,path.length() - 4);
  }
  if (path.equalsIgnoreCase("root") || path.equalsIgnoreCase("root/"))   path=URIUtil.SLASH;
  if (path.charAt(0) != '/')   path="/" + path;
  if (path.endsWith("/") && path.length() > 0)   path=path.substring(0,path.length() - 1);
  context.setContextPath(path);
  return context;
}
