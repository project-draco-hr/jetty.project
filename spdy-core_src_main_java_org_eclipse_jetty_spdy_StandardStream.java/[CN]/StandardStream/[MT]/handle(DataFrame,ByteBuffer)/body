{
  if (!opened) {
    session.rst(new RstInfo(getId(),StreamStatus.PROTOCOL_ERROR));
    return;
  }
  updateCloseState(dataFrame.isClose());
  ByteBufferDataInfo dataInfo=new ByteBufferDataInfo(data,dataFrame.isClose(),dataFrame.isCompress()){
    @Override public void consume(    int delta){
      super.consume(delta);
      if (consumed() == length() && !isClosed())       windowUpdate(length());
    }
  }
;
  notifyOnData(dataInfo);
  session.flush();
}
