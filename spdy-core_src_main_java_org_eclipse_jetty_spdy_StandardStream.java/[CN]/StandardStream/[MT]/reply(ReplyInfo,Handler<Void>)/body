{
  try {
    updateCloseState(replyInfo.isClose());
    SynReplyFrame frame=new SynReplyFrame(session.getVersion(),replyInfo.getFlags(),getId(),replyInfo.getHeaders());
    session.control(this,frame,handler,null);
  }
 catch (  StreamException x) {
    logger.debug("Could not send reply on stream " + this,x);
    handler.failed(x,null);
    session.rst(new RstInfo(getId(),x.getStreamStatus()));
  }
}
