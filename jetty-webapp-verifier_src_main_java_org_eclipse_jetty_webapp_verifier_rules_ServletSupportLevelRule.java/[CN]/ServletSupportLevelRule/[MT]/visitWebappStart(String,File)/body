{
  super.visitWebappStart(path,dir);
  File webXmlFile=new File(dir,"WEB-INF/web.xml".replaceAll("/",fileSep));
  String webxmlpath=getWebappRelativePath(webXmlFile);
  if (!webXmlFile.exists()) {
    error(webxmlpath,"web.xml does not exist");
    return;
  }
  DocumentBuilderFactory factory=DocumentBuilderFactory.newInstance();
  factory.setValidating(false);
  factory.setNamespaceAware(true);
  try {
    DocumentBuilder builder=factory.newDocumentBuilder();
    Document doc=builder.parse(webXmlFile);
    List<ServletId> detectedIds=collectServletIds(webxmlpath,doc);
    Set<String> versions=new TreeSet<String>();
    for (    ServletId id : detectedIds) {
      versions.add(id.version);
    }
    if (versions.size() > 1) {
      String msg=String.format("Found %d versions defined [%s], expected 1",versions.size(),join(versions,", "));
      error(webxmlpath,msg);
      for (      ServletId id : detectedIds) {
        reportConflicting(webxmlpath,id,detectedIds);
      }
    }
    reportOverVersion(webxmlpath,detectedIds);
  }
 catch (  ParserConfigurationException e) {
    exception(webxmlpath,"[internal] Unable to establish XML parser",e);
  }
catch (  SAXException e) {
    exception(webxmlpath,"Unable to parse web.xml",e);
  }
catch (  IOException e) {
    exception(webxmlpath,"Unable to parse web.xml",e);
  }
}
