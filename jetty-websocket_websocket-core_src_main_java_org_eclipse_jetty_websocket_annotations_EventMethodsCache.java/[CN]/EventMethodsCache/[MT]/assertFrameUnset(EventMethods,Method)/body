{
  Class<?> paramTypes[]=method.getParameterTypes();
  Class<?> lastType=paramTypes[paramTypes.length - 1];
  if (!BaseFrame.class.isAssignableFrom(lastType)) {
    throw new InvalidWebSocketException("Unrecognized @OnWebSocketFrame frame type " + lastType);
  }
  @SuppressWarnings("unchecked") Class<? extends BaseFrame> frameType=(Class<? extends BaseFrame>)lastType;
  EventMethod dup=events.getOnFrame(frameType);
  if (dup != null) {
    StringBuilder err=new StringBuilder();
    err.append("Duplicate Frame Type declaration on ");
    err.append(method);
    err.append(StringUtil.__LINE_SEPARATOR);
    err.append("Type ").append(frameType.getSimpleName()).append(" previously declared at ");
    err.append(dup.getMethod());
    throw new InvalidWebSocketException(err.toString());
  }
}
