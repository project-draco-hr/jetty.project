{
  if (isStarted()) {
    long interval=event._executeAt - now;
    if (interval <= 0 && event._state.compareAndSet(State.NEW,State.DONE)) {
      _executor.execute(event._task);
    }
 else     if (_delayQ._delay > 0 && interval > _delayQ._delay) {
      long dequeue_at=now + _delayQ._delay;
      _delayQ.add(event,dequeue_at);
    }
 else     if (event._state.compareAndSet(State.NEW,State.SCHEDULED)) {
      _timerQ.add(event);
      if (interval <= MAX_SLEEP) {
        Thread th=_runner;
        if (th != null)         th.interrupt();
      }
    }
 else     throw new IllegalSelectorException();
  }
}
