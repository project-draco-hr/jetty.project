{
  try {
    HttpDestination destination=(HttpDestination)context.get(HttpClientTransport.HTTP_DESTINATION_CONTEXT_KEY);
    HttpClient client=destination.getHttpClient();
    ClientConnectionFactory connectionFactory=this.connectionFactory;
    if (HttpScheme.HTTPS.is(destination.getScheme()))     connectionFactory=new SslClientConnectionFactory(client.getSslContextFactory(),client.getByteBufferPool(),client.getExecutor(),connectionFactory);
    org.eclipse.jetty.io.Connection connection=connectionFactory.newConnection(getEndPoint(),context);
    ClientConnectionFactory.Helper.replaceConnection(this,connection);
    LOG.debug("SOCKS4 tunnel established: {} over {}",this,connection);
  }
 catch (  Throwable x) {
    failed(x);
  }
}
