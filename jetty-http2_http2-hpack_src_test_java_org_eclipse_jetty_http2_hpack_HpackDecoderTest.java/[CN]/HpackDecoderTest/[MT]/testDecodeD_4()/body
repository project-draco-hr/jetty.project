{
  HpackDecoder decoder=new HpackDecoder(4096,8192);
  String encoded="828786448ce7cf9bebe89b6fb16fa9b6ff";
  ByteBuffer buffer=ByteBuffer.wrap(TypeUtil.fromHexString(encoded));
  MetaData.Request request=(MetaData.Request)decoder.decode(buffer);
  assertEquals("GET",request.getMethod());
  assertEquals(HttpScheme.HTTP.asString(),request.getURI().getScheme());
  assertEquals("/",request.getURI().getPath());
  assertEquals("www.example.com",request.getURI().getHost());
  assertFalse(request.iterator().hasNext());
  encoded="5c86b9b9949556bf";
  buffer=ByteBuffer.wrap(TypeUtil.fromHexString(encoded));
  request=(MetaData.Request)decoder.decode(buffer);
  assertEquals("GET",request.getMethod());
  assertEquals(HttpScheme.HTTP.asString(),request.getURI().getScheme());
  assertEquals("/",request.getURI().getPath());
  assertEquals("www.example.com",request.getURI().getHost());
  Iterator<HttpField> iterator=request.iterator();
  assertTrue(iterator.hasNext());
  assertEquals(new HttpField("cache-control","no-cache"),iterator.next());
  assertFalse(iterator.hasNext());
  encoded="30858c8b844088571c5cdb737b2faf89571c5cdb73724d9c57";
  buffer=ByteBuffer.wrap(TypeUtil.fromHexString(encoded));
  request=(MetaData.Request)decoder.decode(buffer);
  assertEquals("GET",request.getMethod());
  assertEquals(HttpScheme.HTTPS.asString(),request.getURI().getScheme());
  assertEquals("/index.html",request.getURI().getPath());
  assertEquals("www.example.com",request.getURI().getHost());
  iterator=request.iterator();
  assertTrue(iterator.hasNext());
  assertEquals(new HttpField("custom-key","custom-value"),iterator.next());
  assertFalse(iterator.hasNext());
}
