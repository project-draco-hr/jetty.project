{
  HpackDecoder decoder=new HpackDecoder(4096,8192);
  String encoded="828786440f7777772e6578616d706c652e636f6d";
  ByteBuffer buffer=ByteBuffer.wrap(TypeUtil.fromHexString(encoded));
  MetaData.Request request=(MetaData.Request)decoder.decode(buffer);
  assertEquals("GET",request.getMethod());
  assertEquals(HttpScheme.HTTP,request.getScheme());
  assertEquals("/",request.getURI());
  assertEquals("www.example.com",request.getHost());
  assertFalse(request.iterator().hasNext());
  encoded="5c086e6f2d6361636865";
  buffer=ByteBuffer.wrap(TypeUtil.fromHexString(encoded));
  request=(MetaData.Request)decoder.decode(buffer);
  assertEquals("GET",request.getMethod());
  assertEquals(HttpScheme.HTTP,request.getScheme());
  assertEquals("/",request.getURI());
  assertEquals("www.example.com",request.getHost());
  Iterator<HttpField> iterator=request.iterator();
  assertTrue(iterator.hasNext());
  assertEquals(new HttpField("cache-control","no-cache"),iterator.next());
  assertFalse(iterator.hasNext());
  encoded="30858c8b84400a637573746f6d2d6b65790c637573746f6d2d76616c7565";
  buffer=ByteBuffer.wrap(TypeUtil.fromHexString(encoded));
  request=(MetaData.Request)decoder.decode(buffer);
  assertEquals("GET",request.getMethod());
  assertEquals(HttpScheme.HTTPS,request.getScheme());
  assertEquals("/index.html",request.getURI());
  assertEquals("www.example.com",request.getHost());
  iterator=request.iterator();
  assertTrue(iterator.hasNext());
  assertEquals(new HttpField("custom-key","custom-value"),iterator.next());
  assertFalse(iterator.hasNext());
}
