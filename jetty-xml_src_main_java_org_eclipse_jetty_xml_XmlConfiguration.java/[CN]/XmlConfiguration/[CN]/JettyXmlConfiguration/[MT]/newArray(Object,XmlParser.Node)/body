{
  Class<?> aClass=java.lang.Object.class;
  String type=node.getAttribute("type");
  final String id=node.getAttribute("id");
  if (type != null) {
    aClass=TypeUtil.fromName(type);
    if (aClass == null) {
      if ("String".equals(type))       aClass=java.lang.String.class;
 else       if ("URL".equals(type))       aClass=java.net.URL.class;
 else       if ("InetAddress".equals(type))       aClass=java.net.InetAddress.class;
 else       aClass=Loader.loadClass(XmlConfiguration.class,type,true);
    }
  }
  Object al=null;
  for (  Object nodeObject : node) {
    XmlParser.Node item=(Node)nodeObject;
    String nid=item.getAttribute("id");
    Object v=value(obj,item);
    al=LazyList.add(al,(v == null && aClass.isPrimitive()) ? 0 : v);
    if (nid != null)     _configuration.getIdMap().put(nid,v);
  }
  Object array=LazyList.toArray(al,aClass);
  if (id != null)   _configuration.getIdMap().put(id,array);
  return array;
}
