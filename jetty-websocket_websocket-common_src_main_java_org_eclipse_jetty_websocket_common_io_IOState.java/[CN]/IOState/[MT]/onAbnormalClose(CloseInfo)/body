{
  ConnectionState event=null;
synchronized (this.state) {
    if (this.state == ConnectionState.CLOSED) {
      return;
    }
    if (this.state == ConnectionState.OPEN) {
      this.cleanClose.set(false);
    }
    this.state=ConnectionState.CLOSED;
    this.closeInfo.compareAndSet(null,close);
    this.inputAvailable.set(false);
    this.outputAvailable.set(false);
    this.closeHandshakeSource.set(CloseHandshakeSource.ABNORMAL);
    event=this.state;
  }
  notifyStateListeners(event);
}
