{
  int requests=2000;
  int timeout=30;
  CountDownLatch requestLatch=new CountDownLatch(requests);
  for (int i=0; i < requests; i++) {
    threadPool.execute(new executeSingleRequestRunnable(requestLatch));
  }
  threadPool.shutdown();
  threadPool.awaitTermination(timeout,TimeUnit.SECONDS);
  assertThat("all requests executed",requestLatch.await(timeout,TimeUnit.SECONDS),is(true));
}
