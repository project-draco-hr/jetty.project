{
  StartArgs args=new StartArgs(cmdLine);
  baseHome.initialize(args);
  StartLog.getInstance().initialize(baseHome,args);
  StartLog.debug("jetty.home=%s",baseHome.getHome());
  StartLog.debug("jetty.base=%s",baseHome.getBase());
  File start_ini=baseHome.getBaseFile("start.ini");
  if (FS.canReadFile(start_ini)) {
    StartLog.debug("Reading ${jetty.base}/start.ini - %s",start_ini);
    args.parse(baseHome,new StartIni(start_ini));
  }
  File start_d=baseHome.getBaseFile("start.d");
  if (FS.canReadDirectory(start_d)) {
    List<Path> paths=baseHome.getPaths(start_d.toPath(),1,"*.ini");
    Collections.sort(paths,new NaturalSort.Paths());
    for (    Path path : paths) {
      StartLog.debug("Reading ${jetty.base}/start.d/%s - %s",path.getFileName(),path);
      args.parse(baseHome,new StartIni(path));
    }
  }
  StartLog.debug("Parsing collected arguments");
  args.parseCommandLine();
  Modules modules=new Modules();
  StartLog.debug("Registering all modules");
  modules.registerAll(baseHome,args);
  for (  String enabledModule : args.getEnabledModules()) {
    List<String> sources=args.getSources(enabledModule);
    modules.enable(enabledModule,sources);
  }
  StartLog.debug("Building Module Graph");
  modules.buildGraph();
  args.setAllModules(modules);
  List<Module> activeModules=modules.resolveEnabled();
  args.expandLibs(baseHome);
  args.expandModules(baseHome,activeModules);
  args.resolveExtraXmls(baseHome);
  return args;
}
