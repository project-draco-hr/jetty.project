{
  CommandLineConfigSource cmdLineSource=new CommandLineConfigSource(cmdLine);
  baseHome=new BaseHome(cmdLineSource);
  StartLog.debug("jetty.home=%s",baseHome.getHome());
  StartLog.debug("jetty.base=%s",baseHome.getBase());
  StartLog.debug("Parsing collected arguments");
  StartArgs args=new StartArgs();
  args.parse(baseHome.getConfigSources());
  Modules modules=new Modules(baseHome,args);
  StartLog.debug("Registering all modules");
  modules.registerAll();
  for (  String enabledModule : args.getEnabledModules()) {
    List<String> msources=args.getSources(enabledModule);
    modules.enable(enabledModule,msources);
  }
  StartLog.debug("Building Module Graph");
  modules.buildGraph();
  args.setAllModules(modules);
  List<Module> activeModules=modules.getEnabled();
  modules.assertModulesValid(activeModules);
  args.expandLibs(baseHome);
  args.expandModules(baseHome,activeModules);
  args.resolveExtraXmls(baseHome);
  args.resolvePropertyFiles(baseHome);
  return args;
}
