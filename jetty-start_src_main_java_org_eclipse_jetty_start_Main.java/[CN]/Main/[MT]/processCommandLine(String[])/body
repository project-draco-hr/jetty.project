{
  ConfigSources sources=new ConfigSources();
  CommandLineConfigSource cmdLineSource=new CommandLineConfigSource(cmdLine);
  sources.add(cmdLineSource);
  sources.add(new JettyBaseConfigSource(cmdLineSource.getBasePath()));
  sources.add(new JettyHomeConfigSource(cmdLineSource.getHomePath()));
  baseHome.initialize(sources);
  StartLog.getInstance().initialize(baseHome,cmdLineSource);
  StartLog.debug("jetty.home=%s",baseHome.getHome());
  StartLog.debug("jetty.base=%s",baseHome.getBase());
  StartLog.debug("Parsing collected arguments");
  StartArgs args=new StartArgs();
  args.parse(sources);
  Modules modules=new Modules();
  StartLog.debug("Registering all modules");
  modules.registerAll(baseHome,args);
  for (  String enabledModule : args.getEnabledModules()) {
    List<String> msources=args.getSources(enabledModule);
    modules.enable(enabledModule,msources);
  }
  StartLog.debug("Building Module Graph");
  modules.buildGraph();
  args.setAllModules(modules);
  List<Module> activeModules=modules.resolveEnabled();
  args.expandLibs(baseHome);
  args.expandModules(baseHome,activeModules);
  args.resolveExtraXmls(baseHome);
  return args;
}
