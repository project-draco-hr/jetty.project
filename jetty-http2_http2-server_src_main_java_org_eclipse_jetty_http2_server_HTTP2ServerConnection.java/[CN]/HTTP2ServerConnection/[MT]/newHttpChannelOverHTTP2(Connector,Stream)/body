{
  HttpChannelOverHTTP2 channel=channels.poll();
  if (channel != null) {
    channel.getHttp2Transport().setStream((IStream)stream);
    if (LOG.isDebugEnabled())     LOG.debug("recycled :{}/{}",channel,this);
  }
 else {
    channel=new HttpChannelOverHTTP2(connector,httpConfig,getEndPoint(),new HttpTransportOverHTTP2(connector,httpConfig,getEndPoint(),(IStream)stream)){
      @Override public void onCompleted(){
        super.onCompleted();
        recycle();
        channels.add(this);
      }
    }
;
    if (LOG.isDebugEnabled())     LOG.debug("new :{}/{}",channel,this);
  }
  stream.setAttribute(IStream.CHANNEL_ATTRIBUTE,channel);
  return channel;
}
