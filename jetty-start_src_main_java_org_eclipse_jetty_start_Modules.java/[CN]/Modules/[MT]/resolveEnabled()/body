{
  Set<Module> active=new HashSet<Module>();
  for (  Module module : modules.values()) {
    if (module.isEnabled()) {
      findParents(module,active);
    }
  }
  List<Module> ordered=new ArrayList<>();
  ordered.addAll(active);
  Collections.sort(ordered,new Module.DepthComparator());
  return ordered;
}
