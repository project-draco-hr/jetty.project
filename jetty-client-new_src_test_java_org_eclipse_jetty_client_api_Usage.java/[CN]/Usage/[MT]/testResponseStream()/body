{
  HTTPClient client=new HTTPClient();
  StreamResponseListener listener=new StreamResponseListener();
  client.builder("localhost:8080").build().send(listener);
  Response response=listener.get(5,TimeUnit.SECONDS);
  if (response.getStatus() == 200) {
    byte[] buffer=new byte[256];
    try (InputStream input=listener.getInputStream()){
      while (true) {
        int read=input.read(buffer);
        if (read < 0)         break;
      }
    }
     try (FileOutputStream output=new FileOutputStream("")){
      listener.writeTo(output);
    }
   }
 else {
    response.abort();
  }
}
