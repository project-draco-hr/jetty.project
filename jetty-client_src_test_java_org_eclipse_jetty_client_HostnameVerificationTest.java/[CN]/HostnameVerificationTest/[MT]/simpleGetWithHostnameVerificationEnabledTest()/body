{
  clientSslContextFactory.setEndpointIdentificationAlgorithm("HTTPS");
  String uri="https://localhost:" + connector.getLocalPort() + "/";
  try {
    client.GET(uri);
    fail("sending request to client should have failed with an Exception!");
  }
 catch (  ExecutionException x) {
    Throwable cause=x.getCause();
    if (cause instanceof SSLHandshakeException)     assertThat(cause.getCause().getCause(),instanceOf(CertificateException.class));
 else     assertThat(cause,instanceOf(ClosedChannelException.class));
  }
}
