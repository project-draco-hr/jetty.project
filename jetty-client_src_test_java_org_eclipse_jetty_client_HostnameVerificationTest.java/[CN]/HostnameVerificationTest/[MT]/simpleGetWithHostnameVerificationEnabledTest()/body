{
  clientSslContextFactory.setEndpointIdentificationAlgorithm("HTTPS");
  String uri="https://localhost:" + connector.getLocalPort() + "/";
  try {
    client.GET(uri);
    Assert.fail("sending request to client should have failed with an Exception!");
  }
 catch (  ExecutionException x) {
    Throwable cause=x.getCause();
    if (cause == null) {
      x.printStackTrace();
      Assert.fail("No cause?");
    }
    if (cause instanceof SSLHandshakeException)     Assert.assertThat(cause.getCause().getCause(),Matchers.instanceOf(CertificateException.class));
 else     Assert.assertThat(cause.getCause(),Matchers.instanceOf(ClosedChannelException.class));
  }
}
