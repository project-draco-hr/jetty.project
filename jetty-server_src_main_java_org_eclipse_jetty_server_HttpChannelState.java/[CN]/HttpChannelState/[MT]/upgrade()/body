{
  cancelTimeout();
  try (SpinLock.Lock lock=_lock.lock()){
switch (_state) {
case IDLE:
case COMPLETED:
      break;
default :
    throw new IllegalStateException(getStatusString());
}
_asyncListeners=null;
_state=State.UPGRADED;
_async=null;
_initial=true;
_asyncReadPossible=_asyncReadUnready=false;
_asyncWrite=false;
_timeoutMs=DEFAULT_TIMEOUT;
_event=null;
}
 }
