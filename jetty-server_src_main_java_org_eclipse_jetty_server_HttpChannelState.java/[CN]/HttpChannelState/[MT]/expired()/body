{
  final List<AsyncListener> aListeners;
  AsyncContextEvent event;
synchronized (this) {
switch (_state) {
case ASYNCSTARTED:
case ASYNCWAIT:
      _expired=true;
    event=_event;
  aListeners=_asyncListeners;
break;
default :
return;
}
}
if (aListeners != null) {
for (AsyncListener listener : aListeners) {
try {
listener.onTimeout(event);
}
 catch (Exception e) {
LOG.debug(e);
event.setThrowable(e);
_channel.getRequest().setAttribute(RequestDispatcher.ERROR_EXCEPTION,e);
break;
}
}
}
synchronized (this) {
switch (_state) {
case ASYNCSTARTED:
case ASYNCWAIT:
_state=State.REDISPATCH;
break;
default :
_expired=false;
break;
}
}
scheduleDispatch();
}
