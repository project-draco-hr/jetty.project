{
synchronized (this) {
switch (_state) {
case IDLE:
      _initial=true;
    _state=State.DISPATCHED;
  if (_lastAsyncListeners != null)   _lastAsyncListeners.clear();
if (_asyncListeners != null) _asyncListeners.clear();
 else {
  _asyncListeners=_lastAsyncListeners;
  _lastAsyncListeners=null;
}
break;
case COMPLETECALLED:
_state=State.COMPLETING;
return Next.COMPLETE;
case COMPLETING:
return Next.COMPLETE;
case ASYNCWAIT:
return Next.WAIT;
case COMPLETED:
return Next.WAIT;
case REDISPATCH:
_state=State.REDISPATCHED;
break;
default :
throw new IllegalStateException(this.getStatusString());
}
_responseWrapped=false;
return Next.CONTINUE;
}
}
