{
synchronized (this) {
switch (_state) {
case IDLE:
      _continuation=false;
    _responseWrapped=false;
  _initial=true;
_state=State.DISPATCHED;
if (_lastAsyncListeners != null) _lastAsyncListeners.clear();
if (_asyncListeners != null) _asyncListeners.clear();
 else {
_asyncListeners=_lastAsyncListeners;
_lastAsyncListeners=null;
}
return true;
case COMPLETECALLED:
_state=State.COMPLETING;
return false;
case ASYNCWAIT:
case COMPLETING:
case COMPLETED:
return false;
case REDISPATCH:
_continuation=false;
_responseWrapped=false;
_state=State.REDISPATCHED;
return true;
default :
throw new IllegalStateException(this.getStatusString());
}
}
}
