{
  boolean handle;
synchronized (this) {
switch (_state) {
case DISPATCHED:
case REDISPATCHED:
      throw new IllegalStateException(this.getStatusString());
case IDLE:
case ASYNCSTARTED:
    _state=State.COMPLETECALLED;
  return;
case ASYNCWAIT:
_state=State.COMPLETECALLED;
handle=!_expired;
break;
default :
throw new IllegalStateException(this.getStatusString());
}
}
if (handle) {
cancelTimeout();
ContextHandler handler=getContextHandler();
if (handler != null) handler.handle(_channel);
 else _channel.handle();
}
}
