{
  boolean handle=false;
synchronized (this) {
    if (_async != Async.STARTED && _async != Async.EXPIRING)     throw new IllegalStateException(this.getStatusString());
    _async=Async.COMPLETE;
    if (_state == State.ASYNC_WAIT) {
      handle=true;
      _state=State.ASYNC_WOKEN;
    }
  }
  cancelTimeout();
  if (handle) {
    ContextHandler handler=getContextHandler();
    if (handler != null)     handler.handle(_channel);
 else     _channel.handle();
  }
}
