{
  boolean proceed=handleAuthentication(request,response,serverAddress);
  if (!proceed)   return;
  String host=serverAddress;
  int port=80;
  int colon=serverAddress.indexOf(':');
  if (colon > 0) {
    host=serverAddress.substring(0,colon);
    port=Integer.parseInt(serverAddress.substring(colon + 1));
  }
  if (!validateDestination(host)) {
    LOG.info("ProxyHandler: Forbidden destination " + host);
    response.setStatus(HttpServletResponse.SC_FORBIDDEN);
    baseRequest.setHandled(true);
    return;
  }
  SocketChannel channel=connectToServer(request,host,port);
}
