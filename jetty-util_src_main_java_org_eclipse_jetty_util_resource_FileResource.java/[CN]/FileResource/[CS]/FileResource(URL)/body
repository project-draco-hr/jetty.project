{
  super(url,null);
  try {
    validateUri(url.getFile());
    validateUri(url.getPath());
    _file=new File(new URI(url.toString()));
  }
 catch (  URISyntaxException e) {
    throw e;
  }
catch (  Exception e) {
    LOG.ignore(e);
    try {
      String file_url="file:" + URIUtil.encodePath(url.toString().substring(5));
      URI uri=new URI(file_url);
      if (uri.getAuthority() == null)       _file=new File(uri);
 else       _file=new File(validateUri("//" + uri.getAuthority() + URIUtil.decodePath(url.getFile())));
    }
 catch (    Exception e2) {
      LOG.ignore(e2);
      checkConnection();
      Permission perm=_connection.getPermission();
      _file=new File(perm == null ? url.getFile() : perm.getName());
    }
  }
  if (_file.isDirectory()) {
    if (!_urlString.endsWith("/"))     _urlString=_urlString + "/";
  }
 else {
    if (_urlString.endsWith("/"))     _urlString=_urlString.substring(0,_urlString.length() - 1);
  }
}
