{
  System.err.println("testMaxIdleWithSlowResponse");
  configureServer(new SlowResponseHandler());
  Socket client=newSocket(HOST,_connector.getLocalPort());
  client.setSoTimeout(10000);
  assertFalse(client.isClosed());
  OutputStream os=client.getOutputStream();
  InputStream is=client.getInputStream();
  os.write(("GET / HTTP/1.0\r\n" + "host: " + HOST + ":"+ _connector.getLocalPort()+ "\r\n"+ "connection: keep-alive\r\n"+ "Connection: close\r\n"+ "\r\n").getBytes("utf-8"));
  os.flush();
  String in=IO.toString(is);
  int offset=0;
  for (int i=0; i < 20; i++) {
    offset=in.indexOf("Hello World",offset + 1);
    Assert.assertTrue("" + i,offset > 0);
  }
}
