{
  configureServer(new EchoHandler());
  Socket client=newSocket(_serverURI.getHost(),_serverURI.getPort());
  client.setSoTimeout(10000);
  Assert.assertFalse(client.isClosed());
  OutputStream os=client.getOutputStream();
  InputStream is=client.getInputStream();
  os.write(("POST /echo HTTP/1.0\r\n" + "host: " + _serverURI.getHost() + ":"+ _serverURI.getPort()+ "\r\n"+ "content-type: text/plain; charset=utf-8\r\n"+ "content-length: 20\r\n"+ "\r\n").getBytes("utf-8"));
  os.flush();
  for (int i=0; i < 4; i++) {
    os.write("123\n".getBytes("utf-8"));
    os.flush();
    Thread.sleep(1000);
  }
  os.write("===\n".getBytes("utf-8"));
  os.flush();
  String response=IO.toString(is);
  Assert.assertThat(response,containsString(" 200 "));
  Assert.assertThat(response,containsString("==="));
}
