{
  List<File> dependencyFiles=new ArrayList<File>();
  List<Resource> overlays=new ArrayList<Resource>();
  for (Iterator<Artifact> iter=projectArtifacts.iterator(); iter.hasNext(); ) {
    Artifact artifact=(Artifact)iter.next();
    if (artifact.getType().equals("war")) {
      try {
        Resource r=Resource.newResource("jar:" + Resource.toURL(artifact.getFile()).toString() + "!/");
        overlays.add(r);
        getExtraScanTargets().add(artifact.getFile());
      }
 catch (      Exception e) {
        throw new RuntimeException(e);
      }
      continue;
    }
    if (Artifact.SCOPE_PROVIDED.equals(artifact.getScope()))     continue;
    if (Artifact.SCOPE_TEST.equals(artifact.getScope()) && !useTestScope)     continue;
    dependencyFiles.add(artifact.getFile());
    getLog().debug("Adding artifact " + artifact.getFile().getName() + " with scope "+ artifact.getScope()+ " for WEB-INF/lib ");
  }
  webApp.setOverlays(overlays);
  return dependencyFiles;
}
