{
  Assert.assertThat("Websocket URI scheme",destWebsocketURI.getScheme(),anyOf(is("ws"),is("wss")));
  this.destWebsocketURI=destWebsocketURI;
  String scheme="http";
  if (destWebsocketURI.getScheme().equals("wss")) {
    scheme="https";
  }
  this.destHttpURI=new URI(scheme,destWebsocketURI.getSchemeSpecificPart(),destWebsocketURI.getFragment());
  policy=WebSocketPolicy.newClientPolicy();
  bufferPool=new StandardByteBufferPool(policy.getBufferSize());
  generator=new UnitGenerator();
  parser=new Parser(policy);
  parser.addListener(this);
  incomingFrameQueue=new LinkedBlockingDeque<>();
}
