{
  List<AsyncChunk> chunks=new ArrayList<>();
synchronized (lock) {
    failure=x;
    chunks.addAll(DeferredContentProvider.this.chunks);
    clear();
    current=null;
    lock.notify();
  }
  for (  AsyncChunk chunk : chunks)   chunk.callback.failed(x);
}
