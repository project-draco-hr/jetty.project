{
  boolean result;
synchronized (lock) {
    result=chunks.offer(buffer);
    if (result && buffer != CLOSE)     ++size;
  }
  if (result)   notifyListener();
  return result;
}
