{
  FilterConnection filteredConnection=new FilterConnection(connector.getByteBufferPool(),connector.getExecutor(),endPoint,_outputBufferSize);
  configure(filteredConnection,connector,endPoint);
  addFilters(connector,filteredConnection);
  ConnectionFactory next=connector.getConnectionFactory(_nextProtocol);
  EndPoint filteredEndPoint=filteredConnection.getFilterEndPoint();
  Connection connection=next.newConnection(connector,filteredEndPoint);
  filteredEndPoint.setConnection(connection);
  return filteredConnection;
}
