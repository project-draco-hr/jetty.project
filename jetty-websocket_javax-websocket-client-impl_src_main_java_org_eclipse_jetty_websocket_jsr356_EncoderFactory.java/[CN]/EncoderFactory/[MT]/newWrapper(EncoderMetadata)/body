{
  Class<? extends Encoder> encoderClass=metadata.getCoderClass();
  try {
    Encoder encoder=enhancedInstantiator.createInstance(encoderClass);
    return new Wrapper(encoder,metadata);
  }
 catch (  InstantiationException|IllegalAccessException e) {
    throw new IllegalStateException("Unable to instantiate Encoder: " + encoderClass.getName());
  }
}
