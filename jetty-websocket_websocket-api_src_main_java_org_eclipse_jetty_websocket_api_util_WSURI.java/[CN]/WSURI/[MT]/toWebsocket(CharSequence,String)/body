{
  if (query == null) {
    return toWebsocket(new URI(inputUrl.toString()));
  }
  return toWebsocket(new URI(inputUrl.toString() + '?' + query));
}
