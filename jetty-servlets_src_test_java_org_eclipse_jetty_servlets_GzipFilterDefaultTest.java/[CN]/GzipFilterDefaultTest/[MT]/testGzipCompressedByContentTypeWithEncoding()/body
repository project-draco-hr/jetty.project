{
  GzipTester tester=new GzipTester(testingdir,compressionType);
  tester.setGzipFilterClass(testFilter);
  FilterHolder holder=tester.setContentServlet(HttpContentTypeWithEncoding.class);
  holder.setInitParameter("mimeTypes","text/plain");
  try {
    tester.start();
    HttpTester.Response http=tester.assertNonStaticContentIsResponseGzipCompressed("GET","xxx",HttpContentTypeWithEncoding.COMPRESSED_CONTENT);
    Assert.assertEquals("Accept-Encoding",http.get("Vary"));
  }
  finally {
    tester.stop();
  }
}
