{
  final int bufferSize=8096;
  char buffer[]=new char[bufferSize];
  int len=bufferSize;
  if (out instanceof PrintWriter) {
    PrintWriter pout=(PrintWriter)out;
    while (!pout.checkError()) {
      len=in.read(buffer,0,bufferSize);
      if (len == -1)       break;
      out.write(buffer,0,len);
    }
  }
 else {
    while (true) {
      len=in.read(buffer,0,bufferSize);
      if (len == -1)       break;
      out.write(buffer,0,len);
    }
  }
}
