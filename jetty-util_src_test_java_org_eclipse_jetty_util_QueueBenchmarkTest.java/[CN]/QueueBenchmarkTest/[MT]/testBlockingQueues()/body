{
  int cores=Runtime.getRuntime().availableProcessors();
  Assume.assumeTrue(cores > 1);
  final int readers=cores / 2;
  final int writers=readers;
  final int iterations=16 * 1024 * 1024;
  final List<Queue<Runnable>> queues=new ArrayList<>();
  queues.add(new LinkedBlockingQueue<Runnable>());
  queues.add(new ArrayBlockingQueue<Runnable>(iterations * writers));
  queues.add(new BlockingArrayQueue<Runnable>(iterations * writers));
  testQueues(readers,writers,iterations,queues,true);
}
