{
  threadList.clear();
  buffersRetrieved=new AtomicLong(0);
  httpBuffers=new InnerBuffers(1024,4096);
  for (int i=0; i < numThreads; ++i) {
    threadList.add(new BufferPeeper("BufferPeeper: " + i));
  }
  System.gc();
  System.gc();
  System.gc();
  System.gc();
  System.gc();
  System.gc();
  System.gc();
  System.gc();
  long mem0=Runtime.getRuntime().totalMemory() - Runtime.getRuntime().freeMemory();
  runTest=true;
  Thread.sleep(runTestLength);
  System.gc();
  System.gc();
  System.gc();
  System.gc();
  System.gc();
  System.gc();
  System.gc();
  System.gc();
  long mem1=Runtime.getRuntime().totalMemory() - Runtime.getRuntime().freeMemory();
  runTest=false;
  long totalBuffersRetrieved=buffersRetrieved.get();
  System.out.println("Buffers Retrieved: " + totalBuffersRetrieved);
  System.out.println("Memory Used: " + (mem1 - mem0));
  for (  Thread t : threadList)   t.stop();
}
