{
  InnerBuffers buffers=new InnerBuffers(128,128);
  ByteBuffer h1=buffers.getHeader();
  ByteBuffer h2=buffers.getHeader();
  ByteBuffer b1=buffers.getBuffer();
  ByteBuffer b2=buffers.getBuffer();
  ByteBuffer b3=buffers.getBuffer(128);
  List<ByteBuffer> known=new ArrayList<ByteBuffer>();
  known.add(h1);
  known.add(h2);
  known.add(b1);
  known.add(b2);
  known.add(b3);
  buffers.returnBuffer(h1);
  buffers.returnBuffer(h2);
  buffers.returnBuffer(b1);
  buffers.returnBuffer(b2);
  buffers.returnBuffer(b3);
  assertTrue(h1 == buffers.getHeader());
  assertTrue(b3 == buffers.getHeader());
  ByteBuffer buffer=buffers.getHeader();
  for (  ByteBuffer b : known)   assertTrue(b != buffer);
  assertTrue(b1 == buffers.getBuffer());
  buffer=buffers.getBuffer();
  for (  ByteBuffer b : known)   assertTrue(b != buffer);
  buffer=buffers.getBuffer(128);
  for (  ByteBuffer b : known)   assertTrue(b != buffer);
}
