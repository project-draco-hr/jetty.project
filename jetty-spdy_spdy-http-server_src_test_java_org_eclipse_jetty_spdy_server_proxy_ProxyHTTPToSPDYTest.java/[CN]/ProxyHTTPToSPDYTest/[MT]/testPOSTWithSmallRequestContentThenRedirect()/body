{
  final String data="0123456789ABCDEF";
  InetSocketAddress proxyAddress=startProxy(startServer(new ServerSessionFrameListener.Adapter(){
    @Override public StreamFrameListener onSyn(    Stream stream,    SynInfo synInfo){
      return new StreamFrameListener.Adapter(){
        @Override public void onData(        Stream stream,        DataInfo dataInfo){
          dataInfo.consume(dataInfo.length());
          if (dataInfo.isClose()) {
            Fields headers=new Fields();
            headers.put(HTTPSPDYHeader.VERSION.name(version),"HTTP/1.1");
            headers.put(HTTPSPDYHeader.STATUS.name(version),"303 See Other");
            headers.put(HttpHeader.LOCATION.asString(),"http://other.location");
            stream.reply(new ReplyInfo(headers,true),new Callback.Adapter());
          }
        }
      }
;
    }
  }
));
  ContentResponse response=httpClient.newRequest("localhost",proxyAddress.getPort()).method(HttpMethod.POST).content(new StringContentProvider(data)).followRedirects(false).send();
  assertThat("response code is 303",response.getStatus(),is(303));
  ContentResponse response2=httpClient.newRequest("localhost",proxyAddress.getPort()).method(HttpMethod.POST).content(new StringContentProvider(data)).followRedirects(false).send();
  assertThat("response2 code is 303",response2.getStatus(),is(303));
}
