{
  URI uri=connectPromise.getRequest().getRequestURI();
  request.setRequestURI(uri);
  UpgradeListener handshakeListener=connectPromise.getUpgradeListener();
  if (handshakeListener != null) {
    handshakeListener.onHandshakeRequest(request);
  }
  String rawRequest=request.generate();
  ByteBuffer buf=BufferUtil.toBuffer(rawRequest,StringUtil.__UTF8_CHARSET);
  getEndPoint().write(this,buf);
}
