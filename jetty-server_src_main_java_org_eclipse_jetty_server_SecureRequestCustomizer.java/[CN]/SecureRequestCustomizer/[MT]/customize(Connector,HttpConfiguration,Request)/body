{
  if (request.getHttpChannel().getEndPoint() instanceof DecryptedEndPoint) {
    request.setScheme(HttpScheme.HTTPS.asString());
    request.setSecure(true);
    SslConnection.DecryptedEndPoint ssl_endp=(DecryptedEndPoint)request.getHttpChannel().getEndPoint();
    SslConnection sslConnection=ssl_endp.getSslConnection();
    SSLEngine sslEngine=sslConnection.getSSLEngine();
    customize(sslEngine,request);
  }
}
