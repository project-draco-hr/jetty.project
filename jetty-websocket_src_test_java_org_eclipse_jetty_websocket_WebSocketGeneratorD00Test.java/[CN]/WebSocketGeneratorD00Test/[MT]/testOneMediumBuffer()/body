{
  byte[] b=new byte[501];
  for (int i=0; i < b.length; i++)   b[i]=(byte)('0' + (i % 10));
  _generator.addFrame((byte)0xf,b,0,b.length,0);
  _generator.flush();
  assertEquals(0x0f,_out.get());
  assertEquals(0x7e,_out.get());
  assertEquals((b.length >> 8),0xff & _out.get());
  assertEquals(0xff & b.length,0xff & _out.get());
  for (int i=0; i < b.length; i++)   assertEquals('0' + (i % 10),0xff & _out.get());
}
