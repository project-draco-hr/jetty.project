{
  assertNotClosed();
  LOG.debug("close()");
  flush(true);
  LOG.debug("Sent Frame Count: {}",frameCount);
  closed=true;
  try {
    if (callback != null) {
      callback.writeSuccess();
    }
    super.close();
    bufferPool.release(buffer);
    LOG.debug("closed");
  }
 catch (  IOException e) {
    notifyFailure(e);
    throw e;
  }
}
