{
  byte[] buffer=new byte[2048];
  InputStream input=client.getInputStream();
  client.setSoTimeout(1000);
  while (true) {
    try {
      int read=input.read(buffer);
      if (read < 0)       return true;
      parser.parse(ByteBuffer.wrap(buffer,0,read));
      if (client.isClosed())       return true;
    }
 catch (    SocketTimeoutException x) {
      return false;
    }
  }
}
