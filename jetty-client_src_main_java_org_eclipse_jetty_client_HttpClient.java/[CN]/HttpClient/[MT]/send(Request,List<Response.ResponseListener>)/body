{
  String scheme=request.getScheme().toLowerCase();
  if (!Arrays.asList("http","https").contains(scheme))   throw new IllegalArgumentException("Invalid protocol " + scheme);
  int port=request.getPort();
  if (port < 0)   port="https".equals(scheme) ? 443 : 80;
  for (  Response.ResponseListener listener : listeners)   if (listener instanceof Schedulable)   ((Schedulable)listener).schedule(scheduler);
  HttpDestination destination=provideDestination(scheme,request.getHost(),port);
  destination.send(request,listeners);
}
