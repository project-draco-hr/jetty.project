{
  if (_connectorType != CONNECTOR_SOCKET) {
    Buffer buf=null;
    if (size == getHeaderBufferSize())     buf=new IndirectNIOBuffer(size);
 else     if (_useDirectBuffers)     buf=new DirectNIOBuffer(size);
 else     buf=new IndirectNIOBuffer(size);
    return buf;
  }
 else {
    return new ByteArrayBuffer(size);
  }
}
