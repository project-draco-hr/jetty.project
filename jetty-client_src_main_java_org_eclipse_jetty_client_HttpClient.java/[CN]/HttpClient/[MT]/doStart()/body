{
  if (sslContextFactory != null)   addBean(sslContextFactory);
  String name=HttpClient.class.getSimpleName() + "@" + hashCode();
  if (executor == null) {
    QueuedThreadPool threadPool=new QueuedThreadPool();
    threadPool.setName(name);
    executor=threadPool;
  }
  addBean(executor);
  if (byteBufferPool == null)   byteBufferPool=new MappedByteBufferPool();
  addBean(byteBufferPool);
  if (scheduler == null)   scheduler=new ScheduledExecutorScheduler(name + "-scheduler",false);
  addBean(scheduler);
  addBean(transport);
  transport.setHttpClient(this);
  resolver=new SocketAddressResolver(executor,scheduler,getAddressResolutionTimeout());
  handlers.add(new ContinueProtocolHandler(this));
  handlers.add(new RedirectProtocolHandler(this));
  handlers.add(new WWWAuthenticationProtocolHandler(this));
  handlers.add(new ProxyAuthenticationProtocolHandler(this));
  decoderFactories.add(new GZIPContentDecoder.Factory());
  cookieManager=newCookieManager();
  cookieStore=cookieManager.getCookieStore();
  super.doStart();
}
