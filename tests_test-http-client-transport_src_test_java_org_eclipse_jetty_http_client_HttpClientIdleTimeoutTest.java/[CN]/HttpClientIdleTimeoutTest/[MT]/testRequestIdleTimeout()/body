{
  start(new AbstractHandler(){
    @Override public void handle(    String target,    Request baseRequest,    HttpServletRequest request,    HttpServletResponse response) throws IOException, ServletException {
      baseRequest.setHandled(true);
      AsyncContext asyncContext=request.startAsync();
      asyncContext.setTimeout(0);
    }
  }
);
  final CountDownLatch latch=new CountDownLatch(1);
  client.newRequest("localhost",connector.getLocalPort()).idleTimeout(idleTimeout,TimeUnit.MILLISECONDS).send(new Response.CompleteListener(){
    @Override public void onComplete(    Result result){
      if (result.isFailed())       latch.countDown();
    }
  }
);
  Assert.assertTrue(latch.await(2 * idleTimeout,TimeUnit.MILLISECONDS));
}
