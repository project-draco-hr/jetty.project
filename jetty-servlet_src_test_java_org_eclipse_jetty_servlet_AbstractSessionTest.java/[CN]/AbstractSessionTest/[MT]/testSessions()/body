{
  SessionTestClient client1=new SessionTestClient("http://" + __host1 + ":"+ __port1);
  SessionTestClient client2=new SessionTestClient("http://" + __host2 + ":"+ __port2);
  assertFalse(client1.send("/contextA",null));
  String cookie1=client1.newSession("/contextA");
  assertNotNull(cookie1);
  System.err.println("cookie1: " + cookie1);
  assertTrue(client1.setAttribute("/contextA",cookie1,"foo","bar"));
  assertTrue(client2.hasAttribute("/contextA",cookie1,"foo","bar"));
  assertTrue(client1.send("/contextA/dispatch/forward/contextB",cookie1));
  assertTrue(client2.send("/contextA/dispatch/forward/contextB",cookie1));
  assertTrue(client1.send("/contextB",cookie1));
  assertFalse(client1.hasAttribute("/contextB/action",cookie1,"foo","bar"));
  client1.setAttribute("/contextB/action",cookie1,"zzzzz","yyyyy");
  assertTrue(client1.hasAttribute("/contextB/action",cookie1,"zzzzz","yyyyy"));
  String cookie2=client2.newSession("/contextA");
  assertNotNull(cookie2);
  System.err.println("cookie2: " + cookie2);
  assertTrue(client2.setAttribute("/contextA",cookie2,"hello","world"));
  assertTrue(client1.hasAttribute("/contextA",cookie2,"hello","world"));
  assertTrue(client1.send("/contextA/dispatch/forward/contextB",cookie2));
  assertTrue(client2.send("/contextA/dispatch/forward/contextB",cookie2));
  assertTrue(client1.send("/contextB",cookie2));
  assertTrue(client1.invalidate("/contextA",cookie1));
  assertTrue(client1.send("/contextB",cookie1));
  assertFalse(client1.send("/contextA",cookie1));
  assertTrue(client1.invalidate("/contextB/action",cookie1));
  assertFalse(client1.send("/contextB/action",cookie1));
  assertTrue(client2.send("/contextB/action",cookie1));
}
