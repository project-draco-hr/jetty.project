{
  if (isUsingCookies()) {
    String sessionPath=(_sessionPath == null) ? contextPath : _sessionPath;
    sessionPath=(sessionPath == null || sessionPath.length() == 0) ? "/" : sessionPath;
    String id=getNodeId(session);
    HttpCookie cookie=null;
    if (_sessionComment == null) {
      cookie=new HttpCookie(_sessionCookie,id,_sessionDomain,sessionPath,_cookieConfig.getMaxAge(),_cookieConfig.isHttpOnly(),requestIsSecure && _cookieConfig.isSecure());
    }
 else {
      cookie=new HttpCookie(_sessionCookie,id,_sessionDomain,sessionPath,_cookieConfig.getMaxAge(),_cookieConfig.isHttpOnly(),requestIsSecure && _cookieConfig.isSecure(),_sessionComment,1);
    }
    return cookie;
  }
  return null;
}
