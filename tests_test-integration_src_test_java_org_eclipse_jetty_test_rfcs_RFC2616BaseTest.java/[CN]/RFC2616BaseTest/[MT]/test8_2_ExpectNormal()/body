{
  StringBuffer req4=new StringBuffer();
  req4.append("GET /echo/R1 HTTP/1.1\n");
  req4.append("Host: localhost\n");
  req4.append("Connection: close\n");
  req4.append("Expect: 100-continue\n");
  req4.append("Content-Type: text/plain\n");
  req4.append("Content-Length: 7\n");
  req4.append("\n");
  Socket sock=http.open();
  try {
    http.send(sock,req4);
    http.setTimeoutMillis(2000);
    response=http.readAvailable(sock);
    response.assertStatus("8.2.3 expect 100",HttpStatus.CONTINUE_100);
    http.send(sock,"654321\n");
    response=http.read(sock);
    response.assertStatusOK("8.2.3 expect 100");
    response.assertBody("8.2.3 expect 100","654321\n");
  }
  finally {
    http.close(sock);
  }
}
