{
  StringBuffer req1=new StringBuffer();
  req1.append("GET /echo/R1 HTTP/1.1\n");
  req1.append("Host: localhost\n");
  req1.append("Transfer-Encoding: identity\n");
  req1.append("Content-Type: text/plain\n");
  req1.append("Content-Length: 5\n");
  req1.append("\n");
  req1.append("123\r\n");
  req1.append("GET /echo/R2 HTTP/1.1\n");
  req1.append("Host: localhost\n");
  req1.append("Connection: close\n");
  req1.append("\n");
  List<HttpTester.Response> responses=http.requests(req1);
  Assert.assertEquals("Response Count",2,responses.size());
  HttpTester.Response response=responses.get(0);
  assertEquals("4.4.2 Message Length / Response Code",HttpStatus.OK_200,response.getStatus());
  assertThat("4.4.2 Message Length / Body",response.getContent(),Matchers.containsString("123\n"));
  response=responses.get(1);
  assertEquals("4.4.2 Message Length / Response Code",HttpStatus.OK_200,response.getStatus());
  assertEquals("4.4.2 Message Length / No Body","",response.getContent());
  StringBuffer req2=new StringBuffer();
  req2.append("GET /echo/R1 HTTP/1.1\n");
  req2.append("Host: localhost\n");
  req2.append("Transfer-Encoding: chunked\n");
  req2.append("Content-Type: text/plain\n");
  req2.append("Content-Length: 100\n");
  req2.append("\n");
  req2.append("3;\n");
  req2.append("123\n");
  req2.append("3;\n");
  req2.append("456\n");
  req2.append("0;\n");
  req2.append("\n");
  req2.append("GET /echo/R2 HTTP/1.1\n");
  req2.append("Host: localhost\n");
  req2.append("Connection: close\n");
  req2.append("Content-Type: text/plain\n");
  req2.append("Content-Length: 6\n");
  req2.append("\n");
  req2.append("7890AB");
  responses=http.requests(req2);
  Assert.assertEquals("Response Count",2,responses.size());
  response=responses.get(0);
  assertEquals("4.4.3 Ignore Content-Length / Response Code",HttpStatus.OK_200,response.getStatus());
  assertTrue("4.4.3 Ignore Content-Length / Body",response.getContent().contains("123456\n"));
  response=responses.get(1);
  assertEquals("4.4.3 Ignore Content-Length / Response Code",HttpStatus.OK_200,response.getStatus());
  assertTrue("4.4.3 Ignore Content-Length / Body",response.getContent().contains("7890AB\n"));
  if (STRICT) {
    StringBuffer req3=new StringBuffer();
    req3.append("GET /echo/R2 HTTP/1.1\n");
    req3.append("Host: localhost\n");
    req3.append("Content-Type: text/plain\n");
    req3.append("Connection: close\n");
    req3.append("\n");
    req3.append("123456");
    response=http.request(req3);
    assertEquals("4.4 Valid Content-Length Required",HttpStatus.LENGTH_REQUIRED_411,response.getStatus());
    assertTrue("4.4 Valid Content-Length Required",response.getContent() == null);
    StringBuffer req4=new StringBuffer();
    req4.append("GET /echo/R2 HTTP/1.0\n");
    req4.append("Content-Type: text/plain\n");
    req4.append("\n");
    req4.append("123456");
    response=http.request(req4);
    assertEquals("4.4 Valid Content-Length Required",HttpStatus.LENGTH_REQUIRED_411,response.getStatus());
    assertTrue("4.4 Valid Content-Length Required",response.getContent() == null);
  }
}
