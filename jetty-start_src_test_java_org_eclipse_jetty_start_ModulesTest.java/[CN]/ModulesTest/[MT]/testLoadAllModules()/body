{
  File homeDir=MavenTestingUtils.getTestResourceDir("dist-home");
  File baseDir=testdir.getEmptyDir();
  String cmdLine[]=new String[]{"jetty.version=TEST"};
  CommandLineConfigSource cmdLineSource=new CommandLineConfigSource(cmdLine);
  ConfigSources config=new ConfigSources();
  config.add(cmdLineSource);
  config.add(new JettyHomeConfigSource(homeDir.toPath()));
  config.add(new JettyBaseConfigSource(baseDir.toPath()));
  BaseHome basehome=new BaseHome(config);
  StartArgs args=new StartArgs();
  args.parse(config);
  Modules modules=new Modules(basehome,args);
  modules.registerAll();
  List<String> moduleNames=new ArrayList<>();
  for (  Module mod : modules) {
    if (mod.getName().equals("alpn-boot")) {
      continue;
    }
    moduleNames.add(mod.getName());
  }
  List<String> expected=new ArrayList<>();
  expected.add("alpn");
  expected.add("annotations");
  expected.add("apache-jsp");
  expected.add("apache-jstl");
  expected.add("cdi");
  expected.add("client");
  expected.add("continuation");
  expected.add("debuglog");
  expected.add("deploy");
  expected.add("ext");
  expected.add("fcgi");
  expected.add("gzip");
  expected.add("hawtio");
  expected.add("home-base-warning");
  expected.add("http");
  expected.add("http2");
  expected.add("http2c");
  expected.add("https");
  expected.add("ipaccess");
  expected.add("jaas");
  expected.add("jamon");
  expected.add("jaspi");
  expected.add("jminix");
  expected.add("jmx");
  expected.add("jmx-remote");
  expected.add("jndi");
  expected.add("jolokia");
  expected.add("jsp");
  expected.add("jstl");
  expected.add("jvm");
  expected.add("logging");
  expected.add("lowresources");
  expected.add("monitor");
  expected.add("plus");
  expected.add("proxy");
  expected.add("quickstart");
  expected.add("requestlog");
  expected.add("resources");
  expected.add("rewrite");
  expected.add("security");
  expected.add("server");
  expected.add("servlet");
  expected.add("servlets");
  expected.add("setuid");
  expected.add("spring");
  expected.add("ssl");
  expected.add("stats");
  expected.add("webapp");
  expected.add("websocket");
  expected.add("xinetd");
  ConfigurationAssert.assertContainsUnordered("All Modules",expected,moduleNames);
}
