{
  ClassLoader oldLoader=Thread.currentThread().getContextClassLoader();
  Thread.currentThread().setContextClassLoader(context.getClassLoader());
  try {
    Context ic=new InitialContext();
    Context compCtx=(Context)ic.lookup("java:comp");
    compCtx.destroySubcontext("env");
  }
 catch (  NameNotFoundException e) {
    Log.warn(e);
  }
  try {
    NamingContext scopeContext=(NamingContext)NamingEntryUtil.getContextForScope(context);
    scopeContext.getParent().destroySubcontext(scopeContext.getName());
  }
 catch (  NameNotFoundException e) {
    Log.ignore(e);
    Log.debug("No naming entries configured in environment for webapp " + context);
  }
  Thread.currentThread().setContextClassLoader(oldLoader);
}
