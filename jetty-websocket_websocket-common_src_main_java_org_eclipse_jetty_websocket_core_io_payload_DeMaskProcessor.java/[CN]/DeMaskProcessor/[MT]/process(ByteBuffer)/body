{
  if (!isMasked) {
    return;
  }
  int start=payload.position();
  int end=payload.limit();
  for (int i=start; i < end; i++, offset++) {
    payload.put(i,(byte)(payload.get(i) ^ mask[offset % 4]));
  }
}
