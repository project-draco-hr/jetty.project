{
  String source="abcXX";
  byte[] bytes=source.getBytes(StringUtil.__UTF8);
  bytes[3]=(byte)0xc0;
  bytes[4]=(byte)0x00;
  Utf8StringBuffer buffer=new Utf8StringBuffer();
  try {
    for (int i=0; i < bytes.length; i++)     buffer.append(bytes[i]);
    assertTrue(false);
  }
 catch (  IllegalStateException e) {
    assertTrue(e.toString().indexOf("!UTF-8") >= 0);
  }
  assertEquals("abc?",buffer.toString());
}
